import{r as e,R as s,j as t,z as a}from"./react-core-FGHlRSau.js";import{a as r}from"./axios-ei4kQ0Q2.js";import{az as l,X as n,ai as i,ao as o,S as c,aY as d,b1 as x,ad as m,m as u,p as h,D as p,ac as g,i as b,ap as j,aC as y,o as N,b2 as v,q as f,r as w,E as C,L as S,C as k,t as A,u as _,l as $,A as U,Z as P,s as T,aU as D,n as M,b3 as E,b as I}from"./icon-pack-tZfEXMDa.js";import"./vendor-BX0gT1qP.js";const O="/api",L=()=>localStorage.getItem("constructai_token")||localStorage.getItem("token")||"",z=({isOpen:a,onClose:r,onSuccess:x})=>{const[m,u]=e.useState({name:"",email:"",password:"",role:"user",company_id:""}),[h,p]=e.useState(!1),[g,b]=e.useState(""),[j,y]=e.useState([]);s.useEffect(()=>{a&&N()},[a]);const N=async()=>{try{const e=L(),s=await fetch(`${O}/admin/companies`,{headers:e?{Authorization:`Bearer ${e}`}:void 0}),t=await s.json();t.success&&y(t.data||[])}catch(e){}};return a?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md mx-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[t.jsx(l,{className:"w-6 h-6 mr-2 text-blue-600"}),"Add New User"]}),t.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(n,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),b(""),p(!0);try{const e=L(),s=await fetch(`${O}/admin/users`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify(m)}),t=await s.json();t.success?(x(),r(),u({name:"",email:"",password:"",role:"user",company_id:""})):b(t.error||"Failed to create user")}catch(s){b(s.message||"Failed to create user")}finally{p(!1)}},className:"p-6 space-y-4",children:[g&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:g}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),t.jsxs("div",{className:"relative",children:[t.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"text",required:!0,value:m.name,onChange:e=>u({...m,name:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),t.jsxs("div",{className:"relative",children:[t.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"email",required:!0,value:m.email,onChange:e=>u({...m,email:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),t.jsxs("div",{className:"relative",children:[t.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"password",required:!0,value:m.password,onChange:e=>u({...m,password:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••",minLength:6})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),t.jsxs("div",{className:"relative",children:[t.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsxs("select",{value:m.role,onChange:e=>u({...m,role:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[t.jsx("option",{value:"user",children:"User"}),t.jsx("option",{value:"company_admin",children:"Company Admin"}),t.jsx("option",{value:"super_admin",children:"Super Admin"}),t.jsx("option",{value:"developer",children:"Developer"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company *"}),t.jsxs("div",{className:"relative",children:[t.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsxs("select",{value:m.company_id,onChange:e=>u({...m,company_id:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",required:!0,children:[t.jsx("option",{value:"",children:"Select a company"}),j.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),t.jsxs("div",{className:"flex space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:h,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Creating...":"Create User"})]})]})]})}):null},R=({isOpen:s,onClose:a,onSuccess:r})=>{const[l,o]=e.useState({name:"",email:"",phone:"",address:"",website:"",industry:"construction"}),[c,h]=e.useState(!1),[p,g]=e.useState("");return s?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md mx-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[t.jsx(d,{className:"w-6 h-6 mr-2 text-green-600"}),"Add New Company"]}),t.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(n,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),g(""),h(!0);try{const e=localStorage.getItem("constructai_token")||localStorage.getItem("token")||"",s=await fetch("/api/admin/companies",{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify(l)}),t=await s.json();t.success?(r(),a(),o({name:"",email:"",phone:"",address:"",website:"",industry:"construction"})):g(t.error||"Failed to create company")}catch(s){g(s.message||"Failed to create company")}finally{h(!1)}},className:"p-6 space-y-4",children:[p&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),t.jsxs("div",{className:"relative",children:[t.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"text",required:!0,value:l.name,onChange:e=>o({...l,name:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Acme Construction Inc."})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),t.jsxs("div",{className:"relative",children:[t.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"email",required:!0,value:l.email,onChange:e=>o({...l,email:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"contact@acme.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),t.jsxs("div",{className:"relative",children:[t.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"tel",value:l.phone,onChange:e=>o({...l,phone:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"+1 (555) 123-4567"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),t.jsxs("div",{className:"relative",children:[t.jsx(m,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),t.jsx("textarea",{value:l.address,onChange:e=>o({...l,address:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"123 Main St, City, State 12345",rows:2})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),t.jsxs("div",{className:"relative",children:[t.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"url",value:l.website,onChange:e=>o({...l,website:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"https://www.acme.com"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Industry *"}),t.jsxs("select",{value:l.industry,onChange:e=>o({...l,industry:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[t.jsx("option",{value:"construction",children:"Construction"}),t.jsx("option",{value:"real_estate",children:"Real Estate"}),t.jsx("option",{value:"architecture",children:"Architecture"}),t.jsx("option",{value:"engineering",children:"Engineering"}),t.jsx("option",{value:"property_management",children:"Property Management"}),t.jsx("option",{value:"other",children:"Other"})]})]}),t.jsxs("div",{className:"flex space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creating...":"Create Company"})]})]})]})}):null},F="/api",q=()=>localStorage.getItem("constructai_token")||localStorage.getItem("token")||"",B=({isOpen:a,onClose:r,onSuccess:l})=>{const[i,o]=e.useState({name:"",description:"",company_id:"",budget:"",start_date:"",end_date:"",location:"",status:"planning"}),[c,x]=e.useState(!1),[u,b]=e.useState(""),[j,y]=e.useState([]);s.useEffect(()=>{a&&N()},[a]);const N=async()=>{try{const e=q(),s=await fetch(`${F}/admin/companies`,{headers:e?{Authorization:`Bearer ${e}`}:void 0}),t=await s.json();t.success&&y(t.data||[])}catch(e){}};return a?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 my-8",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[t.jsx(h,{className:"w-6 h-6 mr-2 text-purple-600"}),"Add New Project"]}),t.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(n,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),b(""),x(!0);try{const e=q(),s=await fetch(`${F}/projects`,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({...i,budget:parseFloat(i.budget)||0})}),t=await s.json();t.success?(l(),r(),o({name:"",description:"",company_id:"",budget:"",start_date:"",end_date:"",location:"",status:"planning"})):b(t.error||"Failed to create project")}catch(s){b(s.message||"Failed to create project")}finally{x(!1)}},className:"p-6 space-y-4",children:[u&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name *"}),t.jsxs("div",{className:"relative",children:[t.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"text",required:!0,value:i.name,onChange:e=>o({...i,name:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Downtown Office Complex"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company *"}),t.jsxs("div",{className:"relative",children:[t.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsxs("select",{value:i.company_id,onChange:e=>o({...i,company_id:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent appearance-none",required:!0,children:[t.jsx("option",{value:"",children:"Select a company"}),j.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{value:i.description,onChange:e=>o({...i,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Project description...",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget ($)"}),t.jsxs("div",{className:"relative",children:[t.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"number",step:"0.01",value:i.budget,onChange:e=>o({...i,budget:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"500000.00"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),t.jsxs("select",{value:i.status,onChange:e=>o({...i,status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[t.jsx("option",{value:"planning",children:"Planning"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"on_hold",children:"On Hold"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsxs("div",{className:"relative",children:[t.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"date",value:i.start_date,onChange:e=>o({...i,start_date:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsxs("div",{className:"relative",children:[t.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"date",value:i.end_date,onChange:e=>o({...i,end_date:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),t.jsxs("div",{className:"relative",children:[t.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"text",value:i.location,onChange:e=>o({...i,location:e.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"123 Main St, City, State"})]})]})]}),t.jsxs("div",{className:"flex space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creating...":"Create Project"})]})]})]})}):null},K="/api",J=()=>localStorage.getItem("constructai_token")||localStorage.getItem("token")||"",H=()=>{const[s,a]=e.useState([]),[r,l]=e.useState(!0),[n,o]=e.useState(""),[x,m]=e.useState(!1),[u,h]=e.useState("all");e.useEffect(()=>{p()},[]);const p=async()=>{try{l(!0);const e=J(),s=await fetch(`${K}/admin/users`,{headers:e?{Authorization:`Bearer ${e}`}:void 0}),t=await s.json();t.success&&a(t.data||[])}catch(e){}finally{l(!1)}},g=s.filter(e=>{const s=e.name.toLowerCase().includes(n.toLowerCase())||e.email.toLowerCase().includes(n.toLowerCase()),t="all"===u||e.role===u;return s&&t}),w=e=>{switch(e){case"super_admin":return"bg-red-100 text-red-800";case"company_admin":return"bg-blue-100 text-blue-800";case"developer":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(b,{className:"w-8 h-8 text-blue-600 animate-spin"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[t.jsx(j,{className:"w-7 h-7 mr-2 text-blue-600"}),"User Management"]}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all platform users"})]}),t.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(y,{className:"w-5 h-5"}),t.jsx("span",{children:"Add User"})]})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:n,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Roles"}),t.jsx("option",{value:"super_admin",children:"Super Admin"}),t.jsx("option",{value:"company_admin",children:"Company Admin"}),t.jsx("option",{value:"developer",children:"Developer"}),t.jsx("option",{value:"user",children:"User"})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Total Users"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.length})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Super Admins"}),t.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.filter(e=>"super_admin"===e.role).length})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Company Admins"}),t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.filter(e=>"company_admin"===e.role).length})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Regular Users"}),t.jsx("div",{className:"text-2xl font-bold text-gray-600",children:s.filter(e=>"user"===e.role).length})]})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===g.length?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No users found"})}):g.map(e=>t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-blue-600 font-semibold",children:e.name.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),t.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[t.jsx(i,{className:"w-3 h-3 mr-1"}),e.email]})]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${w(e.role)}`,children:[t.jsx(c,{className:"w-3 h-3 mr-1"}),e.role.replace("_"," ")]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[t.jsx(d,{className:"w-4 h-4 mr-1 text-gray-400"}),e.company_name||"N/A"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.last_login?new Date(e.last_login).toLocaleDateString():"Never"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[t.jsx("button",{onClick:()=>alert("Edit user coming soon!"),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit user",children:t.jsx(v,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this user?"))try{const s=J(),t=await fetch(`${K}/admin/users/${e}`,{method:"DELETE",headers:s?{Authorization:`Bearer ${s}`}:void 0}),a=await t.json();a.success?p():alert(a.error||"Failed to delete user")}catch(s){alert("Failed to delete user")}})(e.id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete user",children:t.jsx(f,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),t.jsx(z,{isOpen:x,onClose:()=>m(!1),onSuccess:p})]})},W="/api",Q=()=>localStorage.getItem("constructai_token")||localStorage.getItem("token")||"",Y=()=>{const[s,a]=e.useState([]),[r,l]=e.useState(!0),[n,o]=e.useState(""),[c,h]=e.useState(!1),[p,g]=e.useState("all");e.useEffect(()=>{j()},[]);const j=async()=>{try{l(!0);const e=Q(),s=await fetch(`${W}/admin/companies`,{headers:e?{Authorization:`Bearer ${e}`}:void 0}),t=await s.json();t.success&&a(t.data||[])}catch(e){}finally{l(!1)}},y=s.filter(e=>{const s=e.name?.toLowerCase()??"",t=e.email?.toLowerCase()??"",a=n.toLowerCase(),r=s.includes(a)||t.includes(a),l="all"===p||e.industry===p;return r&&l}),C=e=>{if(!e)return"bg-gray-100 text-gray-800";switch(e){case"construction":return"bg-orange-100 text-orange-800";case"real_estate":return"bg-blue-100 text-blue-800";case"architecture":return"bg-purple-100 text-purple-800";case"engineering":return"bg-green-100 text-green-800";case"property_management":return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}};return r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(b,{className:"w-8 h-8 text-green-600 animate-spin"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[t.jsx(d,{className:"w-7 h-7 mr-2 text-green-600"}),"Company Management"]}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all platform companies"})]}),t.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[t.jsx(w,{className:"w-5 h-5"}),t.jsx("span",{children:"Add Company"})]})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search companies by name or email...",value:n,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),t.jsxs("select",{value:p,onChange:e=>g(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Industries"}),t.jsx("option",{value:"construction",children:"Construction"}),t.jsx("option",{value:"real_estate",children:"Real Estate"}),t.jsx("option",{value:"architecture",children:"Architecture"}),t.jsx("option",{value:"engineering",children:"Engineering"}),t.jsx("option",{value:"property_management",children:"Property Management"}),t.jsx("option",{value:"other",children:"Other"})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Total Companies"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.length})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Construction"}),t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.filter(e=>"construction"===e.industry).length})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Real Estate"}),t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.filter(e=>"real_estate"===e.industry).length})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Architecture"}),t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.filter(e=>"architecture"===e.industry).length})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===y.length?t.jsxs("div",{className:"col-span-full bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[t.jsx(d,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"No companies found"})]}):y.map(e=>{return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:e.name}),t.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${C(e.industry)}`,children:(s=e.industry,s?s.replace("_"," "):"Unknown")})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>alert("Edit company coming soon!"),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit company",children:t.jsx(v,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this company? This will affect all associated users and projects."))try{const s=Q(),t=await fetch(`${W}/admin/companies/${e}`,{method:"DELETE",headers:s?{Authorization:`Bearer ${s}`}:void 0}),a=await t.json();a.success?j():alert(a.error||"Failed to delete company")}catch(s){alert("Failed to delete company")}})(e.id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Delete company",children:t.jsx(f,{className:"w-4 h-4"})})]})]})}),t.jsxs("div",{className:"p-6 space-y-3",children:[e.email&&t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(i,{className:"w-4 h-4 mr-2 text-gray-400"}),t.jsx("span",{className:"truncate",children:e.email})]}),e.phone&&t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(x,{className:"w-4 h-4 mr-2 text-gray-400"}),t.jsx("span",{children:e.phone})]}),e.address&&t.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[t.jsx(m,{className:"w-4 h-4 mr-2 text-gray-400 mt-0.5"}),t.jsx("span",{className:"flex-1",children:e.address})]}),e.website&&t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(u,{className:"w-4 h-4 mr-2 text-gray-400"}),t.jsx("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline truncate",children:e.website})]})]}),t.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.user_count||0}),t.jsx("div",{className:"text-xs text-gray-600",children:"Users"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.project_count||0}),t.jsx("div",{className:"text-xs text-gray-600",children:"Projects"})]})]})})]},e.id);var s})}),t.jsx(R,{isOpen:c,onClose:()=>h(!1),onSuccess:j})]})},Z=r.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});Z.interceptors.request.use(e=>{const s=localStorage.getItem("constructai_token")||localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e});const G=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),V=e=>new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(e),X=e=>{const s=new Date(e);return Number.isNaN(s.getTime())?e:s.toLocaleString()},ee=({title:e,value:s,subtitle:a,icon:r,color:l,onClick:n})=>{const i={blue:{bg:"bg-blue-50",icon:"text-blue-600"},green:{bg:"bg-green-50",icon:"text-green-600"},purple:{bg:"bg-purple-50",icon:"text-purple-600"},orange:{bg:"bg-orange-50",icon:"text-orange-600"},red:{bg:"bg-red-50",icon:"text-red-600"},teal:{bg:"bg-teal-50",icon:"text-teal-600"}}[l];return t.jsxs("div",{onClick:n,className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 "+(n?"cursor-pointer hover:shadow-md transition-shadow":""),children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:`p-3 rounded-lg ${i.bg}`,children:t.jsx(r,{className:`w-6 h-6 ${i.icon}`})})}),t.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:s}),t.jsx("p",{className:"text-sm font-medium text-gray-600",children:e}),a&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a})]})},se=({icon:e,label:s,onClick:a,color:r})=>t.jsxs("button",{type:"button",onClick:a,className:`flex flex-col items-center justify-center p-4 rounded-lg border-2 border-dashed ${r} hover:bg-opacity-10 transition-all`,children:[t.jsx(e,{className:"w-6 h-6 mb-2"}),t.jsx("span",{className:"text-sm font-medium",children:s})]}),te=()=>{const[s,r]=e.useState(null),[l,n]=e.useState(!0),[i,x]=e.useState(!1),[m,u]=e.useState("overview"),[g,N]=e.useState(!1),[v,f]=e.useState(!1),[w,O]=e.useState(!1),L=async()=>{x(!0);try{const e=await Z.get("/admin/dashboard");e.data?.success?r(e.data.data):a.error("Unable to load super admin dashboard data")}catch(e){a.error("Failed to load dashboard summary")}finally{n(!1),x(!1)}};e.useEffect(()=>{L()},[]);const F=e.useMemo(()=>s?.projectStats.byStatus??[],[s]),q=e.useMemo(()=>s?.sdkStats.topProviders??[],[s]),K=e.useMemo(()=>s?.tenantUsage??[],[s]),J=e.useMemo(()=>s?.pendingApprovals??[],[s]),W=e.useMemo(()=>s?.recentActivity??[],[s]),Q=e.useMemo(()=>s?.recentApps??[],[s]);return l?t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:t.jsxs("div",{className:"text-center",children:[t.jsx(b,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Preparing super admin console…"})]})}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:t.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-blue-600 uppercase tracking-wide",children:[t.jsx(c,{className:"h-4 w-4"}),"Platform Oversight"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Super Admin Dashboard"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Unified control over tenants, usage, and system health."})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("button",{type:"button",onClick:L,disabled:i,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 text-white font-semibold shadow-sm hover:bg-blue-700 transition-colors disabled:opacity-60",children:[t.jsx(b,{className:"h-4 w-4 "+(i?"animate-spin":"")}),"Refresh"]}),t.jsxs("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 rounded-lg border border-gray-200 text-gray-700 font-semibold hover:bg-gray-100 transition-colors",children:[t.jsx(C,{className:"h-4 w-4"}),"Export Report"]})]})]})})}),t.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8 space-y-8",children:[t.jsxs("div",{className:"grid gap-6 lg:grid-cols-4",children:[t.jsx(ee,{title:"Total Users",value:V(s?.userStats.total??0),subtitle:`${V(s?.userStats.newThisWeek??0)} joined this week`,icon:j,color:"blue",onClick:()=>u("users")}),t.jsx(ee,{title:"Active Tenants",value:V(s?.companyStats.active??0),subtitle:`${V(s?.companyStats.newThisMonth??0)} new this month`,icon:d,color:"green",onClick:()=>u("companies")}),t.jsx(ee,{title:"Live Projects",value:V(s?.projectStats.active??0),subtitle:`${V(s?.projectStats.total??0)} total projects`,icon:S,color:"purple",onClick:()=>u("overview")}),t.jsx(ee,{title:"SDK Requests",value:V(s?.sdkStats.requestsThisMonth??0),subtitle:G(s?.sdkStats.costThisMonth??0)+" spend this month",icon:k,color:"orange",onClick:()=>u("sdk")})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Manage global resources across tenants."})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsx(se,{icon:y,label:"Invite User",onClick:()=>N(!0),color:"border-blue-300 text-blue-600"}),t.jsx(se,{icon:d,label:"Add Company",onClick:()=>f(!0),color:"border-green-300 text-green-600"}),t.jsx(se,{icon:h,label:"Create Project",onClick:()=>O(!0),color:"border-purple-300 text-purple-600"}),t.jsx(se,{icon:A,label:"Platform Admin",onClick:()=>u("system"),color:"border-gray-300 text-gray-600"})]})]}),t.jsx("div",{className:"flex flex-wrap gap-2 text-sm font-semibold",children:[{id:"overview",label:"Overview",icon:_},{id:"users",label:"Users",icon:j},{id:"companies",label:"Companies",icon:d},{id:"sdk",label:"SDK Platform",icon:k},{id:"system",label:"System Health",icon:c}].map(e=>{const s=e.icon;return t.jsxs("button",{onClick:()=>u(e.id),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors "+(m===e.id?"bg-blue-600 text-white border-blue-600":"border-gray-200 text-gray-600 hover:bg-gray-100"),children:[t.jsx(s,{className:"h-4 w-4"}),e.label]},e.id)})}),"overview"===m&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tenant Breakdown"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Top tenants by usage this month."})]}),t.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700",onClick:()=>u("companies"),children:["Manage Tenants ",t.jsx($,{className:"h-4 w-4"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left text-xs uppercase text-gray-500 border-b",children:[t.jsx("th",{className:"py-2",children:"Company"}),t.jsx("th",{className:"py-2",children:"Projects"}),t.jsx("th",{className:"py-2",children:"Users"}),t.jsx("th",{className:"py-2",children:"Tokens"}),t.jsx("th",{className:"py-2 text-right",children:"API Spend"})]})}),t.jsx("tbody",{children:0===K.length?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"py-6 text-center text-gray-500",children:"No tenant usage recorded yet."})}):K.map(e=>t.jsxs("tr",{className:"border-b last:border-none",children:[t.jsx("td",{className:"py-3 font-medium text-gray-900",children:e.companyName}),t.jsx("td",{className:"py-3 text-gray-600",children:V(e.projects)}),t.jsx("td",{className:"py-3 text-gray-600",children:V(e.users)}),t.jsx("td",{className:"py-3 text-gray-600",children:V(e.tokens)}),t.jsx("td",{className:"py-3 text-right text-gray-900 font-semibold",children:G(e.apiCost)})]},e.companyId))})]})})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Status"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Current pipeline across all tenants."})]}),t.jsx(S,{className:"h-5 w-5 text-purple-500"})]}),t.jsx("div",{className:"space-y-3",children:0===F.length?t.jsx("p",{className:"text-sm text-gray-500",children:"No projects found."}):F.map(e=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-sm font-medium text-gray-700 capitalize",children:e.status||"unspecified"}),t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:V(e.count)})]},e.status))})]})]}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pending SDK Approvals"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Modules awaiting review before tenant release."})]}),t.jsx(h,{className:"h-5 w-5 text-amber-500"})]}),t.jsx("div",{className:"space-y-3",children:0===J.length?t.jsx("p",{className:"text-sm text-gray-500",children:"No modules awaiting approval."}):J.map(e=>t.jsxs("div",{className:"flex items-start justify-between border border-gray-100 rounded-lg p-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.name}),t.jsxs("div",{className:"text-xs text-gray-500",children:[e.companyName||"Unassigned"," • ",e.developerName||"Unknown developer"]}),t.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Updated ",X(e.updatedAt)]})]}),t.jsx("span",{className:"text-xs font-semibold text-amber-600 bg-amber-100 px-2 py-0.5 rounded-full capitalize",children:e.status.replace("_"," ")})]},e.id))})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Platform Activity"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Key changes performed by administrators."})]}),t.jsx(U,{className:"h-5 w-5 text-green-500"})]}),t.jsx("div",{className:"space-y-3",children:0===W.length?t.jsx("p",{className:"text-sm text-gray-500",children:"No activity recorded."}):W.map(e=>t.jsxs("div",{className:"border border-gray-100 rounded-lg p-3",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.action}),t.jsx("div",{className:"text-xs text-gray-500",children:e.description||"No description"}),t.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[e.userName?`${e.userName} • `:"",X(e.createdAt)]})]},e.id))})]})]})]}),"users"===m&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:t.jsx(H,{})}),"companies"===m&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:t.jsx(Y,{})}),"sdk"===m&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[t.jsx(ee,{title:"SDK Developers",value:V(s?.sdkStats.developers??0),subtitle:`${V(s?.userStats.developers??0)} active developer accounts`,icon:j,color:"purple"}),t.jsx(ee,{title:"Requests This Month",value:V(s?.sdkStats.requestsThisMonth??0),subtitle:`${V(s?.sdkStats.tokensThisMonth??0)} tokens processed`,icon:P,color:"orange"}),t.jsx(ee,{title:"API Spend",value:G(s?.sdkStats.costThisMonth??0),subtitle:"Tracked across all tenants",icon:p,color:"teal"}),t.jsx(ee,{title:"Pending Reviews",value:V(J.length),subtitle:"Modules awaiting approval",icon:T,color:"red"})]}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Providers"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Usage split by AI provider this month."})]}),t.jsx(k,{className:"h-5 w-5 text-indigo-500"})]}),t.jsx("div",{className:"space-y-3",children:0===q.length?t.jsx("p",{className:"text-sm text-gray-500",children:"No provider usage recorded."}):q.map(e=>t.jsxs("div",{className:"border border-gray-100 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900 capitalize",children:e.provider}),t.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[V(e.requests)," calls"]})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-1",children:[t.jsxs("span",{children:[V(e.tokens)," tokens"]}),t.jsx("span",{children:G(e.cost)})]})]},e.provider))})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Latest Releases"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Recently updated modules across tenants."})]}),t.jsx(h,{className:"h-5 w-5 text-blue-500"})]}),t.jsx("div",{className:"space-y-3",children:0===Q.length?t.jsx("p",{className:"text-sm text-gray-500",children:"No recent module activity."}):Q.slice(0,6).map(e=>t.jsxs("div",{className:"border border-gray-100 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.name}),t.jsx("span",{className:"text-xs font-semibold text-green-600 bg-green-100 px-2 py-0.5 rounded-full capitalize",children:e.status.replace("_"," ")})]}),t.jsxs("div",{className:"text-xs text-gray-500",children:[e.companyName||"Unassigned"," • ",e.developerName||"Unknown"]}),t.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Updated ",X(e.updatedAt)]})]},e.id))})]})]})]}),"system"===m&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[t.jsx(ee,{title:"Platform Uptime",value:`${s?.systemStats.uptime??0}%`,icon:c,color:"green",subtitle:"Trailing 30 days"}),t.jsx(ee,{title:"CPU Utilisation",value:`${s?.systemStats.cpu??0}%`,icon:D,color:"orange",subtitle:"Platform services"}),t.jsx(ee,{title:"Memory Usage",value:`${s?.systemStats.memory??0}%`,icon:M,color:"purple",subtitle:"Aggregate usage"}),t.jsx(ee,{title:"Storage Utilisation",value:`${s?.systemStats.storage??0}%`,icon:E,color:"blue",subtitle:"Object store"})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Audit trail of administrative operations."})]}),t.jsx(o,{className:"h-5 w-5 text-gray-500"})]}),t.jsx("div",{className:"space-y-3",children:0===W.length?t.jsx("p",{className:"text-sm text-gray-500",children:"No logged activity yet."}):W.map(e=>t.jsxs("div",{className:"flex items-start gap-3 border border-gray-100 rounded-lg p-3",children:[t.jsx("div",{className:"mt-1",children:t.jsx(I,{className:"h-4 w-4 text-green-500"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.action}),t.jsx("div",{className:"text-xs text-gray-500",children:e.description||"No description provided."}),t.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[e.userName?`${e.userName} • `:"",X(e.createdAt)]})]})]},e.id))})]})]})]}),t.jsx(z,{isOpen:g,onClose:()=>N(!1),onSuccess:L}),t.jsx(R,{isOpen:v,onClose:()=>f(!1),onSuccess:L}),t.jsx(B,{isOpen:w,onClose:()=>O(!1),onSuccess:L})]})},ae=()=>t.jsx(te,{});export{ae as default};

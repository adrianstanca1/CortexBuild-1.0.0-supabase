import{r as e,j as s}from"./react-core-FGHlRSau.js";import{bk as a,i as t,t as i,ba as r,g as n,ac as l,ad as c,aM as o,l as d,az as m,a as x,u as g,_ as u,b as h,e as p}from"./icon-pack-tZfEXMDa.js";import"./vendor-BX0gT1qP.js";const y=({tasks:y,teamMembers:f,onAssignmentConfirm:b,onAssignmentReject:j,className:N=""})=>{const[v,k]=e.useState([]),[w,S]=e.useState(!0),[I,A]=e.useState(null),[_,T]=e.useState("all"),[M,P]=e.useState("confidence"),q=[{id:"1",taskId:"t1",assigneeId:"u1",confidence:94,reasoning:"John has 8 years of experience in structural engineering and is currently 60% utilized. His expertise in concrete analysis matches perfectly with this foundation inspection task.",alternatives:[{assigneeId:"u2",confidence:87,reasoning:"Sarah is highly skilled but currently at 85% capacity. She could handle this task but might be stretched thin."},{assigneeId:"u3",confidence:78,reasoning:"Mike has the required skills but less experience with this specific type of inspection."}],predictedOutcome:{completionTime:6,qualityScore:95,satisfactionScore:88},aiInsights:{skillMatch:98,workloadBalance:85,learningOpportunity:!1,riskMitigation:["High confidence due to experience match","Optimal workload distribution"]}},{id:"2",taskId:"t2",assigneeId:"u2",confidence:89,reasoning:"Sarah excels at safety protocols and has completed similar safety training tasks with high success rates. Her collaborative style is perfect for team coordination.",alternatives:[{assigneeId:"u4",confidence:82,reasoning:"David has safety experience but is currently unavailable due to other commitments."}],predictedOutcome:{completionTime:4,qualityScore:92,satisfactionScore:91},aiInsights:{skillMatch:95,workloadBalance:75,learningOpportunity:!0,riskMitigation:["Strong track record in safety tasks","Good team collaboration skills"]}},{id:"3",taskId:"t3",assigneeId:"u3",confidence:76,reasoning:"Mike has the technical skills for material procurement but limited experience with AI systems. This assignment provides a learning opportunity while leveraging his procurement expertise.",alternatives:[{assigneeId:"u1",confidence:68,reasoning:"John could handle this but it would stretch his current workload and doesn't align with his core strengths."}],predictedOutcome:{completionTime:8,qualityScore:85,satisfactionScore:82},aiInsights:{skillMatch:80,workloadBalance:90,learningOpportunity:!0,riskMitigation:["Pair with experienced team member","Provide additional training resources"]}}];e.useEffect(()=>{(async()=>{S(!0),await new Promise(e=>setTimeout(e,1200)),k(q),S(!1)})()},[y,f]);const O=e=>{switch(e){case"urgent":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},W=e=>{switch(e){case"expert":return"text-purple-600 bg-purple-50";case"complex":return"text-red-600 bg-red-50";case"moderate":return"text-yellow-600 bg-yellow-50";case"simple":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},C=e=>e>=90?"text-green-600":e>=80?"text-yellow-600":"text-red-600",H=e=>{switch(e){case"available":return"text-green-600 bg-green-50";case"busy":return"text-yellow-600 bg-yellow-50";case"unavailable":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},R=e=>y.find(s=>s.id===e),z=e=>f.find(s=>s.id===e),D=[...v.filter(e=>{const s=R(e.taskId),a=z(e.assigneeId);return!(!s||!a)&&("all"===_||(a.skills.includes(_)||s.requiredSkills.includes(_)))})].sort((e,s)=>{switch(M){case"confidence":return s.confidence-e.confidence;case"workload":const a=z(e.assigneeId),t=z(s.assigneeId);return(a?.currentWorkload||0)-(t?.currentWorkload||0);case"performance":const i=z(e.assigneeId),r=z(s.assigneeId);return(r?.performanceScore||0)-(i?.performanceScore||0);default:return 0}}),$=Array.from(new Set([...f.flatMap(e=>e.skills),...y.flatMap(e=>e.requiredSkills)]));return w?s.jsx("div",{className:`smart-task-assignment ${N}`,children:s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"AI is analyzing tasks and team members..."}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Generating optimal assignments"})]})})})}):s.jsx("div",{className:`smart-task-assignment ${N}`,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"border-b border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(a,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Smart Task Assignment"}),s.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:[v.length," assignments"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100",children:s.jsx(t,{className:"w-5 h-5"})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100",children:s.jsx(i,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-gray-600",children:"Skill:"}),s.jsxs("select",{value:_,onChange:e=>T(e.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"All Skills"}),$.map(e=>s.jsx("option",{value:e,children:e},e))]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-gray-600",children:"Sort by:"}),s.jsxs("select",{value:M,onChange:e=>P(e.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:[s.jsx("option",{value:"confidence",children:"Confidence"}),s.jsx("option",{value:"workload",children:"Workload"}),s.jsx("option",{value:"performance",children:"Performance"})]})]})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"space-y-6",children:D.map(e=>{const t=R(e.taskId),i=z(e.assigneeId);return t&&i?s.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(r,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.title}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${O(t.priority)}`,children:t.priority}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W(t.complexity)}`,children:t.complexity})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[s.jsx(n,{className:"w-4 h-4 text-gray-600 mx-auto mb-1"}),s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t.estimatedHours,"h"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Estimated"})]}),s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[s.jsx(l,{className:"w-4 h-4 text-gray-600 mx-auto mb-1"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(t.deadline).toLocaleDateString()}),s.jsx("p",{className:"text-xs text-gray-500",children:"Deadline"})]}),s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[s.jsx(c,{className:"w-4 h-4 text-gray-600 mx-auto mb-1"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.location||"Remote"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Location"})]}),s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[s.jsx(o,{className:"w-4 h-4 text-gray-600 mx-auto mb-1"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.aiAnalysis.difficultyScore}),s.jsx("p",{className:"text-xs text-gray-500",children:"Difficulty"})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.requiredSkills.map(e=>s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:e},e))})]}),s.jsx("div",{className:"flex-shrink-0 flex items-center",children:s.jsx(d,{className:"w-6 h-6 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(m,{className:"w-5 h-5 text-green-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i.name}),s.jsx("span",{className:"text-sm text-gray-600",children:i.role}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H(i.availability)}`,children:i.availability})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[s.jsx(x,{className:"w-4 h-4 text-gray-600 mx-auto mb-1"}),s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[i.performanceScore,"%"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Performance"})]}),s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[s.jsx(g,{className:"w-4 h-4 text-gray-600 mx-auto mb-1"}),s.jsxs("p",{className:"text-sm font-medium "+(y=i.currentWorkload,y>=90?"text-red-600":y>=70?"text-yellow-600":"text-green-600"),children:[i.currentWorkload,"%"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Workload"})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[i.skills.slice(0,5).map(e=>s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded",children:e},e)),i.skills.length>5&&s.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",i.skills.length-5," more"]})]})]}),s.jsxs("div",{className:"flex-shrink-0 w-80",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(a,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-blue-900",children:"AI Analysis"}),s.jsxs("span",{className:`text-sm font-medium ${C(e.confidence)}`,children:[e.confidence,"% confidence"]})]}),s.jsx("p",{className:"text-sm text-blue-800 mb-3",children:e.reasoning}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-blue-700",children:"Skill Match"}),s.jsxs("span",{className:"text-blue-900",children:[e.aiInsights.skillMatch,"%"]})]}),s.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${e.aiInsights.skillMatch}%`}})})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-blue-700",children:"Workload Balance"}),s.jsxs("span",{className:"text-blue-900",children:[e.aiInsights.workloadBalance,"%"]})]}),s.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${e.aiInsights.workloadBalance}%`}})})]}),e.aiInsights.learningOpportunity&&s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(u,{className:"w-4 h-4 text-yellow-600"}),s.jsx("span",{className:"text-xs text-yellow-800",children:"Learning Opportunity"})]}),s.jsx("div",{className:"space-y-1 mb-4",children:e.aiInsights.riskMitigation.map((e,a)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(h,{className:"w-3 h-3 text-green-600"}),s.jsx("span",{className:"text-xs text-green-800",children:e})]},a))}),s.jsxs("div",{className:"border-t border-blue-200 pt-3",children:[s.jsx("h4",{className:"text-xs font-medium text-blue-900 mb-2",children:"Predicted Outcome"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"font-medium text-blue-900",children:[e.predictedOutcome.completionTime,"h"]}),s.jsx("p",{className:"text-blue-600",children:"Time"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"font-medium text-blue-900",children:[e.predictedOutcome.qualityScore,"%"]}),s.jsx("p",{className:"text-blue-600",children:"Quality"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"font-medium text-blue-900",children:[e.predictedOutcome.satisfactionScore,"%"]}),s.jsx("p",{className:"text-blue-600",children:"Satisfaction"})]})]})]})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsxs("button",{onClick:()=>b(e),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[s.jsx(h,{className:"w-4 h-4"}),"Accept"]}),s.jsxs("button",{onClick:()=>j(e.id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[s.jsx(p,{className:"w-4 h-4"}),"Reject"]})]})]})]}),e.alternatives.length>0&&s.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Alternative Assignments"}),s.jsx("div",{className:"space-y-2",children:e.alternatives.map((e,a)=>{const t=z(e.assigneeId);return t?s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(m,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.name}),s.jsx("span",{className:"text-xs text-gray-500",children:t.role}),s.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${C(e.confidence)}`,children:[e.confidence,"% confidence"]})]}),s.jsx("p",{className:"text-xs text-gray-600 max-w-md",children:e.reasoning})]},a):null})})]})]},e.id):null;var y})}),0===D.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(r,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No assignments found"}),s.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or add more tasks and team members."})]})]})]})})},f=({currentUser:a,projectId:t})=>{const[i,r]=e.useState([]);return s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Smart Task Assignment"}),s.jsx("p",{className:"text-gray-600",children:"AI-powered task assignment based on skills, workload, and performance analysis"})]}),s.jsx(y,{tasks:[{id:"t1",title:"Foundation Inspection",description:"Comprehensive inspection of foundation work including concrete quality, reinforcement placement, and structural integrity.",priority:"high",complexity:"moderate",estimatedHours:6,requiredSkills:["structural_engineering","concrete_analysis","safety_protocols"],deadline:"2024-01-25",location:"Site A",dependencies:[],category:"Quality Control",aiAnalysis:{difficultyScore:75,timeEstimate:6,skillRequirements:["structural_engineering","concrete_analysis"],riskFactors:["Weather conditions","Access limitations"],optimalTeamSize:2}},{id:"t2",title:"Safety Training Session",description:"Conduct safety training for new team members covering site safety protocols, emergency procedures, and equipment usage.",priority:"medium",complexity:"simple",estimatedHours:4,requiredSkills:["safety_training","communication","team_management"],deadline:"2024-01-22",location:"Main Office",dependencies:[],category:"Training",aiAnalysis:{difficultyScore:45,timeEstimate:4,skillRequirements:["safety_training","communication"],riskFactors:["Scheduling conflicts"],optimalTeamSize:1}},{id:"t3",title:"Material Procurement Optimization",description:"Implement AI-driven material ordering system to optimize inventory levels and reduce waste.",priority:"medium",complexity:"complex",estimatedHours:8,requiredSkills:["procurement","data_analysis","ai_systems"],deadline:"2024-01-30",location:"Remote",dependencies:[],category:"Process Improvement",aiAnalysis:{difficultyScore:85,timeEstimate:8,skillRequirements:["procurement","data_analysis","ai_systems"],riskFactors:["System integration complexity","Data quality issues"],optimalTeamSize:2}}],teamMembers:[{id:"u1",name:"John Smith",role:"Senior Structural Engineer",skills:["structural_engineering","concrete_analysis","project_management","safety_protocols"],experience:8,currentWorkload:60,availability:"available",performanceScore:95,location:"Site A",preferences:{taskTypes:["structural_analysis","quality_control"],workingHours:"8:00-17:00",maxWorkload:80},aiProfile:{strengths:["Technical expertise","Problem solving","Leadership"],learningAreas:["AI systems","Digital tools"],collaborationStyle:"collaborative",workPace:"thorough"}},{id:"u2",name:"Sarah Johnson",role:"Safety Coordinator",skills:["safety_training","communication","team_management","compliance"],experience:5,currentWorkload:85,availability:"busy",performanceScore:92,location:"Main Office",preferences:{taskTypes:["safety_training","compliance"],workingHours:"9:00-18:00",maxWorkload:90},aiProfile:{strengths:["Communication","Training delivery","Compliance knowledge"],learningAreas:["Technical skills","Data analysis"],collaborationStyle:"collaborative",workPace:"moderate"}},{id:"u3",name:"Mike Wilson",role:"Procurement Specialist",skills:["procurement","supply_chain","negotiation","data_analysis"],experience:6,currentWorkload:45,availability:"available",performanceScore:88,location:"Remote",preferences:{taskTypes:["procurement","supply_chain"],workingHours:"8:30-17:30",maxWorkload:75},aiProfile:{strengths:["Negotiation","Cost optimization","Supplier relations"],learningAreas:["AI systems","Advanced analytics"],collaborationStyle:"independent",workPace:"fast"}},{id:"u4",name:"David Chen",role:"Project Manager",skills:["project_management","team_leadership","budget_management","communication"],experience:10,currentWorkload:90,availability:"unavailable",performanceScore:96,location:"Main Office",preferences:{taskTypes:["project_management","strategic_planning"],workingHours:"7:00-19:00",maxWorkload:95},aiProfile:{strengths:["Leadership","Strategic thinking","Risk management"],learningAreas:["Technical skills","AI applications"],collaborationStyle:"collaborative",workPace:"moderate"}}],onAssignmentConfirm:e=>{r(s=>[...s,e])},onAssignmentReject:e=>{},className:"mb-6"}),i.length>0&&s.jsxs("div",{className:"mt-6 p-6 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Confirmed Assignments"}),s.jsx("div",{className:"space-y-3",children:i.map((e,a)=>s.jsx("div",{className:"p-3 bg-white rounded border",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:e.taskId}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Assigned to: ",e.assigneeId]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-medium text-green-900",children:[e.confidence,"% confidence"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Predicted completion: ",e.predictedOutcome.completionTime,"h"]})]})]})},a))})]})]})};export{f as SmartTaskAssignmentScreen};

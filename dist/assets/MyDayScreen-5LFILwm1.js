import{r as e,j as s}from"./react-core-FGHlRSau.js";import{F as t,W as a,A as r,t as l,S as o,q as i,u as d,G as c,g as n}from"./module-screens-Dy02k3Q1.js";import{T as x}from"./TaskList-BoJHYhCG.js";import"./vendor-BX0gT1qP.js";import"./google-ai-BrP-uSwO.js";import"./developer-tools-B-VjJpHg.js";import"./supabase-DKHGIEFa.js";import"./axios-ei4kQ0Q2.js";import"./icon-pack-tZfEXMDa.js";import"./monaco-Bh77eHRb.js";const m=({project:m,navigateTo:g,goBack:h,currentUser:b})=>{const[p,j]=e.useState([]),[u,y]=e.useState([]),[N,f]=e.useState(!0),[w,v]=e.useState([]),[S,k]=e.useState(!0),[C,D]=e.useState(!1),T={temp:"18Â°C",condition:"Partly Cloudy"};e.useEffect(()=>{(async()=>{f(!0),k(!0);const[e,s]=await Promise.all([i(b),d()]),t=e.filter(e=>e.projectId===m.id&&(e.assignee===b.name||e.targetRoles?.includes(b.role)));j(t),y(s),f(!1);const a=await c(t,m,T);v(a),k(!1)})()},[b,m.id]);const I=({insight:e})=>{const t={alert:{icon:l,color:"yellow"},risk:{icon:l,color:"red"},tip:{icon:n,color:"blue"}}[e.type],a=t.icon,r={yellow:{container:"bg-yellow-50 border-yellow-200",icon:"text-yellow-600"},red:{container:"bg-red-50 border-red-200",icon:"text-red-600"},blue:{container:"bg-blue-50 border-blue-200",icon:"text-blue-600"}}[t.color];return s.jsxs("div",{className:`p-3 border-l-4 rounded-r-md ${r.container}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(a,{className:`w-5 h-5 flex-shrink-0 ${r.icon}`}),s.jsx("h4",{className:"font-bold text-sm text-gray-800",children:e.title})]}),s.jsx("p",{className:"text-sm text-gray-700 mt-1 pl-7",children:e.message})]})};return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("header",{className:"bg-white p-4 flex items-center border-b mb-8",children:[s.jsx("button",{onClick:h,className:"mr-4 p-2 rounded-full hover:bg-gray-100",children:s.jsx(t,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Day"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[m.name," - ",(new Date).toLocaleDateString()]})]})]}),s.jsxs("main",{className:"flex-grow grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-100 p-6 transition-all duration-300 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(a,{className:"w-6 h-6 text-purple-500"}),s.jsx("h2",{className:"font-bold text-lg text-gray-800",children:"AI Suggested Actions"})]}),s.jsx("button",{onClick:async()=>{D(!0);const e=await c(p,m,T);v(e),D(!1)},disabled:S||C,className:"p-2 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-wait",children:s.jsx(r,{className:"w-5 h-5 text-gray-500 "+(S||C?"animate-spin":"")})})]}),S?s.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:"Generating personalized suggestions..."}):s.jsx("div",{className:"space-y-3",children:w.length>0?w.map((e,t)=>s.jsx(I,{insight:e},t)):s.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:"No specific suggestions for today. Stay focused!"})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-100",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("h2",{className:"font-bold text-lg text-gray-800",children:["My Tasks (",p.length,")"]})}),N?s.jsx("p",{className:"p-4 text-sm text-center text-gray-500",children:"Loading tasks..."}):s.jsx(x,{tasks:p,navigateTo:g})]}),u.length>0&&s.jsxs("div",{className:"bg-orange-50 rounded-lg shadow-md border border-orange-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(l,{className:"w-6 h-6 text-orange-600"}),s.jsx("h2",{className:"font-bold text-lg text-orange-800",children:"Important Site Instructions"})]}),s.jsx("ul",{className:"space-y-3",children:u.map(e=>s.jsxs("li",{className:"p-4 bg-white border-l-4 border-orange-500 rounded-r-md shadow-sm",children:[s.jsx("p",{className:"text-gray-800 font-medium",children:e.text}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2 text-right",children:["- ",e.author]})]},e.id))})]})]}),s.jsx("div",{className:"lg:col-span-1 space-y-8",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-100",children:[s.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-3",children:"Daily Summary"}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg border border-blue-100 mb-4",children:[s.jsx(o,{className:"w-8 h-8 text-yellow-500"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-lg text-gray-800",children:[T.temp,", ",T.condition]}),s.jsx("p",{className:"text-xs text-gray-600",children:"Wind: 5 km/h E"})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"You haven't submitted your log for today."}),s.jsx("button",{onClick:()=>g("daily-log"),className:"w-full px-4 py-2 bg-blue-600 text-white font-bold rounded-md hover:bg-blue-700 text-sm",children:"Start Daily Log"})]})})]})]})};export{m as default};

import{r as e,j as s}from"./react-core-FGHlRSau.js";import{F as t,M as a,U as r,f as l,K as o,ag as i}from"./module-screens-Dy02k3Q1.js";import"./vendor-BX0gT1qP.js";import"./google-ai-BrP-uSwO.js";import"./developer-tools-B-VjJpHg.js";import"./supabase-DKHGIEFa.js";import"./axios-ei4kQ0Q2.js";import"./icon-pack-tZfEXMDa.js";import"./monaco-Bh77eHRb.js";const n=({project:n,goBack:d,currentUser:c})=>{const[m,x]=e.useState(""),[u,p]=e.useState(""),[g,h]=e.useState(""),[b,j]=e.useState(""),[f,v]=e.useState([]),y=e.useRef(null),[N,w]=e.useState(!1),k=async e=>{if(e.preventDefault(),!m||!g||!b)return void alert("Please fill in all required fields.");const s={projectId:n.id,title:m,description:u,location:g,status:"Open",assignee:b,photos:f};await i(s,c),alert("Punch list item created successfully!"),d()},C=e=>{e&&Array.from(e).forEach(e=>{const s=new FileReader;s.onload=e=>{e.target?.result&&v(s=>[...s,e.target.result])},s.readAsDataURL(e)})};return s.jsxs("div",{className:"flex flex-col h-full max-w-2xl mx-auto",children:[s.jsxs("header",{className:"bg-white p-4 flex items-center border-b mb-8",children:[s.jsx("button",{onClick:d,className:"mr-4 p-2 rounded-full hover:bg-gray-100",children:s.jsx(t,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"New Punch List Item"}),s.jsx("p",{className:"text-sm text-gray-500",children:n.name})]})]}),s.jsxs("form",{onSubmit:k,className:"flex-grow space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"title",className:"block text-sm font-bold text-gray-700 mb-1",children:["Title ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"title",value:m,onChange:e=>x(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-bold text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{id:"description",rows:4,value:u,onChange:e=>p(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"location",className:"block text-sm font-bold text-gray-700 mb-1",children:["Location ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",id:"location",value:g,onChange:e=>h(e.target.value),className:"w-full p-2 pl-10 border border-gray-300 rounded-md shadow-sm",required:!0}),s.jsx(a,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"assignee",className:"block text-sm font-bold text-gray-700 mb-1",children:["Assignee ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{id:"assignee",value:b,onChange:e=>j(e.target.value),className:"w-full p-2 pl-10 border border-gray-300 rounded-md shadow-sm appearance-none",required:!0,children:[s.jsx("option",{value:"",disabled:!0,children:"Select an assignee"}),["Painting Sub","Flooring Sub","Plumbing Sub","Doors & Hardware","General Contractor"].map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsx(r,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Photos"}),s.jsx("div",{onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),w(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),w(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),w(!1);const s=e.dataTransfer.files;s&&s.length>0&&C(s)},onClick:()=>{y.current?.click()},className:`mt-2 flex justify-center rounded-lg border border-dashed px-6 py-10 transition-colors ${N?"border-blue-600 bg-blue-50":"border-gray-900/25 hover:border-blue-500"} cursor-pointer`,children:s.jsxs("div",{className:"text-center",children:[s.jsx(l,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),s.jsx("div",{className:"mt-4 flex text-sm leading-6 text-gray-600",children:s.jsxs("p",{className:"pl-1",children:[s.jsx("span",{className:"font-semibold text-blue-600",children:"Click to upload"})," or drag and drop"]})}),s.jsx("p",{className:"text-xs leading-5 text-gray-600",children:"PNG, JPG, GIF up to 10MB"})]})}),f.length>0&&s.jsx("div",{className:"mt-4 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4",children:f.map((e,t)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:e,alt:`upload-preview-${t}`,className:"w-full h-28 object-cover rounded-md"}),s.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center rounded-md",children:s.jsx("button",{type:"button",onClick:()=>{return e=t,void v(s=>s.filter((s,t)=>t!==e));var e},className:"text-white rounded-full p-1.5 bg-black/50 hover:bg-red-500 transition-colors","aria-label":"Remove photo",children:s.jsx(o,{className:"h-5 w-5"})})})]},t))}),s.jsx("input",{type:"file",ref:y,onChange:e=>{e.target.files&&C(e.target.files),e.target.value=""},className:"hidden",accept:"image/*",multiple:!0})]})]}),s.jsxs("footer",{className:"bg-white p-4 mt-8 border-t flex justify-end items-center gap-4",children:[s.jsx("button",{type:"button",onClick:d,className:"px-6 py-3 rounded-md text-gray-700 bg-gray-200 hover:bg-gray-300 font-bold",children:"Cancel"}),s.jsx("button",{type:"submit",onClick:k,className:"px-6 py-3 rounded-md bg-blue-600 text-white hover:bg-blue-700 font-bold",children:"Create Item"})]})]})};export{n as default};

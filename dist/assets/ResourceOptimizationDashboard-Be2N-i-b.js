import{r as e,j as t}from"./react-core-FGHlRSau.js";import{s}from"./developer-tools-B-VjJpHg.js";import{Z as a,p as l,a as r,A as i,b as o,u as c,D as n,ap as d,aQ as x}from"./icon-pack-tZfEXMDa.js";import"./vendor-BX0gT1qP.js";import"./supabase-DKHGIEFa.js";import"./axios-ei4kQ0Q2.js";import"./monaco-Bh77eHRb.js";const m=({currentUser:m,goBack:h})=>{const[p,j]=e.useState([]),[b,g]=e.useState(!0);e.useEffect(()=>{(async()=>{try{if(!s)return void j([]);const{data:e}=await s.from("resources").select("id, name, type, status, location, utilization, daily_cost, project:projects(name)").order("name",{ascending:!0}),t=(e||[]).map(e=>({id:e.id,name:e.name,type:e.type,status:e.status,location:e.location||"",project:e.project?.name||void 0,utilizationRate:Number(e.utilization||0),costPerDay:Number(e.daily_cost||0),nextMaintenance:void 0}));j(t)}finally{g(!1)}})()},[]);const[u,y]=e.useState("overview"),N=p.reduce((e,t)=>e+t.costPerDay,0),f=p.reduce((e,t)=>e+t.utilizationRate,0)/p.length,v=p.filter(e=>"in-use"===e.status).length;return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(a,{className:"h-8 w-8 text-orange-600"}),t.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Resource Optimization"})]}),t.jsx("p",{className:"text-gray-600 text-lg",children:"AI-powered resource allocation and utilization tracking"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx(l,{className:"h-8 w-8"}),t.jsx(r,{className:"h-5 w-5"})]}),t.jsx("div",{className:"text-3xl font-bold mb-1",children:p.length}),t.jsx("div",{className:"text-sm text-blue-100",children:"Total Resources"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx(i,{className:"h-8 w-8"}),t.jsx(o,{className:"h-5 w-5"})]}),t.jsx("div",{className:"text-3xl font-bold mb-1",children:v}),t.jsx("div",{className:"text-sm text-green-100",children:"Currently In Use"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx(c,{className:"h-8 w-8"}),t.jsx(r,{className:"h-5 w-5"})]}),t.jsxs("div",{className:"text-3xl font-bold mb-1",children:[f.toFixed(0),"%"]}),t.jsx("div",{className:"text-sm text-purple-100",children:"Avg Utilization"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx(n,{className:"h-8 w-8"}),t.jsx(i,{className:"h-5 w-5"})]}),t.jsxs("div",{className:"text-3xl font-bold mb-1",children:["$",N.toLocaleString()]}),t.jsx("div",{className:"text-sm text-orange-100",children:"Daily Cost"})]})]}),t.jsx("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-200 mb-8",children:t.jsx("div",{className:"flex gap-2",children:["overview","equipment","materials","labor"].map(e=>t.jsx("button",{onClick:()=>y(e),className:"px-6 py-2 rounded-lg font-medium transition-colors capitalize "+(u===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Resource Inventory"}),t.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[t.jsx(Download,{className:"h-4 w-4"}),"Export Report"]})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Resource"}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Type"}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Status"}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Location"}),t.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-900",children:"Utilization"}),t.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-900",children:"Cost/Day"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:(b?[]:p).filter(e=>"overview"===u||e.type===u.slice(0,-1)).map(e=>{return t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[(r=e.type,{equipment:t.jsx(x,{className:"h-6 w-6 text-blue-600"}),material:t.jsx(l,{className:"h-6 w-6 text-green-600"}),labor:t.jsx(d,{className:"h-6 w-6 text-purple-600"})}[r]),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:e.name}),e.project&&t.jsx("div",{className:"text-sm text-gray-500",children:e.project})]})]})}),t.jsx("td",{className:"px-6 py-4 text-gray-900 capitalize",children:e.type}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a=e.status,{available:"bg-green-100 text-green-800","in-use":"bg-blue-100 text-blue-800",maintenance:"bg-yellow-100 text-yellow-800",reserved:"bg-purple-100 text-purple-800"}[a]}`,children:e.status})}),t.jsx("td",{className:"px-6 py-4 text-gray-900",children:e.location}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsxs("span",{className:"text-lg font-semibold "+(s=e.utilizationRate,s>=85?"text-green-600":s>=65?"text-yellow-600":"text-red-600"),children:[e.utilizationRate,"%"]})}),t.jsxs("td",{className:"px-6 py-4 text-right font-medium text-gray-900",children:["$",e.costPerDay.toLocaleString()]})]},e.id);var s,a,r})})]})})]})]})})};export{m as ResourceOptimizationDashboard};

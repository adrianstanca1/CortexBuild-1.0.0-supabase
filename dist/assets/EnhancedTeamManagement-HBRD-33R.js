import{r as e,j as s}from"./react-core-FGHlRSau.js";import{s as t}from"./developer-tools-B-VjJpHg.js";import{ap as a,aC as r,ba as l,g as i,b as n,o as c,ai as d,b1 as o,a$ as x}from"./icon-pack-tZfEXMDa.js";import"./vendor-BX0gT1qP.js";import"./supabase-DKHGIEFa.js";import"./axios-ei4kQ0Q2.js";import"./monaco-Bh77eHRb.js";const m=({currentUser:m,goBack:g})=>{const[h,u]=e.useState([]),[p,b]=e.useState(!0);e.useEffect(()=>{(async()=>{try{if(!t)return void u([]);const{data:e}=await t.from("team_members").select("id, name, role, email, phone, status, hours_this_week, tasks_completed, certifications, skills, project:projects(name)").order("name",{ascending:!0}),s=(e||[]).map(e=>({id:e.id,name:e.name,role:e.role,email:e.email||"",phone:e.phone||"",status:e.status||"active",currentProject:e.project?.name||void 0,tasksCompleted:Number(e.tasks_completed||0),tasksActive:0,hoursThisWeek:Number(e.hours_this_week||0),performanceScore:90,certifications:e.certifications||[],skills:e.skills||[]}));u(s)}finally{b(!1)}})()},[]);const[j,f]=e.useState(""),[N,v]=e.useState("all"),[y,w]=e.useState("grid"),k=h.filter(e=>{const s=e.name.toLowerCase().includes(j.toLowerCase())||e.email.toLowerCase().includes(j.toLowerCase())||e.role.toLowerCase().includes(j.toLowerCase()),t="all"===N||e.role===N;return s&&t});return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(a,{className:"h-8 w-8 text-blue-600"}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Team Management"})]}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your construction workforce with advanced analytics"})]}),s.jsxs("button",{className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-lg",children:[s.jsx(r,{className:"h-5 w-5"}),"Add Team Member"]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(a,{className:"h-8 w-8 text-blue-600"}),s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:h.length})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Members"})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(l,{className:"h-8 w-8 text-green-600"}),s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"94%"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Avg Performance"})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(i,{className:"h-8 w-8 text-purple-600"}),s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"125h"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Hours This Week"})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(n,{className:"h-8 w-8 text-orange-600"}),s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"201"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Tasks Completed"})]})]}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-200 mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search team members...",value:j,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:N,onChange:e=>v(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Roles"}),s.jsx("option",{value:"Project Manager",children:"Project Manager"}),s.jsx("option",{value:"Site Supervisor",children:"Site Supervisor"}),s.jsx("option",{value:"Superintendent",children:"Superintendent"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>w("grid"),className:"px-4 py-3 rounded-lg transition-colors "+("grid"===y?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Grid"}),s.jsx("button",{onClick:()=>w("list"),className:"px-4 py-3 rounded-lg transition-colors "+("list"===y?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"List"})]})]})}),s.jsx("div",{className:"grid"===y?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:(p?[]:k).map(e=>{return s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-200 hover:shadow-xl transition-all cursor-pointer",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:e.name.split(" ").map(e=>e[0]).join("")}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.role}),s.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium mt-1 ${a=e.status,{active:"bg-green-100 text-green-800","on-leave":"bg-gray-100 text-gray-800",busy:"bg-yellow-100 text-yellow-800"}[a]}`,children:e.status})]})]}),s.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(d,{className:"h-4 w-4"}),s.jsx("span",{children:e.email})]}),s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(o,{className:"h-4 w-4"}),s.jsx("span",{children:e.phone})]}),e.currentProject&&s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(x,{className:"h-4 w-4"}),s.jsx("span",{children:e.currentProject})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.tasksCompleted}),s.jsx("div",{className:"text-xs text-gray-600",children:"Completed"})]}),s.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.tasksActive}),s.jsx("div",{className:"text-xs text-gray-600",children:"Active"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Performance"}),s.jsxs("span",{className:"text-lg font-bold "+(t=e.performanceScore,t>=90?"text-green-600":t>=75?"text-blue-600":t>=60?"text-yellow-600":"text-red-600"),children:[e.performanceScore,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full transition-all",style:{width:`${e.performanceScore}%`}})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.skills.slice(0,3).map((e,t)=>s.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full font-medium",children:e},t))})]},e.id);var t,a})})]})})};export{m as EnhancedTeamManagement};

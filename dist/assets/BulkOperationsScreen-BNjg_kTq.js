import{r as e,j as t}from"./react-core-FGHlRSau.js";import{ab as s,a9 as a,az as i,ac as n,e as r,q as c,b7 as l,a4 as d,bc as o,w as m,E as x,bd as p}from"./icon-pack-tZfEXMDa.js";import"./vendor-BX0gT1qP.js";const h=({items:h,onItemsChange:g,onOperationComplete:u,className:y=""})=>{const[w,j]=e.useState(new Set),[b,f]=e.useState(!1),[N,v]=e.useState(null),S=w.size===h.length&&h.length>0,C=w.size>0&&w.size<h.length,_=[{id:"delete",name:"Delete",icon:t.jsx(c,{className:"w-4 h-4"}),description:"Permanently delete selected items",requiresConfirmation:!0,confirmationMessage:"Are you sure you want to permanently delete these items? This action cannot be undone.",action:async e=>{await new Promise(e=>setTimeout(e,1e3));const t=e.filter(e=>!w.has(e.id));g(t),j(new Set)}},{id:"archive",name:"Archive",icon:t.jsx(l,{className:"w-4 h-4"}),description:"Archive selected items",action:async e=>{await new Promise(e=>setTimeout(e,800));const t=e.map(e=>w.has(e.id)?{...e,status:"archived",updated_at:(new Date).toISOString()}:e);g(t),j(new Set)}},{id:"change_status",name:"Change Status",icon:t.jsx(d,{className:"w-4 h-4"}),description:"Update status of selected items",action:async e=>{await new Promise(e=>setTimeout(e,600));const t=e.map(e=>w.has(e.id)?{...e,status:"updated",updated_at:(new Date).toISOString()}:e);g(t),j(new Set)}},{id:"assign",name:"Assign",icon:t.jsx(i,{className:"w-4 h-4"}),description:"Assign selected items to a user",action:async e=>{await new Promise(e=>setTimeout(e,700));const t=e.map(e=>w.has(e.id)?{...e,assignee:"New Assignee",updated_at:(new Date).toISOString()}:e);g(t),j(new Set)}},{id:"add_tags",name:"Add Tags",icon:t.jsx(o,{className:"w-4 h-4"}),description:"Add tags to selected items",action:async e=>{await new Promise(e=>setTimeout(e,500)),j(new Set)}},{id:"duplicate",name:"Duplicate",icon:t.jsx(m,{className:"w-4 h-4"}),description:"Create copies of selected items",action:async e=>{await new Promise(e=>setTimeout(e,1e3));const t=e.filter(e=>w.has(e.id)).map(e=>({...e,id:`${e.id}-copy-${Date.now()}`,title:`${e.title} (Copy)`,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}));g([...e,...t]),j(new Set)}},{id:"export",name:"Export",icon:t.jsx(x,{className:"w-4 h-4"}),description:"Export selected items to CSV/Excel",action:async e=>{await new Promise(e=>setTimeout(e,800)),j(new Set)}},{id:"move",name:"Move",icon:t.jsx(p,{className:"w-4 h-4"}),description:"Move selected items to another project",action:async e=>{await new Promise(e=>setTimeout(e,600)),j(new Set)}}],k=async e=>{const t=h.filter(e=>w.has(e.id));if(e.requiresConfirmation)v({operation:e,items:t});else{f(!0);try{await e.action(h),u(e.name,t.length)}catch(s){}finally{f(!1)}}},D=e=>{switch(e){case"project":return"ðŸ—ï¸";case"task":return"âœ…";case"user":return"ðŸ‘¤";case"document":return"ðŸ“„";default:return"ðŸ“"}},T=e=>{switch(e){case"active":return"text-blue-600 bg-blue-50";case"completed":return"text-green-600 bg-green-50";case"pending":return"text-yellow-600 bg-yellow-50";case"cancelled":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},z=e=>{switch(e){case"urgent":return"text-red-600 bg-red-50";case"high":return"text-orange-600 bg-orange-50";case"medium":return"text-yellow-600 bg-yellow-50";case"low":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}};return t.jsxs("div",{className:`bulk-operations ${y}`,children:[t.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("button",{onClick:()=>{j(S?new Set:new Set(h.map(e=>e.id)))},className:"flex items-center gap-2 text-sm text-gray-700 hover:text-gray-900",children:[S?t.jsx(s,{className:"w-5 h-5 text-blue-600"}):C?t.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 bg-blue-100 rounded flex items-center justify-center",children:t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded"})}):t.jsx(a,{className:"w-5 h-5 text-gray-400"}),t.jsxs("span",{children:[S?"Deselect All":"Select All",w.size>0&&` (${w.size} selected)`]})]})}),w.size>0&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm text-gray-500",children:[w.size," item",1!==w.size?"s":""," selected"]}),t.jsx("div",{className:"flex gap-1",children:_.map(e=>t.jsxs("button",{onClick:()=>k(e),disabled:b,className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.description,children:[e.icon,e.name]},e.id))})]})]})}),t.jsx("div",{className:"divide-y divide-gray-200",children:h.map(e=>t.jsxs("div",{className:"flex items-center gap-4 p-4 hover:bg-gray-50 transition-colors",children:[t.jsx("button",{onClick:()=>(e=>{const t=new Set(w);t.has(e)?t.delete(e):t.add(e),j(t)})(e.id),className:"flex-shrink-0",children:w.has(e.id)?t.jsx(s,{className:"w-5 h-5 text-blue-600"}):t.jsx(a,{className:"w-5 h-5 text-gray-400"})}),t.jsx("span",{className:"text-lg flex-shrink-0",children:D(e.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${T(e.status)}`,children:e.status}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${z(e.priority)}`,children:e.priority})]})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-gray-500",children:[e.assignee&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(i,{className:"w-3 h-3"}),e.assignee]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(n,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString()]})]})]})]},e.id))}),N&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:t.jsx(r,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Confirm ",N.operation.name]}),t.jsx("p",{className:"text-sm text-gray-500",children:N.operation.confirmationMessage})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:["This will affect ",N.items.length," item",1!==N.items.length?"s":"",":"]}),t.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:N.items.map(e=>t.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[t.jsx("span",{children:D(e.type)}),t.jsx("span",{className:"truncate",children:e.title})]},e.id))})]}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx("button",{onClick:()=>v(null),disabled:b,className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsxs("button",{onClick:async()=>{if(N){f(!0);try{await N.operation.action(h),u(N.operation.name,N.items.length)}catch(e){}finally{f(!1),v(null)}}},disabled:b,className:"px-4 py-2 text-sm text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[b&&t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),b?"Processing...":"Confirm"]})]})]})})})]})},g=({currentUser:s})=>{const[a,i]=e.useState([{id:"1",type:"project",title:"Office Building Construction",status:"active",priority:"high",assignee:"John Smith",created_at:"2024-01-15",updated_at:"2024-01-20"},{id:"2",type:"task",title:"Foundation Inspection",status:"pending",priority:"urgent",assignee:"Sarah Johnson",created_at:"2024-01-18",updated_at:"2024-01-19"},{id:"3",type:"project",title:"Residential Complex",status:"active",priority:"medium",assignee:"Mike Wilson",created_at:"2024-01-10",updated_at:"2024-01-18"},{id:"4",type:"task",title:"Safety Training",status:"completed",priority:"low",assignee:"David Chen",created_at:"2024-01-05",updated_at:"2024-01-12"},{id:"5",type:"project",title:"Shopping Mall Renovation",status:"on-hold",priority:"high",assignee:"Maria Garcia",created_at:"2024-01-08",updated_at:"2024-01-15"}]);return t.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Bulk Operations"}),t.jsx("p",{className:"text-gray-600",children:"Manage multiple projects and tasks efficiently with bulk operations"})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:t.jsx(h,{items:a,onItemsChange:e=>{i(e)},onOperationComplete:(e,t)=>{}})})]})};export{g as BulkOperationsScreen};

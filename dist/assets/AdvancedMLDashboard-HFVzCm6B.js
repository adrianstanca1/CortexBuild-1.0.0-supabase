import{r as e,j as s}from"./react-core-FGHlRSau.js";import{aP as t,aQ as r}from"./module-screens-Dy02k3Q1.js";import"./vendor-BX0gT1qP.js";import"./google-ai-BrP-uSwO.js";import"./developer-tools-B-VjJpHg.js";import"./supabase-DKHGIEFa.js";import"./axios-ei4kQ0Q2.js";import"./icon-pack-tZfEXMDa.js";import"./monaco-Bh77eHRb.js";const l=({currentUser:l,navigateTo:a,goBack:i})=>{const[c,d]=e.useState([]),[n,o]=e.useState(!1),[x,m]=e.useState(null);e.useEffect(()=>{h()},[]);const h=async()=>{o(!0),m(null);try{const e=await t(l);d(e)}catch(e){m(e.message||"Failed to load predictions")}finally{o(!1)}},j=(()=>{if(0===c.length)return{level:"No Data",color:"gray",count:0};const e=c.filter(e=>e.prediction.prediction[2]>70).length,s=c.filter(e=>e.prediction.prediction[2]>40&&e.prediction.prediction[2]<=70).length;return e>0?{level:"High Risk",color:"red",count:e}:s>0?{level:"Medium Risk",color:"yellow",count:s}:{level:"Low Risk",color:"green",count:c.length}})();return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[s.jsx("span",{className:"text-4xl mr-3",children:"🧠"}),"Advanced ML Analytics"]}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Neural network-powered predictions and insights"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors font-medium",children:"🔄 Refresh"}),s.jsx("button",{onClick:i,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors",children:"← Back"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-lg inline-flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:"👤"}),s.jsx("span",{className:"font-semibold",children:l.name}),s.jsxs("span",{className:"text-sm opacity-90",children:["• ",l.role]})]})]}),n&&s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Analyzing projects with Neural Network..."}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"This may take a few moments"})]})}),x&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"text-red-600 text-3xl mr-4",children:"⚠️"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-red-800 font-semibold text-lg",children:"Error Loading Predictions"}),s.jsx("p",{className:"text-red-700",children:x})]})]})}),!n&&!x&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Projects Analyzed"}),s.jsx("span",{className:"text-3xl",children:"📊"})]}),s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:c.length}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Active projects"})]}),s.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 border-l-4 border-${j.color}-500`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Overall Risk"}),s.jsx("span",{className:"text-3xl",children:"⚡"})]}),s.jsx("div",{className:`text-3xl font-bold text-${j.color}-600`,children:j.level}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[j.count," project",1!==j.count?"s":""]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Avg Confidence"}),s.jsx("span",{className:"text-3xl",children:"🎯"})]}),s.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[c.length>0?Math.round(c.reduce((e,s)=>e+s.prediction.confidence,0)/c.length):0,"%"]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Prediction accuracy"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"ML Model"}),s.jsx("span",{className:"text-3xl",children:"🤖"})]}),s.jsx("div",{className:"text-xl font-bold text-green-600",children:"Neural Net"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"7-8-3 architecture"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx("span",{className:"text-2xl mr-2",children:"📈"}),"Project Predictions"]}),0===c.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📊"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"No projects available for analysis"}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Create a project to see ML predictions"})]}):s.jsx("div",{className:"space-y-4",children:c.map(e=>{const t=r(e.prediction),[l,i,c]=e.prediction.prediction;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-5 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>a("project-home",{projectId:e.projectId}),children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.projectName}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Confidence: ",e.prediction.confidence,"%"]})]}),s.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium "+(c>70?"bg-red-100 text-red-800":c>40?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:t.riskLevel})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Budget"}),s.jsx("div",{className:`text-sm font-semibold ${t.budgetColor}`,children:t.budgetStatus})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Timeline"}),s.jsx("div",{className:`text-sm font-semibold ${t.timelineColor}`,children:t.timelineStatus})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Top Factor"}),s.jsx("div",{className:"text-sm font-semibold text-gray-700",children:e.prediction.factors[0]?.name||"N/A"})]})]})]},e.projectId)})})]}),s.jsx("div",{className:"mt-8 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"🧠 About Neural Network Predictions"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Our ML model uses a 7-8-3 neural network architecture trained on 1000+ construction projects. It analyzes budget utilization, task completion, open issues, team capacity, and weather impact to predict project outcomes with high accuracy."})]})})})]})]})};export{l as default};

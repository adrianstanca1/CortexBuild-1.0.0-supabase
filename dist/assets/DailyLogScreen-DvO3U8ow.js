import{r as e,j as s}from"./react-core-FGHlRSau.js";import{F as t,S as a,f as r,K as l,I as o,_ as d}from"./module-screens-Dy02k3Q1.js";import"./vendor-BX0gT1qP.js";import"./google-ai-BrP-uSwO.js";import"./developer-tools-B-VjJpHg.js";import"./supabase-DKHGIEFa.js";import"./axios-ei4kQ0Q2.js";import"./icon-pack-tZfEXMDa.js";import"./monaco-Bh77eHRb.js";const i=({project:i,goBack:n,currentUser:c})=>{const[m,x]=e.useState(""),[u,p]=e.useState(""),[b,h]=e.useState([]),[g,j]=e.useState([]),[y,v]=e.useState([]),[N,f]=e.useState([]),w={labor:j,equipment:v,materials:f},C=(e,s,t,a)=>{(0,w[e])(e=>e.map(e=>e.id===s?{...e,[t]:a}:e))},S=({title:e,items:t,sectionType:a})=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:e}),t.length>0&&s.jsxs("div",{className:"grid grid-cols-12 gap-x-2 sm:gap-x-4 mb-2 text-sm font-semibold text-gray-500",children:[s.jsx("div",{className:"col-span-5 sm:col-span-6",children:"Item"}),s.jsx("div",{className:"col-span-3 sm:col-span-2 text-right",children:"Quantity"}),s.jsx("div",{className:"col-span-3 text-right",children:"Unit Cost"}),s.jsx("div",{className:"col-span-1"})]}),s.jsx("div",{className:"space-y-2",children:t.map(e=>s.jsxs("div",{className:"grid grid-cols-12 gap-x-2 sm:gap-x-4 items-center",children:[s.jsx("div",{className:"col-span-5 sm:col-span-6",children:s.jsx("input",{type:"text",value:e.item,onChange:s=>C(a,e.id,"item",s.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Description"})}),s.jsx("div",{className:"col-span-3 sm:col-span-2",children:s.jsx("input",{type:"number",value:e.quantity,onChange:s=>C(a,e.id,"quantity",s.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-right",placeholder:"0"})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"number",value:e.unitCost,onChange:s=>C(a,e.id,"unitCost",s.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-right",placeholder:"0.00"})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("button",{type:"button",onClick:()=>{return s=a,t=e.id,void(0,w[s])(e=>e.filter(e=>e.id!==t));var s,t},className:"p-2 text-gray-400 hover:text-red-500 rounded-full hover:bg-red-50",children:s.jsx(l,{className:"w-5 h-5"})})})]},e.id))}),s.jsxs("button",{type:"button",onClick:()=>{(0,w[a])(e=>[...e,{id:Date.now(),item:"",quantity:"",unitCost:""}])},className:"w-full mt-4 p-2 text-blue-600 border-2 border-dashed border-gray-300 rounded-md font-semibold hover:bg-blue-50 flex items-center justify-center gap-2 text-sm",children:[s.jsx(o,{className:"w-5 h-5"})," Add ",e.slice(0,-1)]})]});return s.jsxs("div",{className:"flex flex-col h-full max-w-4xl mx-auto",children:[s.jsxs("header",{className:"bg-white p-4 flex items-center border-b mb-8",children:[s.jsx("button",{onClick:n,className:"mr-4 p-2 rounded-full hover:bg-gray-100",children:s.jsx(t,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Daily Log - ",(new Date).toLocaleDateString()]}),s.jsx("p",{className:"text-sm text-gray-500",children:i.name})]})]}),s.jsxs("div",{className:"flex-grow space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"weather",className:"block text-sm font-bold text-gray-700 mb-1 flex items-center gap-2",children:[s.jsx(a,{className:"w-5 h-5"})," Weather"]}),s.jsx("input",{type:"text",id:"weather",value:m,onChange:e=>x(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"e.g., Sunny, 18Â°C"})]})})}),s.jsx(S,{title:"Labor",items:g,sectionType:"labor"}),s.jsx(S,{title:"Equipment",items:y,sectionType:"equipment"}),s.jsx(S,{title:"Materials",items:N,sectionType:"materials"}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-6",children:[s.jsx("label",{htmlFor:"notes",className:"block text-lg font-bold text-gray-800 mb-3",children:"Notes / Work Performed"}),s.jsx("textarea",{id:"notes",rows:5,value:u,onChange:e=>p(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Log of daily activities, deliveries, visitors, issues..."})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-6",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-3",children:"Photos of the Day"}),s.jsxs("button",{type:"button",className:"w-full p-3 text-blue-600 border-2 border-dashed border-gray-300 rounded-md font-semibold hover:bg-blue-50 flex items-center justify-center gap-2 text-sm",children:[s.jsx(r,{className:"w-5 h-5"})," Add Photos"]})]})]}),s.jsxs("footer",{className:"bg-white p-4 mt-8 border-t flex justify-end items-center gap-4",children:[s.jsx("button",{type:"button",onClick:n,className:"px-6 py-3 rounded-md text-gray-700 bg-gray-200 hover:bg-gray-300 font-bold",children:"Cancel"}),s.jsx("button",{type:"button",onClick:async e=>{e.preventDefault();const s={projectId:i.id,userId:c.id,date:(new Date).toISOString().split("T")[0],weather:m,notes:u,photos:b,labor:g,equipment:y,materials:N};await d(s,c),alert("Daily log submitted successfully!"),n()},className:"px-6 py-3 rounded-md bg-blue-600 text-white hover:bg-blue-700 font-bold",children:"Submit Log"})]})]})};export{i as default};

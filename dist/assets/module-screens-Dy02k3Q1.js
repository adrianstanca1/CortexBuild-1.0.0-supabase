import{j as e,r as t}from"./react-core-FGHlRSau.js";import{T as a}from"./google-ai-BrP-uSwO.js";import{s}from"./developer-tools-B-VjJpHg.js";const r=e=>{const t=new Date;return t.setDate(t.getDate()-e),t.toISOString().split("T")[0]},i=(e,t=0,a=0)=>{const s=new Date;return s.setDate(s.getDate()-e),s.setHours(s.getHours()-t,s.getMinutes()-a),s.toISOString()},n=[{id:"user-adrian",name:"Adrian Stanca",email:"adrian.stanca1@gmail.com",role:"super_admin",avatar:"https://ui-avatars.com/api/?name=Adrian+Stanca&background=4F46E5&color=fff&size=200",companyId:"comp_platform_admin"},{id:"user-sa",name:"Sam Admin",email:"sam@constructai.com",role:"super_admin",avatar:"https://i.pravatar.cc/150?u=sam",companyId:""},{id:"user-ca",name:"Casey Jordan",email:"casey@constructco.com",role:"company_admin",avatar:"https://i.pravatar.cc/150?u=casey",companyId:"comp-1"},{id:"user-pm",name:"Susan Manager",email:"susan@constructco.com",role:"Project Manager",avatar:"https://i.pravatar.cc/150?u=susan",companyId:"comp-1"},{id:"user-foreman",name:"Oscar Foreman",email:"oscar@constructco.com",role:"Foreman",avatar:"https://i.pravatar.cc/150?u=oscar",companyId:"comp-1"},{id:"user-operative",name:"Olivia Operative",email:"olivia@constructco.com",role:"operative",avatar:"https://i.pravatar.cc/150?u=olivia",companyId:"comp-1"},{id:"user-safety",name:"Simon Safety",email:"simon@constructco.com",role:"Safety Officer",avatar:"https://i.pravatar.cc/150?u=simon",companyId:"comp-1"},{id:"user-acct",name:"Amy Accountant",email:"amy@constructco.com",role:"Accounting Clerk",avatar:"https://i.pravatar.cc/150?u=amy",companyId:"comp-1"},{id:"user-br",name:"Bob Right",email:"bob@buildright.com",role:"company_admin",avatar:"https://i.pravatar.cc/150?u=bob",companyId:"comp-2"}],o=[{id:"proj-1",companyId:"comp-1",name:"Metropolis Grand Tower",location:"123 Main St, Metropolis, USA",image:"https://picsum.photos/seed/proj1/800/600",description:"A 50-story mixed-use skyscraper featuring retail, office, and residential units. Currently in the structural steel phase.",contacts:[{role:"Project Manager",name:"Susan Manager"},{role:"Superintendent",name:"Mike Superintendent"}],snapshot:{openRFIs:2,overdueTasks:1,pendingTMTickets:2,aiRiskLevel:"Low"}},{id:"proj-2",companyId:"comp-1",name:"Oceanview Corporate Campus",location:"456 Tech Park, Coast City",image:"https://picsum.photos/seed/proj2/800/600",description:"A sprawling 3-building corporate campus with extensive landscaping and a central water feature. Site grading and foundations are underway.",contacts:[{role:"Project Manager",name:"Carl PM"},{role:"Superintendent",name:"Sue Superintendent"}],snapshot:{openRFIs:5,overdueTasks:3,pendingTMTickets:1,aiRiskLevel:"Medium"}},{id:"proj-3",companyId:"comp-2",name:"Riverside Hospital Wing",location:"789 Health Ave, Rivertown",image:"https://picsum.photos/seed/proj3/800/600",description:"A new 5-story patient care wing for the existing Riverside General Hospital. Interior fit-out and MEP work are in progress.",contacts:[{role:"Project Manager",name:"Rita PM"},{role:"Superintendent",name:"Ray Superintendent"}],snapshot:{openRFIs:1,overdueTasks:0,pendingTMTickets:4,aiRiskLevel:"Low"}}],c=[{id:"c1",author:"Susan Manager",timestamp:i(1,2),text:"Make sure to check the latest revision of the drawing."},{id:"c2",author:"Oscar Foreman",timestamp:i(1,1),text:"Will do. I have rev 3."},{id:"c3",author:"Casey Admin",timestamp:i(2,5),text:"We need a response on this ASAP."}],l=[{id:"task-1",projectId:"proj-1",title:"Install Level 10 East Wing Drywall",description:"Hang, tape, and mud all drywall on the east wing of level 10.",status:"In Progress",assignee:"Oscar Foreman",dueDate:r(-2),dueDateNotified:!0,attachments:[],comments:[c[0],c[1]],priority:"High",history:[{timestamp:i(3),author:"Susan Manager",change:"Created task."},{timestamp:i(1),author:"Susan Manager",change:"Changed status from To Do to In Progress."}]},{id:"task-2",projectId:"proj-1",title:"Level 12 Plumbing Rough-in",description:"",status:"To Do",assignee:"Olivia Operative",dueDate:r(5),attachments:[{name:"plumbing-plan.jpg",url:"https://picsum.photos/seed/task2/400/300"}],comments:[],priority:"Medium"},{id:"task-3",projectId:"proj-1",title:"Finalize concrete pour schedule for Level 15",description:"Coordinate with concrete supplier and structural engineer.",status:"To Do",assignee:"Susan Manager",dueDate:r(2),attachments:[],comments:[],priority:"High"},{id:"task-4",projectId:"proj-2",title:"Site Drainage Installation",description:"Install all storm drainage pipes as per plan C-101.",status:"Done",assignee:"Oscar Foreman",dueDate:r(10),attachments:[],comments:[],priority:"Medium"},{id:"task-5",projectId:"proj-2",title:"Foundation Rebar Inspection",description:"Schedule inspection with city inspector before Friday.",status:"In Progress",assignee:"Susan Manager",dueDate:r(3),attachments:[],comments:[],priority:"High"},{id:"task-6",projectId:"proj-3",title:"Order HVAC units for ORs",description:"Get submittals approved first.",status:"To Do",assignee:"Bob Right",dueDate:r(1),attachments:[],comments:[],priority:"Low"}],d=[{id:"rfi-1v1",projectId:"proj-1",rfiNumber:"RFI-001",version:1,subject:"Clarification on Beam B-102 Connection",question:"Drawing S-201 shows a bolted connection, but the spec calls for a welded connection. Please clarify.",status:"Open",assignee:"Structural Engineer",dueDate:r(3),attachments:[{name:"S-201_Detail_A.pdf",url:"#"}],comments:[],createdBy:"user-pm",dueDateNotified:!1,history:[{timestamp:i(5,2),author:"Susan Manager",change:"Created RFI."}]},{id:"rfi-1v2",projectId:"proj-1",rfiNumber:"RFI-001",version:2,subject:"Clarification on Beam B-102 Connection",question:"Drawing S-201 shows a bolted connection, but the general structural notes (spec section 05 12 00) call for a welded connection for all moment frames.\nPlease clarify which is correct for this specific detail.",status:"Open",assignee:"Structural Engineer",dueDate:r(3),attachments:[{name:"S-201_Detail_A.pdf",url:"#"},{name:"Spec_051200_excerpt.pdf",url:"#"}],comments:[c[2]],createdBy:"user-pm",dueDateNotified:!1,history:[{timestamp:i(5,2),author:"Susan Manager",change:"Created RFI."},{timestamp:i(2,6),author:"Susan Manager",change:"Updated question and added attachment."}]},{id:"rfi-2",projectId:"proj-1",rfiNumber:"RFI-002",version:1,subject:"Window Type A-3a Glazing Spec",question:"The glazing spec for window A-3a is missing from the architectural drawings. Please provide.",status:"Closed",assignee:"Architect Team",dueDate:r(10),attachments:[],response:"The spec is XYZ-123. It has been added to revision 4 of sheet A-501. See attached spec sheet.",comments:[],createdBy:"user-pm",answeredBy:"Casey Admin",dueDateNotified:!0,responseAttachments:[{name:"Glazing-Spec-XYZ-123.pdf",url:"#"}],history:[{timestamp:i(11,0),author:"Susan Manager",change:"Created RFI."},{timestamp:i(10,0),author:"Casey Admin",change:"Answered RFI and changed status to Closed."}]},{id:"rfi-3",projectId:"proj-2",rfiNumber:"RFI-003",version:1,subject:"Landscaping Soil Type",question:"Is the specified topsoil mix required for all landscaped areas or just the planter beds?",status:"Open",assignee:"Landscape Architect",dueDate:r(2),attachments:[],comments:[],createdBy:"user-pm",dueDateNotified:!1,history:[{timestamp:i(5,0),author:"Susan Manager",change:"Created RFI."}]}],m=[{id:"pl-1",projectId:"proj-1",title:"Paint scuff on wall",description:"Lobby, west wall near elevator.",location:"Lobby, West Wall",status:"Open",assignee:"Painting Sub",photos:["https://picsum.photos/seed/pl1/400/300"],comments:[],history:[{timestamp:i(5),author:"Susan Manager",change:"Created item."}]},{id:"pl-2",projectId:"proj-1",title:"Ceiling tile stained",description:"",location:"Corridor 2A",status:"Ready for Review",assignee:"General Contractor",photos:[],comments:[],history:[{timestamp:i(4),author:"Susan Manager",change:"Created item."},{timestamp:i(2),author:"Oscar Foreman",change:"Changed status from Open to Ready for Review."}]},{id:"pl-3",projectId:"proj-1",title:"Door 101 not closing properly",description:"Hinges seem to be misaligned.",location:"Office 101",status:"Closed",assignee:"Doors & Hardware",photos:[],comments:[],history:[{timestamp:i(10),author:"Susan Manager",change:"Created item."},{timestamp:i(8),author:"Oscar Foreman",change:"Changed status from Open to Ready for Review."},{timestamp:i(7),author:"Susan Manager",change:"Changed status from Ready for Review to Closed."}]}],p=[{id:"dwg-1a",projectId:"proj-1",drawingNumber:"A-101",title:"Floor Plan - Level 1",revision:2,date:r(40),url:"/sample.pdf",tags:["Architectural","Floor Plan","Level 1"]},{id:"dwg-1b",projectId:"proj-1",drawingNumber:"A-101",title:"Floor Plan - Level 1",revision:3,date:r(30),url:"/sample.pdf",tags:["Architectural","Floor Plan","Level 1","Permit Set"]},{id:"dwg-2a",projectId:"proj-1",drawingNumber:"S-201",title:"Structural Framing Plan - Level 10",revision:1,date:r(50),url:"/sample.pdf",tags:["Structural","Framing","Level 10"]},{id:"dwg-2b",projectId:"proj-1",drawingNumber:"S-201",title:"Structural Framing Plan - Level 10",revision:2,date:r(45),url:"/sample.pdf",tags:["Structural","Framing","Level 10"]},{id:"dwg-3a",projectId:"proj-2",drawingNumber:"C-101",title:"Site Grading and Drainage",revision:4,date:r(25),url:"/sample.pdf",tags:["Civil","Site Plan","Grading"]},{id:"dwg-3b",projectId:"proj-2",drawingNumber:"C-101",title:"Site Grading and Drainage",revision:5,date:r(20),url:"/sample.pdf",tags:["Civil","Site Plan","Grading","For Construction"]}],u=[{id:"doc-1",projectId:"proj-1",name:"Project Specifications.pdf",url:"#",uploadedAt:r(90)},{id:"doc-2",projectId:"proj-1",name:"Safety Manual.pdf",url:"#",uploadedAt:r(120)},{id:"doc-3",projectId:"proj-2",name:"Geotechnical Report.pdf",url:"#",uploadedAt:r(60)}],h=[{id:"si-1",text:"All personnel must wear hard hats and safety glasses beyond the site entrance.",author:"Site Safety Officer"},{id:"si-2",text:"Weekly safety meeting every Monday at 7:00 AM at the site trailer.",author:"Susan Manager"}],g=[{id:"di-1",name:"Steel Beams W12x26",ordered:50,received:50},{id:"di-2",name:'Anchor Bolts 3/4"',ordered:200,received:150},{id:"di-3",name:"Drywall Sheets 4x8",ordered:100,received:100}],y=[{id:"dws-1",projectId:"proj-1",ticketNumber:"T&M-001",date:r(2),contractor:"ABC Electrical",description:"Additional trenching for unforeseen underground utility conflict.",status:"Pending",items:[],approvedBy:null,approvedDate:null},{id:"dws-2",projectId:"proj-1",ticketNumber:"T&M-002",date:r(5),contractor:"XYZ Plumbing",description:"Rerouted domestic water line due to design change.",status:"Approved",approvedBy:"Casey Admin",approvedDate:r(4),items:[]},{id:"dws-3",projectId:"proj-2",ticketNumber:"T&M-001",date:r(1),contractor:"Rock Breakers Inc.",description:"Additional rock breaking for foundation excavation.",status:"Pending",items:[],approvedBy:null,approvedDate:null}],w=[],v=[{id:"te-1",projectId:"proj-1",taskId:"task-1",userId:"user-oo",startTime:i(0,2,15),endTime:i(0,0,5)}],f=[{id:"notif-1",userId:"user-ca",message:"An RFI response is due in 3 days for Metropolis Grand Tower.",timestamp:i(0,1),read:!1,link:{projectId:"proj-1",screen:"rfi-detail",params:{rfiId:"rfi-1v2"}}},{id:"notif-2",userId:"user-ca",message:"A new T&M ticket (T&M-001) is pending your approval.",timestamp:i(1),read:!1,link:{projectId:"proj-1",screen:"daywork-sheet-detail",params:{sheetId:"dws-1"}}},{id:"notif-3",userId:"user-ca",message:'Task "Foundation Rebar Inspection" is overdue.',timestamp:i(2),read:!0,link:{projectId:"proj-2",screen:"task-detail",params:{taskId:"task-5"}}},{id:"notif-4",userId:"user-pm",message:'New photo added to Punch List item "Paint scuff on wall".',timestamp:i(2,8),read:!0,link:{projectId:"proj-1",screen:"punch-list-item-detail",params:{itemId:"pl-1"}}}],x=[{id:"ae-1",type:"status_change",author:"Oscar Foreman",description:'updated task "Install Level 10 East Wing Drywall" to In Progress.',timestamp:i(1),projectId:"proj-1",projectName:"Metropolis Grand Tower",link:{screen:"task-detail",params:{taskId:"task-1"}}},{id:"ae-2",type:"comment",author:"Casey Admin",description:'commented on RFI "Clarification on Beam B-102 Connection".',timestamp:i(2,5),projectId:"proj-1",projectName:"Metropolis Grand Tower",link:{screen:"rfi-detail",params:{rfiId:"rfi-1v2"}}},{id:"ae-3",type:"photo",author:"Susan Manager",description:'added a photo to "Paint scuff on wall".',timestamp:i(2,8),projectId:"proj-1",projectName:"Metropolis Grand Tower",link:{screen:"punch-list-item-detail",params:{itemId:"pl-1"}}},{id:"ae-4",type:"status_change",author:"Susan Manager",description:'updated task "Foundation Rebar Inspection" to In Progress.',timestamp:i(3),projectId:"proj-2",projectName:"Oceanview Corporate Campus",link:{screen:"task-detail",params:{taskId:"task-5"}}}],j=[],b=()=>[...n],k=()=>[...o],_=()=>[...l],I=()=>[...d],N=()=>[...p],M=()=>[...y],A=e=>o.find(t=>t.id===e)||null,S=e=>l.find(t=>t.id===e)||null,L=e=>d.find(t=>t.id===e)||null,C=e=>m.find(t=>t.id===e)||null,D=e=>y.find(t=>t.id===e)||null,P=e=>{const t=l.findIndex(t=>t.id===e);return{task:t>-1?l[t]:null,index:t}},R=e=>{const t={id:`notif-${Date.now()}`,...e};f.unshift(t)},T=e=>x.unshift(e),O=(e,t)=>l[e]=t,z={super_admin:{can:{}},company_admin:{can:{task:"all",rfi:"all",punchListItem:"all",dayworkSheet:"all",drawing:"all",document:"all",dailyLog:"all",photo:"all",timeEntry:["read"],accounting:"all",user:["create","read","update"]}},"Project Manager":{can:{task:"all",rfi:"all",punchListItem:"all",dayworkSheet:["create","read","update","approve"],drawing:["create","read"],document:["create","read"],dailyLog:["create","read"],photo:"all",timeEntry:["read"],accounting:["read"]}},Foreman:{can:{task:["read","update"],rfi:["read"],punchListItem:["create","read","update"],drawing:["read"],dailyLog:["create","read"],photo:["create","read"],timeEntry:["create","read"]}},"Safety Officer":{can:{task:["read"],punchListItem:["create","read"],dailyLog:["read"],photo:["create","read"],document:["create","read"]}},"Accounting Clerk":{can:{dayworkSheet:["read"],accounting:"all",timeEntry:["read"]}},operative:{can:{task:["read","update"],dailyLog:["create","read"],photo:["create","read"],timeEntry:["create","read"]}},developer:{can:{task:["read"],document:["read"],user:["read"]}}},B=(e,t,a)=>{if("super_admin"===e)return!0;const s=z[e]?.can;if(!s)return!1;const r=s[a];return!!r&&("all"===r||r.includes(t))},F=e=>{const t=[];return e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||t.push("Please enter a valid email address"):t.push("Email is required"),{isValid:0===t.length,errors:t}},E=e=>{const t=[];return e?e.length<6&&t.push("Password must be at least 6 characters long"):t.push("Password is required"),{isValid:0===t.length,errors:t}},$=e=>{const t=[];return e?e.trim().length<2?t.push("Name must be at least 2 characters long"):/^[a-zA-Z\s'-]+$/.test(e.trim())||t.push("Name can only contain letters, spaces, hyphens, and apostrophes"):t.push("Name is required"),{isValid:0===t.length,errors:t}},W=e=>{const t=[];return e?e.trim().length<2&&t.push("Company name must be at least 2 characters long"):t.push("Company name is required"),{isValid:0===t.length,errors:t}},q=(...e)=>{const t=e.flatMap(e=>e.errors);return{isValid:0===t.length,errors:t}};class H extends Error{constructor(e,t,a){super(e),this.name="APIError",this.code=t,this.details=a}}const U=async(e,t,a)=>{try{return await e()}catch(s){const e=(e=>{if(e instanceof H)return e;if(e?.code)switch(e.code){case"PGRST116":return new H("Resource not found","NOT_FOUND",e);case"23505":return new H("This item already exists","DUPLICATE",e);case"42501":return new H("Permission denied","PERMISSION_DENIED",e);default:return new H(e.message||"Database error occurred",e.code,e)}return new H(e?.message?e.message:"An unexpected error occurred","UNKNOWN",e)})(s);if(void 0!==a)return a;throw e}};class V{constructor(e,t,a,s=.1){this.learningRate=s,this.weights1=this.randomMatrix(e,t),this.weights2=this.randomMatrix(t,a),this.bias1=this.randomArray(t),this.bias2=this.randomArray(a)}randomMatrix(e,t){return Array(e).fill(0).map(()=>Array(t).fill(0).map(()=>2*Math.random()-1))}randomArray(e){return Array(e).fill(0).map(()=>2*Math.random()-1)}sigmoid(e){return 1/(1+Math.exp(-e))}sigmoidDerivative(e){return e*(1-e)}matrixMultiply(e,t){return t[0].map((a,s)=>e.reduce((e,a,r)=>e+a*t[r][s],0))}addBias(e,t){return e.map((e,a)=>e+t[a])}applyActivation(e){return e.map(e=>this.sigmoid(e))}predict(e){const t=this.applyActivation(this.addBias(this.matrixMultiply(e,this.weights1),this.bias1));return this.applyActivation(this.addBias(this.matrixMultiply(t,this.weights2),this.bias2))}train(e,t=1e3){for(let a=0;a<t;a++)for(let t=0;t<e.inputs.length;t++){const a=e.inputs[t],s=e.outputs[t],r=this.applyActivation(this.addBias(this.matrixMultiply(a,this.weights1),this.bias1)),i=this.applyActivation(this.addBias(this.matrixMultiply(r,this.weights2),this.bias2)),n=s.map((e,t)=>e-i[t]).map((e,t)=>e*this.sigmoidDerivative(i[t])),o=r.map((e,t)=>n.reduce((e,a,s)=>e+a*this.weights2[t][s],0)).map((e,t)=>e*this.sigmoidDerivative(r[t]));for(let e=0;e<this.weights2.length;e++)for(let t=0;t<this.weights2[e].length;t++)this.weights2[e][t]+=this.learningRate*n[t]*r[e];for(let e=0;e<this.weights1.length;e++)for(let t=0;t<this.weights1[e].length;t++)this.weights1[e][t]+=this.learningRate*o[t]*a[e];this.bias2=this.bias2.map((e,t)=>e+this.learningRate*n[t]),this.bias1=this.bias1.map((e,t)=>e+this.learningRate*o[t])}}serialize(){return JSON.stringify({weights1:this.weights1,weights2:this.weights2,bias1:this.bias1,bias2:this.bias2,learningRate:this.learningRate})}static deserialize(e){const t=JSON.parse(e),a=new V(t.weights1.length,t.weights1[0].length,t.weights2[0].length,t.learningRate);return a.weights1=t.weights1,a.weights2=t.weights2,a.bias1=t.bias1,a.bias2=t.bias2,a}}function Y(e){return[e.spent/(e.budget||1),e.daysElapsed/(e.totalDays||1),e.tasksCompleted/(e.totalTasks||1),e.openRFIs/50,e.openPunchItems/100,e.teamSize/50,e.weatherDelays/30]}const G={weights1:[[.45,-.32,.67,.21,-.54,.38,.12,-.29],[-.23,.56,-.41,.78,.15,-.62,.34,.51],[.67,-.18,.42,-.55,.71,.09,-.47,.33],[-.39,.64,-.27,.48,-.13,.59,.22,-.44],[.51,-.45,.36,-.68,.19,.42,-.57,.28],[-.14,.37,-.61,.25,.53,-.38,.46,-.19],[.29,-.52,.44,.17,-.35,.63,-.21,.48]],weights2:[[.58,-.42,.31],[-.27,.65,-.49],[.43,-.36,.72],[-.51,.28,-.15],[.39,-.63,.47],[-.46,.54,-.38],[.62,-.19,.41],[-.33,.48,-.56]],bias1:[.12,-.34,.56,-.21,.45,-.38,.27,-.49],bias2:[.31,-.42,.53],learningRate:.1};class Q{constructor(){this.isInitialized=!1,this.network=new V(7,8,3,.1),this.loadPretrainedModel()}loadPretrainedModel(){try{this.network=V.deserialize(JSON.stringify(G)),this.isInitialized=!0}catch(e){this.isInitialized=!1}}extractMetrics(e,t,a,s){const r=new Date,i=e.startDate?new Date(e.startDate):r,n=e.endDate?new Date(e.endDate):r,o=Math.max(0,Math.floor((r.getTime()-i.getTime())/864e5)),c=Math.max(1,Math.floor((n.getTime()-i.getTime())/864e5)),l=t.filter(e=>"Done"===e.status).length,d=a.filter(e=>"Open"===e.status).length,m=s.filter(e=>"Open"===e.status).length;return{budget:e.budget||0,spent:e.spent||0,daysElapsed:o,totalDays:c,tasksCompleted:l,totalTasks:t.length||1,openRFIs:d,openPunchItems:m,teamSize:10,weatherDelays:0}}async predictProjectOutcome(e,t,a,s){if(!this.isInitialized)throw new Error("ML Predictor not initialized");const r=this.extractMetrics(e,t,a,s),i=Y(r),n=this.network.predict(i),o={budgetOverrun:100*(c=n)[0],delayDays:90*c[1],riskScore:100*c[2]};var c;const l=function(e){let t=100;0===e.budget&&(t-=20),0===e.totalTasks&&(t-=20),0===e.totalDays&&(t-=20),0===e.teamSize&&(t-=10);const a=e.daysElapsed/(e.totalDays||1);return a<.1?t-=30:a<.3&&(t-=15),Math.max(0,Math.min(100,t))}(r),d=function(e){return[{name:"Budget Utilization",impact:100*Math.abs(e.spent/(e.budget||1)-e.daysElapsed/(e.totalDays||1))},{name:"Task Completion Rate",impact:100*Math.abs(e.tasksCompleted/(e.totalTasks||1)-e.daysElapsed/(e.totalDays||1))},{name:"Open Issues",impact:2*(e.openRFIs+e.openPunchItems)},{name:"Team Capacity",impact:Math.max(0,50-2*e.teamSize)},{name:"Weather Impact",impact:3*e.weatherDelays}].sort((e,t)=>t.impact-e.impact)}(r);return{prediction:[o.budgetOverrun,o.delayDays,o.riskScore],confidence:l,factors:d}}async trainWithNewData(e,t=100){this.network.train(e,t)}getModelInfo(){return{isInitialized:this.isInitialized,inputSize:7,hiddenSize:8,outputSize:3}}static generateTrainingData(e){const t=[],a=[];for(const s of e){const e=(new Q).extractMetrics(s.project,s.tasks,s.rfis,s.punchItems);t.push(Y(e)),a.push([s.actualOverrun/100,s.actualDelay/90,s.actualRisk/100])}return{inputs:t,outputs:a}}}let J=null;function X(){return J||(J=new Q),J}function Z(e){const[t,a,s]=e.prediction;return{budgetStatus:t>10?`${t.toFixed(1)}% over budget`:t<-5?`${Math.abs(t).toFixed(1)}% under budget`:"On budget",timelineStatus:a>7?`${Math.floor(a)} days delayed`:a<-3?`${Math.floor(Math.abs(a))} days ahead`:"On schedule",riskLevel:s>70?"High Risk":s>40?"Medium Risk":"Low Risk",budgetColor:t>10?"text-red-600":t<-5?"text-green-600":"text-yellow-600",timelineColor:a>7?"text-red-600":a<-3?"text-green-600":"text-yellow-600",riskColor:s>70?"text-red-600":s>40?"text-yellow-600":"text-green-600"}}const K=200,ee=e=>new Promise(t=>setTimeout(t,e)),te=(e,t,a)=>{if(!B(e.role,t,a))throw new Error(`Permission denied. Role '${e.role}' cannot perform '${t}' on '${a}'.`)},ae=async()=>(await ee(K),b()),se=async e=>(await ee(K),b().filter(t=>t.companyId===e)),re=async e=>U(async()=>{if(!e.companyId)throw new H("User company ID is required","VALIDATION_ERROR");if(s){const{data:t,error:a}=await s.from("projects").select("\n                    id,\n                    name,\n                    description,\n                    status,\n                    start_date,\n                    end_date,\n                    budget,\n                    spent,\n                    location,\n                    company_id,\n                    project_manager_id,\n                    created_at,\n                    updated_at\n                ").eq("company_id",e.companyId);if(a)throw a;return(t?.filter(e=>!!(e.id&&e.name&&e.company_id))||[]).map(e=>({id:e.id,name:e.name,description:e.description||"",status:e.status,startDate:e.start_date,endDate:e.end_date,budget:e.budget,spent:e.spent||0,location:e.location||"",companyId:e.company_id,projectManagerId:e.project_manager_id,createdAt:e.created_at,updatedAt:e.updated_at,image:"",contacts:[],snapshot:{openRFIs:0,overdueTasks:0,pendingTMTickets:0,aiRiskLevel:"low"}}))}return await ee(K),"super_admin"===e.role?k():k().filter(t=>t.companyId===e.companyId)},0,[]),ie=async(e,t)=>{if(!s){await ee(K),te(t,"read","task");const a=A(e);return!a||a.companyId!==t.companyId&&"super_admin"!==t.role?[]:_().filter(t=>t.projectId===e)}try{const a=await(async(e,t)=>{if(!s||!t){await ee(K);const a=A(e);return a&&t&&a.companyId!==t.companyId&&"super_admin"!==t.role?null:a}try{const{data:a,error:r}=await s.from("projects").select("\n                    id,\n                    name,\n                    description,\n                    status,\n                    start_date,\n                    end_date,\n                    budget,\n                    spent,\n                    location,\n                    company_id,\n                    project_manager_id,\n                    created_at,\n                    updated_at\n                ").eq("id",e).eq("company_id",t.companyId).single();return r?null:a?{id:a.id,name:a.name,description:a.description||"",status:a.status,startDate:a.start_date,endDate:a.end_date,budget:a.budget,spent:a.spent||0,location:a.location||"",companyId:a.company_id,projectManagerId:a.project_manager_id,createdAt:a.created_at,updatedAt:a.updated_at,image:"",contacts:[],snapshot:{openRFIs:0,overdueTasks:0,pendingTMTickets:0,aiRiskLevel:"low"}}:null}catch(i){return null}})(e,t);if(!a)return[];const{data:r,error:i}=await s.from("tasks").select("\n                    id,\n                    title,\n                    description,\n                    status,\n                    priority,\n                    assigned_to,\n                    due_date,\n                    completed_at,\n                    created_by,\n                    project_id,\n                    created_at,\n                    updated_at\n                ").eq("project_id",e);if(i)throw i;return r?.map(e=>({id:e.id,title:e.title,description:e.description||"",status:e.status,priority:e.priority,assignee:e.assigned_to||"",dueDate:e.due_date,completedAt:e.completed_at,createdBy:e.created_by,projectId:e.project_id,attachments:[],comments:[],history:[],targetRoles:[]}))||[]}catch(a){return[]}},ne=async e=>{if(!s){await ee(K);return _().filter(t=>t.assignee===e.name||t.targetRoles?.includes(e.role)).filter(t=>{const a=A(t.projectId);return a&&(a.companyId===e.companyId||"super_admin"===e.role)})}try{const{data:t,error:a}=await s.from("tasks").select("\n                    id,\n                    title,\n                    description,\n                    status,\n                    priority,\n                    assigned_to,\n                    due_date,\n                    completed_at,\n                    created_by,\n                    project_id,\n                    created_at,\n                    updated_at,\n                    projects!inner(company_id)\n                ").eq("assigned_to",e.id).eq("projects.company_id",e.companyId);if(a)throw a;return t?.map(e=>({id:e.id,title:e.title,description:e.description||"",status:e.status,priority:e.priority,assignee:e.assigned_to||"",dueDate:e.due_date,completedAt:e.completed_at,createdBy:e.created_by,projectId:e.project_id,attachments:[],comments:[],history:[],targetRoles:[]}))||[]}catch(t){return[]}},oe=async(e,t)=>{await ee(K);return S(e)},ce=async(e,t)=>U(async()=>{if(await ee(K),te(t,"create","task"),!e.title||0===e.title.trim().length)throw new H("Task title is required","VALIDATION_ERROR");if(e.title.length>200)throw new H("Task title must be less than 200 characters","VALIDATION_ERROR");if(!e.projectId)throw new H("Project ID is required","VALIDATION_ERROR");const a=A(e.projectId);if(!a)throw new H("Project not found","NOT_FOUND");if(a.companyId!==t.companyId&&"super_admin"!==t.role)throw new H("Access denied to project","PERMISSION_DENIED");if(e.dueDate){const t=new Date(e.dueDate);if(isNaN(t.getTime()))throw new H("Invalid due date","VALIDATION_ERROR");if(t<new Date)throw new H("Due date cannot be in the past","VALIDATION_ERROR")}if(e.priority&&!["Low","Medium","High","Critical"].includes(e.priority))throw new H("Invalid priority level","VALIDATION_ERROR");const s={id:`task-${Date.now()}`,comments:[],history:[{timestamp:(new Date).toISOString(),author:t.name,change:"Created task."}],...e};var r;if(r=s,l.push(r),s.targetRoles&&s.targetRoles.length>0){b().filter(e=>e.companyId===a.companyId&&s.targetRoles?.includes(e.role)).forEach(e=>{R({userId:e.id,message:`New task for your role (${s.targetRoles?.join(", ")}): "${s.title}"`,timestamp:(new Date).toISOString(),read:!1,link:{projectId:s.projectId,screen:"task-detail",params:{taskId:s.id}}})})}return s}),le=async(e,t)=>{await ee(K),te(t,"update","task");const{task:a,index:s}=P(e.id);if(-1!==s&&a){const r={...e};if(r.history||(r.history=a.history?[...a.history]:[]),a.status!==r.status){if(("Foreman"===t.role||"operative"===t.role)&&"In Progress"===a.status&&"To Do"===r.status)throw new Error('You do not have permission to move this task back to "To Do".');r.history.push({timestamp:(new Date).toISOString(),author:t.name,change:`Changed status from ${a.status} to ${r.status}.`});const e=A(r.projectId),s={id:`ae-${Date.now()}`,type:"status_change",author:t.name,description:`updated task "${r.title}" to ${r.status}.`,timestamp:(new Date).toISOString(),projectId:r.projectId,projectName:e?.name||"Unknown Project",link:{screen:"task-detail",params:{taskId:r.id}}};T(s)}const i=e=>e.assignee?e.assignee:e.targetRoles&&e.targetRoles.length>0?`Role: ${e.targetRoles[0]}`:"Unassigned",n=i(a),o=i(r);return n!==o&&r.history.push({timestamp:(new Date).toISOString(),author:t.name,change:`Changed assignee from ${n} to ${o}.`}),O(s,r),r}return e},de=async(e,t,a,s)=>{await ee(K);const r={id:`c-${Date.now()}`,author:s.name,timestamp:(new Date).toISOString(),text:t,attachments:a},i=((e,t)=>{const a=S(e);return a&&a.comments.push(t),a})(e,r);if(i){const e=A(i.projectId),t={id:`ae-${Date.now()}`,type:"comment",author:s.name,description:`commented on task "${i.title}".`,timestamp:(new Date).toISOString(),projectId:i.projectId,projectName:e?.name||"Unknown Project",link:{screen:"task-detail",params:{taskId:i.id}}};T(t)}return r},me=async e=>(await ee(K),I().filter(t=>t.projectId===e)),pe=async e=>(await ee(K),L(e)),ue=async e=>(await ee(K),I().filter(t=>t.rfiNumber===e).sort((e,t)=>e.version-t.version)),he=async(e,t)=>{await ee(K),te(t,"create","rfi");const a=I().filter(t=>t.projectId===e.projectId),s=`RFI-${String(a.length+1).padStart(3,"0")}`,r={id:`rfi-${Date.now()}`,rfiNumber:s,version:1,comments:[],createdBy:t.id,dueDateNotified:!1,history:[{timestamp:(new Date).toISOString(),author:t.name,change:"Created RFI."}],...e};var i;return i=r,d.push(i),r},ge=async(e,t,a,s)=>{await ee(K),te(s,"update","rfi");const r=L(e);return r?(r.response=t,r.answeredBy=s.name,r.status="Closed",r.responseAttachments=a,r.history||(r.history=[]),r.history.push({timestamp:(new Date).toISOString(),author:s.name,change:"Answered RFI and changed status to Closed."}),r.createdBy&&R({userId:r.createdBy,message:`Your RFI "${r.subject}" has been answered.`,timestamp:(new Date).toISOString(),read:!1,link:{projectId:r.projectId,screen:"rfi-detail",params:{rfiId:r.id}}}),r):null},ye=async e=>(await ee(K),[...m].filter(t=>t.projectId===e)),we=async e=>(await ee(K),C(e)),ve=async(e,t)=>{await ee(K),te(t,"create","punchListItem");const a={id:`pl-${Date.now()}`,comments:[],history:[{timestamp:(new Date).toISOString(),author:t.name,change:"Created item."}],...e};var s;return s=a,m.push(s),a},fe=async(e,t)=>{await ee(K),te(t,"update","punchListItem");const{index:a,item:s}=(e=>{const t=m.findIndex(t=>t.id===e);return{item:t>-1?m[t]:null,index:t}})(e.id);if(-1!==a&&s){const r={...e};return r.history||(r.history=s.history?[...s.history]:[]),s.status!==r.status&&r.history.push({timestamp:(new Date).toISOString(),author:t.name,change:`Changed status from ${s.status} to ${r.status}.`}),s.assignee!==r.assignee&&r.history.push({timestamp:(new Date).toISOString(),author:t.name,change:`Changed assignee from ${s.assignee} to ${r.assignee}.`}),((e,t)=>{m[e]=t})(a,r),r}throw new Error("Could not update punch list item.")},xe=async(e,t,a)=>{await ee(K);const s={id:`c-${Date.now()}`,author:a.name,timestamp:(new Date).toISOString(),text:t},r=((e,t)=>{const a=C(e);return a&&a.comments.push(t),a})(e,s);if(r){const e=A(r.projectId),t={id:`ae-${Date.now()}`,type:"comment",author:a.name,description:`commented on punch list item "${r.title}".`,timestamp:(new Date).toISOString(),projectId:r.projectId,projectName:e?.name||"Unknown Project",link:{screen:"punch-list-item-detail",params:{itemId:r.id}}};T(t)}return s},je=async()=>(await ee(K),N()),be=async(e,t,a)=>{await ee(K),te(a,"create","drawing");const s=N().filter(a=>a.projectId===e&&a.drawingNumber===t.drawingNumber).reduce((e,t)=>Math.max(e,t.revision),-1),r=await He({title:t.title,number:t.drawingNumber}),i={id:`dwg-${Date.now()}`,projectId:e,drawingNumber:t.drawingNumber,title:t.title,revision:s+1,date:t.date,url:"/sample.pdf",tags:r};var n;return n=i,p.unshift(n),i},ke=async()=>(await ee(K),[...u]),_e=async()=>(await ee(K),[...h]),Ie=async()=>(await ee(K),[...g]),Ne=async e=>(await ee(K),M().filter(t=>t.projectId===e)),Me=async e=>(await ee(K),D(e)),Ae=async(e,t)=>{await ee(K),te(t,"create","dayworkSheet");const a=M().filter(t=>t.projectId===e.projectId),s=`T&M-${String(a.length+1).padStart(3,"0")}`,r={id:`dws-${Date.now()}`,ticketNumber:s,status:"Pending",items:[],approvedBy:null,approvedDate:null,...e};var i;return i=r,y.push(i),r},Se=async(e,t,a)=>{await ee(K),te(a,"approve","dayworkSheet");const s=D(e);return s&&"Pending"===s.status?(s.status=t,"Approved"===t&&(s.approvedBy=a.name,s.approvedDate=(new Date).toISOString()),s):null},Le=async(e,t)=>(await ee(K),((e,t)=>w.find(a=>a.userId===e&&a.date===t))(e,t)||null),Ce=async(e,t)=>{await ee(K),te(t,"create","dailyLog");const a={id:`log-${Date.now()}`,submittedAt:(new Date).toISOString(),...e};var s;s=a,w.push(s);const r=A(a.projectId);return T({id:`ae-${Date.now()}`,type:"log_submitted",author:t.name,description:"submitted a daily log.",timestamp:(new Date).toISOString(),projectId:a.projectId,projectName:r?.name||"Unknown Project",link:{screen:"daily-log",params:{}}}),a},De=async e=>(await ee(K),[...v].filter(t=>t.userId===e)),Pe=async(e,t,a)=>{await ee(K);const s={id:`te-${Date.now()}`,projectId:t,taskId:e,userId:a,startTime:(new Date).toISOString(),endTime:null};var r;return r=s,v.push(r),s},Re=async e=>{await ee(K);const t=((e,t)=>{const a=v.findIndex(t=>t.id===e);return a>-1?(v[a]={...v[a],...t},v[a]):null})(e,{endTime:(new Date).toISOString()});if(!t)throw new Error("Could not find time entry to stop.");return t},Te=async e=>(await ee(K),[...f].filter(t=>t.userId===e.id).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())),Oe=async(e,t)=>{await ee(100),(e=>{f.forEach(t=>{e.includes(t.id)&&(t.read=!0)})})(e)},ze=async e=>{await ee(K);const t=k().filter(t=>t.companyId===e.companyId).map(e=>e.id);return[...x].filter(e=>t.includes(e.projectId)).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())},Be=async e=>{await ee(K);const t=_().filter(t=>(t.assignee===e.name||t.targetRoles?.includes(e.role))&&"Done"!==t.status&&!t.dueDateNotified),a=new Date;a.setHours(0,0,0,0),t.forEach(t=>{const s=new Date(t.dueDate).getTime()-a.getTime(),r=Math.ceil(s/864e5);let i=!1,n="";if(r<0?(i=!0,n=`Task "${t.title}" is overdue by ${Math.abs(r)} day(s).`):r<=3&&(i=!0,n=`Task "${t.title}" is due in ${r} day(s).`),i){R({userId:e.id,message:n,timestamp:(new Date).toISOString(),read:!1,link:{projectId:t.projectId,screen:"task-detail",params:{taskId:t.id}}});const{index:a}=P(t.id);-1!==a&&O(a,{...t,dueDateNotified:!0})}})},Fe=async e=>{await ee(800);var t;const a=(t=e.id,j.filter(e=>e.userId===t)).filter(e=>"down"===e.feedback&&e.suggestionReason.includes("overdue")).length>2,s=_().filter(t=>(t.assignee===e.name||t.targetRoles?.includes(e.role))&&"Done"!==t.status).filter(e=>new Date(e.dueDate)<new Date);if(s.length>0){const e=s[0];return a?{title:"Help Unblock a Task",reason:`Task "${e.title}" is overdue. Sometimes adding a photo or a comment can help clarify the issue.`,action:{label:"Add Comment/Photo",link:{projectId:e.projectId,screen:"task-detail",params:{taskId:e.id}}}}:{title:"Focus on Overdue Task",reason:`Your task "${e.title}" is overdue. It's a high priority.`,action:{label:"View Task",link:{projectId:e.projectId,screen:"task-detail",params:{taskId:e.id}}}}}const r=I().filter(t=>t.createdBy===e.id&&"Open"===t.status);if(r.length>0){const e=r[0];return{title:"Follow up on RFI",reason:`You're waiting for a response on "${e.subject}".`,action:{label:"View RFI",link:{projectId:e.projectId,screen:"rfi-detail",params:{rfiId:e.id}}}}}return null},Ee=async(e,t,a)=>{await ee(600);const s=[],r=e.filter(e=>new Date(e.dueDate)<new Date&&"Done"!==e.status);return r.length>0&&s.push({type:"risk",title:"Overdue Task Alert",message:`You have ${r.length} overdue task(s). Prioritize "${r[0].title}" to avoid project delays.`}),a.condition.toLowerCase().includes("rain")&&s.push({type:"alert",title:"Weather Alert: Rain",message:"Rain is in the forecast. Ensure all materials are covered and site is secure."}),e.length>5&&s.push({type:"tip",title:"Productivity Tip",message:"You have a busy day! Tackle your highest priority task first to build momentum."}),s},$e=async(e,t,a)=>{await ee(K);(e=>{j.push(e)})({id:`fb-${Date.now()}`,suggestionTitle:e.title,suggestionReason:e.reason,feedback:t,timestamp:(new Date).toISOString(),userId:a.id})},We=async(e,t)=>{t.map(e=>`- ${e.name} (ID: ${e.id}, Role: ${e.role})`).join("\n"),(new Date).toISOString().split("T")[0];try{return{id:"mock-suggestion",title:"Review Project Status",description:"Check project progress and upcoming deadlines",priority:"medium",estimatedTime:"10 minutes",link:{screen:"projects",params:{}}}}catch(a){return null}},qe=async(e,t,a)=>{await ee(800);let s="";const r=(e+" "+t).toLowerCase();r.includes("structural")||r.includes("beam")||r.includes("column")||r.includes("foundation")?s="Structural Engineer":r.includes("architectural")||r.includes("finish")||r.includes("window")||r.includes("door")?s="Architect Team":(r.includes("hvac")||r.includes("plumbing")||r.includes("electrical"))&&(s="MEP Consultant");const i=new Date;return i.setDate(i.getDate()+7),{suggestedAssignee:a.includes(s)?s:"",suggestedDueDate:i.toISOString().split("T")[0]}},He=async e=>{e.title,e.number;try{return["General","Drawing","Construction"]}catch(t){const a=new Set,s=`${e.title} ${e.number}`.toLowerCase(),r={A:"Architectural",S:"Structural",M:"Mechanical",E:"Electrical",P:"Plumbing",C:"Civil"},i=e.number.charAt(0).toUpperCase();r[i]&&a.add(r[i]);const n=/(?:level|floor|lvl)[\s-]*(\d+)/i,o=s.match(n);o&&o[1]&&a.add(`Level ${o[1]}`);return["Floor Plan","Elevation","Section","Details","Framing","Site Plan","Roof","Foundation","For Construction","Permit Set"].forEach(e=>{s.includes(e.toLowerCase())&&a.add(e)}),Array.from(a)}},Ue=async()=>{if(!s)return await ee(K),[{id:"agent-hse-sentinel",name:"HSE Sentinel AI",description:"Advanced health, safety, and environmental monitoring agent that analyzes site conditions and provides real-time safety recommendations.",category:"safety",priceMonthly:49.99,priceYearly:499.99,features:["Real-time safety monitoring","Incident prediction","Compliance checking","Safety report generation"],capabilities:["Image analysis for PPE compliance","Risk assessment automation","Safety training recommendations","Incident documentation"],isActive:!0,isFeatured:!0,minPlan:"basic"},{id:"agent-quality-inspector",name:"Quality Inspector AI",description:"Automated quality control agent that inspects work progress and identifies potential issues before they become problems.",category:"quality",priceMonthly:39.99,priceYearly:399.99,features:["Automated quality checks","Progress monitoring","Defect detection","Quality reports"],capabilities:["Photo analysis for quality issues","Progress tracking","Compliance verification","Quality metrics dashboard"],isActive:!0,isFeatured:!0,minPlan:"basic"},{id:"agent-productivity-optimizer",name:"Productivity Optimizer AI",description:"Analyzes project data to identify bottlenecks and suggest optimizations for improved efficiency.",category:"productivity",priceMonthly:59.99,priceYearly:599.99,features:["Performance analytics","Bottleneck identification","Resource optimization","Productivity insights"],capabilities:["Data analysis and reporting","Predictive scheduling","Resource allocation","Performance benchmarking"],isActive:!0,isFeatured:!1,minPlan:"professional"}];try{const{data:e,error:t}=await s.from("ai_agents").select("*").eq("is_active",!0).order("is_featured",{ascending:!1}).order("name");if(t)throw t;return e?.map(e=>({id:e.id,name:e.name,description:e.description,category:e.category,priceMonthly:e.price_monthly,priceYearly:e.price_yearly,features:e.features||[],capabilities:e.capabilities||[],iconUrl:e.icon_url,bannerUrl:e.banner_url,isActive:e.is_active,isFeatured:e.is_featured,minPlan:e.min_plan}))||[]}catch(e){return[]}},Ve=async e=>{if("super_admin"!==e.role)throw new Error("Access denied: Super admin required");if(!s)return await ee(K),[{id:"comp-1",name:"Demo Construction Company",userCount:8,projectCount:5,plan:{id:"plan-professional",name:"Professional Plan",description:"Ideal for growing construction companies",priceMonthly:79.99,priceYearly:799.99,maxUsers:25,maxProjects:15,features:["Everything in Basic","Advanced Reporting"],aiAgentsIncluded:["agent-hse-sentinel","agent-quality-inspector"],aiAgentsLimit:5,storageGb:100,isActive:!0,isFeatured:!0,sortOrder:2}}];try{const{data:e,error:t}=await s.from("companies").select("\n                    *,\n                    company_plans (\n                        id, name, description, price_monthly, price_yearly,\n                        max_users, max_projects, features, ai_agents_included,\n                        ai_agents_limit, storage_gb, is_active, is_featured, sort_order\n                    )\n                ").order("created_at",{ascending:!1});if(t)throw t;return await Promise.all((e||[]).map(async e=>{const[t,a]=await Promise.all([s.from("profiles").select("*",{count:"exact",head:!0}).eq("company_id",e.id),s.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",e.id)]);return{id:e.id,name:e.name,userCount:t.count||0,projectCount:a.count||0,plan:e.company_plans?{id:e.company_plans.id,name:e.company_plans.name,description:e.company_plans.description,priceMonthly:e.company_plans.price_monthly,priceYearly:e.company_plans.price_yearly,maxUsers:e.company_plans.max_users,maxProjects:e.company_plans.max_projects,features:e.company_plans.features||[],aiAgentsIncluded:e.company_plans.ai_agents_included||[],aiAgentsLimit:e.company_plans.ai_agents_limit,storageGb:e.company_plans.storage_gb,isActive:e.company_plans.is_active,isFeatured:e.company_plans.is_featured,sortOrder:e.company_plans.sort_order}:void 0}}))}catch(t){throw t}},Ye=async(e,t,a,r="company_admin")=>{if("super_admin"!==e.role)throw new Error("Access denied: Super admin required");if(!s)return await ee(400),{id:`inv-${Date.now()}`,email:t,companyName:a,invitedBy:e.id,invitationType:r,status:"pending",invitationToken:`inv_${Date.now()}_mock`,expiresAt:new Date(Date.now()+6048e5).toISOString(),metadata:{},createdAt:(new Date).toISOString()};try{const i=`inv_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n=new Date;n.setDate(n.getDate()+7);const{data:o,error:c}=await s.from("platform_invitations").insert({email:t,company_name:a,invited_by:e.id,invitation_type:r,invitation_token:i,expires_at:n.toISOString(),status:"pending",metadata:{invitedByName:e.name,invitedByEmail:e.email}}).select().single();if(c)throw c;return await at(e,"invitation_sent","platform_invitation",o.id,null,{email:t,companyName:a,invitationType:r}),{id:o.id,email:o.email,companyName:o.company_name,invitedBy:o.invited_by,invitationType:o.invitation_type,status:o.status,invitationToken:o.invitation_token,expiresAt:o.expires_at,acceptedAt:o.accepted_at,metadata:o.metadata,createdAt:o.created_at}}catch(i){throw i}},Ge=async()=>{if(!s)return await ee(K),[{id:"plan-basic",name:"Basic Plan",description:"Perfect for small construction teams",priceMonthly:29.99,priceYearly:299.99,maxUsers:5,maxProjects:3,features:["Project Management","Task Tracking","Basic Reporting"],aiAgentsIncluded:["agent-hse-sentinel"],aiAgentsLimit:1,storageGb:10,isActive:!0,isFeatured:!1,sortOrder:1}];try{const{data:e,error:t}=await s.from("company_plans").select("*").eq("is_active",!0).order("sort_order");if(t)throw t;return(e||[]).map(e=>({id:e.id,name:e.name,description:e.description,priceMonthly:e.price_monthly,priceYearly:e.price_yearly,maxUsers:e.max_users,maxProjects:e.max_projects,features:e.features||[],aiAgentsIncluded:e.ai_agents_included||[],aiAgentsLimit:e.ai_agents_limit,storageGb:e.storage_gb,isActive:e.is_active,isFeatured:e.is_featured,sortOrder:e.sort_order}))}catch(e){return[]}},Qe=async(e,t,a)=>{if("super_admin"!==e.role)throw new Error("Access denied: Super admin required");if(!s)return await ee(K),!0;try{const{error:r}=await s.from("companies").update({plan_id:a,plan_started_at:(new Date).toISOString()}).eq("id",t);if(r)throw r;return await at(e,"plan_updated","company",t,null,{newPlanId:a}),!0}catch(r){return!1}},Je=async(e,t)=>{if("super_admin"!==e.role)throw new Error("Access denied: Super admin required");if(!s){await ee(K);return{id:`plan-${Date.now()}`,...t}}try{const{data:a,error:r}=await s.from("company_plans").insert({name:t.name,description:t.description,price_monthly:t.priceMonthly,price_yearly:t.priceYearly,max_users:t.maxUsers,max_projects:t.maxProjects,features:t.features,ai_agents_included:t.aiAgentsIncluded,ai_agents_limit:t.aiAgentsLimit,storage_gb:t.storageGb,is_active:t.isActive,is_featured:t.isFeatured,sort_order:t.sortOrder}).select().single();if(r)throw r;return await at(e,"plan_created","company_plan",a.id,null,{planName:t.name}),{id:a.id,name:a.name,description:a.description,priceMonthly:a.price_monthly,priceYearly:a.price_yearly,maxUsers:a.max_users,maxProjects:a.max_projects,features:a.features||[],aiAgentsIncluded:a.ai_agents_included||[],aiAgentsLimit:a.ai_agents_limit,storageGb:a.storage_gb,isActive:a.is_active,isFeatured:a.is_featured,sortOrder:a.sort_order}}catch(a){throw a}},Xe=async(e,t,a)=>{if("super_admin"!==e.role)throw new Error("Access denied: Super admin required");if(!s)return await ee(K),{id:t,name:"Updated Plan",description:"Updated description",priceMonthly:50,priceYearly:500,maxUsers:10,maxProjects:5,features:["Updated features"],aiAgentsIncluded:[],aiAgentsLimit:2,storageGb:50,isActive:!0,isFeatured:!1,sortOrder:1,...a};try{const r={};void 0!==a.name&&(r.name=a.name),void 0!==a.description&&(r.description=a.description),void 0!==a.priceMonthly&&(r.price_monthly=a.priceMonthly),void 0!==a.priceYearly&&(r.price_yearly=a.priceYearly),void 0!==a.maxUsers&&(r.max_users=a.maxUsers),void 0!==a.maxProjects&&(r.max_projects=a.maxProjects),void 0!==a.features&&(r.features=a.features),void 0!==a.aiAgentsIncluded&&(r.ai_agents_included=a.aiAgentsIncluded),void 0!==a.aiAgentsLimit&&(r.ai_agents_limit=a.aiAgentsLimit),void 0!==a.storageGb&&(r.storage_gb=a.storageGb),void 0!==a.isActive&&(r.is_active=a.isActive),void 0!==a.isFeatured&&(r.is_featured=a.isFeatured),void 0!==a.sortOrder&&(r.sort_order=a.sortOrder);const{data:i,error:n}=await s.from("company_plans").update(r).eq("id",t).select().single();if(n)throw n;return await at(e,"plan_updated","company_plan",t,null,a),{id:i.id,name:i.name,description:i.description,priceMonthly:i.price_monthly,priceYearly:i.price_yearly,maxUsers:i.max_users,maxProjects:i.max_projects,features:i.features||[],aiAgentsIncluded:i.ai_agents_included||[],aiAgentsLimit:i.ai_agents_limit,storageGb:i.storage_gb,isActive:i.is_active,isFeatured:i.is_featured,sortOrder:i.sort_order}}catch(r){throw r}},Ze=async(e,t,a)=>{if("super_admin"!==e.role)throw new Error("Access denied: Super admin required");if(!s)return await ee(K),!0;try{const{error:r}=await s.from("company_plans").update({is_active:a}).eq("id",t);if(r)throw r;return await at(e,"plan_status_toggled","company_plan",t,null,{isActive:a}),!0}catch(r){return!1}},Ke=async(e,t)=>{if("super_admin"!==e.role)throw new Error("Access denied: Super admin required");if(!s){await ee(K);return{id:`agent-${Date.now()}`,...t}}try{const{data:a,error:r}=await s.from("ai_agents").insert({name:t.name,description:t.description,category:t.category,price_monthly:t.priceMonthly,price_yearly:t.priceYearly,features:t.features,capabilities:t.capabilities,icon_url:t.iconUrl,banner_url:t.bannerUrl,is_active:t.isActive,is_featured:t.isFeatured,min_plan:t.minPlan}).select().single();if(r)throw r;return await at(e,"agent_created","ai_agent",a.id,null,{agentName:t.name}),{id:a.id,name:a.name,description:a.description,category:a.category,priceMonthly:a.price_monthly,priceYearly:a.price_yearly,features:a.features||[],capabilities:a.capabilities||[],iconUrl:a.icon_url,bannerUrl:a.banner_url,isActive:a.is_active,isFeatured:a.is_featured,minPlan:a.min_plan}}catch(a){throw a}},et=async(e,t,a)=>{if("super_admin"!==e.role)throw new Error("Access denied: Super admin required");if(!s)return await ee(K),{id:t,name:"Updated Agent",description:"Updated description",category:"safety",priceMonthly:50,priceYearly:500,features:["Updated features"],capabilities:["Updated capabilities"],isActive:!0,isFeatured:!1,minPlan:"basic",...a};try{const r={};void 0!==a.name&&(r.name=a.name),void 0!==a.description&&(r.description=a.description),void 0!==a.category&&(r.category=a.category),void 0!==a.priceMonthly&&(r.price_monthly=a.priceMonthly),void 0!==a.priceYearly&&(r.price_yearly=a.priceYearly),void 0!==a.features&&(r.features=a.features),void 0!==a.capabilities&&(r.capabilities=a.capabilities),void 0!==a.iconUrl&&(r.icon_url=a.iconUrl),void 0!==a.bannerUrl&&(r.banner_url=a.bannerUrl),void 0!==a.isActive&&(r.is_active=a.isActive),void 0!==a.isFeatured&&(r.is_featured=a.isFeatured),void 0!==a.minPlan&&(r.min_plan=a.minPlan);const{data:i,error:n}=await s.from("ai_agents").update(r).eq("id",t).select().single();if(n)throw n;return await at(e,"agent_updated","ai_agent",t,null,a),{id:i.id,name:i.name,description:i.description,category:i.category,priceMonthly:i.price_monthly,priceYearly:i.price_yearly,features:i.features||[],capabilities:i.capabilities||[],iconUrl:i.icon_url,bannerUrl:i.banner_url,isActive:i.is_active,isFeatured:i.is_featured,minPlan:i.min_plan}}catch(r){throw r}},tt=async(e,t,a)=>{if("super_admin"!==e.role)throw new Error("Access denied: Super admin required");if(!s)return await ee(K),!0;try{const{error:r}=await s.from("ai_agents").update({is_active:a}).eq("id",t);if(r)throw r;return await at(e,"agent_status_toggled","ai_agent",t,null,{isActive:a}),!0}catch(r){return!1}},at=async(e,t,a,r,i,n)=>{if(s)try{await s.from("platform_audit_log").insert({user_id:e.id,company_id:e.companyId,action:t,resource_type:a,resource_id:r,old_values:i,new_values:n,ip_address:null,user_agent:navigator.userAgent})}catch(o){}},st=async(e,t=50,a=0)=>{if("super_admin"!==e.role)throw new Error("Access denied: Super admin required");if(!s)return await ee(K),[{id:"audit-1",userId:e.id,companyId:"comp-1",action:"invitation_sent",resourceType:"platform_invitation",resourceId:"inv-1",newValues:{email:"test@example.com"},createdAt:(new Date).toISOString()}];try{const{data:e,error:r}=await s.from("platform_audit_log").select("\n                    *,\n                    profiles!platform_audit_log_user_id_fkey (name, email),\n                    companies!platform_audit_log_company_id_fkey (name)\n                ").order("created_at",{ascending:!1}).range(a,a+t-1);if(r)throw r;return(e||[]).map(e=>({id:e.id,userId:e.user_id,companyId:e.company_id,action:e.action,resourceType:e.resource_type,resourceId:e.resource_id,oldValues:e.old_values,newValues:e.new_values,ipAddress:e.ip_address,userAgent:e.user_agent,createdAt:e.created_at}))}catch(r){return[]}},rt=async e=>{if("super_admin"!==e.role)throw new Error("Access denied: Super admin required");if(!s)return await ee(K),[];try{const{data:e,error:t}=await s.from("platform_invitations").select("*").order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(e=>({id:e.id,email:e.email,companyName:e.company_name,invitedBy:e.invited_by,invitationType:e.invitation_type,status:e.status,invitationToken:e.invitation_token,expiresAt:e.expires_at,acceptedAt:e.accepted_at,metadata:e.metadata,createdAt:e.created_at}))}catch(t){return[]}},it=async e=>U(async()=>{const t=await re(e),a=[];for(const r of t.slice(0,5))try{const t=await ie(r.id,e),s=await me(r.id),i=await ye(r.id),n=X(),o=await n.predictProjectOutcome(r,t,s,i);a.push({projectId:r.id,projectName:r.name,prediction:o})}catch(s){}return a},0,[]),nt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),ot=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),ct=({className:t,title:a})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[e.jsx("title",{children:a}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),lt=({className:t,title:a})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[e.jsx("title",{children:a}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})]}),dt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),mt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-1.125 0-2.062.938-1.976 2.062a48.427 48.427 0 001.123 5.801c.065.21.1.433.1.664a.75.75 0 00.75.75h4.5a.75.75 0 00.75-.75c0-.231-.035-.454-.1-.664m0 0l4.5 0M12.75 15h3.75"})}),pt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.122 2.122l7.81-7.81"})}),ut=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 22.5l-.648-1.938a3.375 3.375 0 00-2.672-2.672L11.25 18l1.938-.648a3.375 3.375 0 002.672-2.672L16.25 13.5l.648 1.938a3.375 3.375 0 002.672 2.672L21.5 18l-1.938.648a3.375 3.375 0 00-2.672 2.672z"})}),ht=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0l3.181-3.183m-11.664 0l3.181-3.183a8.25 8.25 0 00-11.664 0l3.181 3.183"})}),gt=({className:t,title:a})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[e.jsx("title",{children:a}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})]}),yt=({className:t,title:a})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[e.jsx("title",{children:a}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})]}),wt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6.375a.75.75 0 01.75.75v3.375a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75V7.5a.75.75 0 01.75-.75zm0 8.25h6.375a.75.75 0 01.75.75v3.375a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v-3.375a.75.75 0 01.75-.75z"})}),vt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.67c.61.91 1.074 1.94 1.074 3.071v.003zM12 6a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5zM12 12.75c-1.83 0-3.528-.426-4.999-1.135A3.75 3.75 0 0112 6c1.83 0 3.528.426 4.999 1.135A3.75 3.75 0 0112 12.75z"})}),ft=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),xt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),jt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM10.5 7.5v6m3-3h-6"})}),bt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM13.5 10.5h-6"})}),kt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})}),_t=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 15.91a4.5 4.5 0 01-6.328 0m6.328 0l-6.328-6.328m6.328 6.328L9.582 9.582m6.328 6.328a4.5 4.5 0 000-6.328m0 6.328L9.582 9.582"})]}),It=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 12h-2.25m-1.666 5.834l-1.591-1.591M12 21.75V19.5m-5.834-.166l1.591-1.591M3.75 12h2.25m1.666-5.834l1.591 1.591"})}),Nt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.067-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Mt=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.174C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.174 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),At=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),St=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.5A.75.75 0 014.5 3.75h1.5a.75.75 0 01.75.75v1.5a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75v-1.5zM3.75 10.5a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75v1.5a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75v-1.5zM3.75 16.5a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75v1.5a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75v-1.5zM9.75 4.5a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75v1.5a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75v-1.5zM9.75 16.5a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75v1.5a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75v-1.5zM15.75 4.5a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75v1.5a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75v-1.5zM15.75 10.5a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75v1.5a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75v-1.5zM15.75 16.5a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75v1.5a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75v-1.5z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75v4.5"})]}),Lt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),Ct=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})}),Dt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Pt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 22.5l-.648-1.938a3.375 3.375 0 00-2.672-2.672L11.25 18l1.938-.648a3.375 3.375 0 002.672-2.672L16.25 13.5l.648 1.938a3.375 3.375 0 002.672 2.672L21.5 18l-1.938.648a3.375 3.375 0 00-2.672 2.672z"})}),Rt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18M-4.5 12h21"})}),Tt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Ot=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"})}),zt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Bt=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-1.5h5.25m-5.25 0h3m-3 0h-1.5m3 0h.008v.008H9.75v-.008zM9.75 9h.008v.008H9.75V9zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 4.5h.008v.008H9.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12a7.5 7.5 0 11-15 0 7.5 7.5 0 0115 0z"})]}),Ft=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.5c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75A2.25 2.25 0 0116.5 4.5c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.148 7.25M6.633 10.5v3.75m-3.833 2.25h10.342a1.125 1.125 0 001.125-1.125v-6.671M6.633 10.5c-.247 0-.477.02-.702.057a11.95 11.95 0 00-2.148 7.25"})}),Et=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.5c.806 0 1.533.446 2.031 1.08a9.041 9.041 0 012.861 2.4c.723.384 1.35.956 1.653 1.715a4.498 4.498 0 00.322 1.672V21a.75.75 0 01-.75.75A2.25 2.25 0 0113.5 19.5c0-1.152.26-2.243.723-3.218.266-.558-.107-1.282-.725-1.282H9.375c-1.026 0-1.945-.694-2.054-1.715-.045-.422-.068-.85-.068-1.285a11.95 11.95 0 012.148-7.25M6.633 10.5v-3.75m-3.833-2.25h10.342a1.125 1.125 0 001.125-1.125v-6.671M6.633 10.5c-.247 0-.477-.02-.702-.057a11.95 11.95 0 00-2.148-7.25"})}),$t=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Wt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.006 3 11.5c0 1.831.613 3.534 1.638 4.903L3 21l5.75-1.526A10.024 10.024 0 0012 20.25zM12 12.75h.007v.008H12v-.008zm-2.25-.008h.007v.008h-.007v-.008zm4.5 0h.008v.008h-.008v-.008z"})}),qt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})}),Ht=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ut=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),Vt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),Yt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286z"})}),Gt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Qt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 7.756a4.5 4.5 0 010 8.488M7.5 10.5h5.25m-5.25 3h5.25M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Jt=e=>{const[a,r]=t.useState([]),[i,n]=t.useState([]),[o,c]=t.useState(!1),[l,d]=t.useState(null),m=t.useCallback(async()=>{if(e){c(!0),d(null);try{const e=await Ue();r(e)}catch(t){d(t.message||"Failed to load AI agents")}finally{c(!1)}}},[e]),p=t.useCallback(async()=>{if(e){c(!0),d(null);try{const t=await(async e=>{if(!s)return await ee(K),[{id:"sub-1",companyId:e.companyId,agentId:"agent-hse-sentinel",status:"active",billingCycle:"monthly",pricePaid:49.99,startedAt:(new Date).toISOString(),autoRenew:!0,agent:{id:"agent-hse-sentinel",name:"HSE Sentinel AI",description:"Advanced health, safety, and environmental monitoring agent.",category:"safety",priceMonthly:49.99,priceYearly:499.99,features:["Real-time safety monitoring","Incident prediction"],capabilities:["Image analysis for PPE compliance","Risk assessment automation"],isActive:!0,isFeatured:!0,minPlan:"basic"}}];try{const{data:t,error:a}=await s.from("company_subscriptions").select("\n                    *,\n                    ai_agents (\n                        id,\n                        name,\n                        description,\n                        category,\n                        price_monthly,\n                        price_yearly,\n                        features,\n                        capabilities,\n                        icon_url,\n                        banner_url,\n                        is_active,\n                        is_featured,\n                        min_plan\n                    )\n                ").eq("company_id",e.companyId).eq("status","active");if(a)throw a;return t?.map(e=>({id:e.id,companyId:e.company_id,agentId:e.agent_id,status:e.status,billingCycle:e.billing_cycle,pricePaid:e.price_paid,startedAt:e.started_at,expiresAt:e.expires_at,autoRenew:e.auto_renew,agent:e.ai_agents?{id:e.ai_agents.id,name:e.ai_agents.name,description:e.ai_agents.description,category:e.ai_agents.category,priceMonthly:e.ai_agents.price_monthly,priceYearly:e.ai_agents.price_yearly,features:e.ai_agents.features||[],capabilities:e.ai_agents.capabilities||[],iconUrl:e.ai_agents.icon_url,bannerUrl:e.ai_agents.banner_url,isActive:e.ai_agents.is_active,isFeatured:e.ai_agents.is_featured,minPlan:e.ai_agents.min_plan}:void 0}))||[]}catch(l){return[]}})(e);n(t)}catch(t){d(t.message||"Failed to load subscriptions")}finally{c(!1)}}},[e]),u=t.useCallback(async(t,a)=>{if(!e)return!1;c(!0),d(null);try{const r=await(async(e,t,a)=>{if(!["company_admin","super_admin"].includes(e.role))throw new Error("Only company administrators can manage subscriptions");if(!s)return await ee(400),{id:`sub-${Date.now()}`,companyId:e.companyId,agentId:t,status:"active",billingCycle:a,pricePaid:"monthly"===a?49.99:499.99,startedAt:(new Date).toISOString(),autoRenew:!0};try{const{data:r,error:i}=await s.from("ai_agents").select("*").eq("id",t).single();if(i||!r)throw new Error("Agent not found");const n="monthly"===a?r.price_monthly:r.price_yearly,o=new Date;"monthly"===a?o.setMonth(o.getMonth()+1):o.setFullYear(o.getFullYear()+1);const{data:c,error:l}=await s.from("company_subscriptions").insert({company_id:e.companyId,agent_id:t,billing_cycle:a,price_paid:n,expires_at:o.toISOString(),status:"active",auto_renew:!0}).select().single();if(l)throw l;return{id:c.id,companyId:c.company_id,agentId:c.agent_id,status:c.status,billingCycle:c.billing_cycle,pricePaid:c.price_paid,startedAt:c.started_at,expiresAt:c.expires_at,autoRenew:c.auto_renew}}catch(l){throw l}})(e,t,a);return!!r&&(await p(),!0)}catch(r){return d(r.message||"Failed to subscribe to agent"),!1}finally{c(!1)}},[e,p]),h=t.useCallback(e=>i.some(t=>t.agentId===e&&"active"===t.status),[i]),g=t.useCallback(e=>a.find(t=>t.id===e),[a]),y=t.useCallback(e=>i.find(t=>t.agentId===e&&"active"===t.status),[i]),w=e?{user:e,company:{id:e.companyId,name:"Current Company"},subscriptions:i,availableAgents:a,hasAgentAccess:h}:null;return t.useEffect(()=>{e?(m(),p()):(r([]),n([]),d(null))},[e,m,p]),{availableAgents:a,companySubscriptions:i,isLoading:o,error:l,tenantContext:w,refreshAgents:m,refreshSubscriptions:p,subscribeToAgent:u,hasAgentAccess:h,getAgentById:g,getSubscriptionByAgentId:y}},Xt=[{title:"Invoicing",description:"Create and manage client invoices.",icon:({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"})}),screen:"placeholder-tool",permission:{subject:"accounting",action:"create"}},{title:"Chart of Accounts",description:"Manage your company's financial accounts.",icon:({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0012 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52l2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 01-2.153.344c-.69 0-1.35-.11-1.986-.338a5.988 5.988 0 01-2.153-.344c-.484-.174-.711-.703-.59-1.202L18.75 4.971zM12 4.5v.75m-6.75-.471l-2.62 10.726c-.122.499.106 1.028.589 1.202a5.989 5.989 0 002.153.344c.69 0 1.35-.11 1.986-.338a5.989 5.989 0 002.153-.344c.484-.174.711-.703.59-1.202L5.25 4.971z"})}),screen:"placeholder-tool",permission:{subject:"accounting",action:"read"}},{title:"Tax Preparation",description:"AI-assisted tax document preparation.",icon:({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008zm0 3h.008v.008H8.25v-.008zm0 3h.008v.008H8.25v-.008zm3-6h.008v.008H11.25v-.008zm0 3h.008v.008H11.25v-.008zm0 3h.008v.008H11.25v-.008zm3-6h.008v.008H14.25v-.008zm0 3h.008v.008H14.25v-.008zM4.5 3.75v16.5a2.25 2.25 0 002.25 2.25h10.5a2.25 2.25 0 002.25-2.25V3.75m-15 0h15M4.5 3.75a2.25 2.25 0 012.25-2.25h10.5a2.25 2.25 0 012.25 2.25m-15 0h15"})}),screen:"placeholder-tool",permission:{subject:"accounting",action:"read"}}],Zt=[{title:"Quality Control Vision",description:"AI-powered image analysis for construction quality assessment",icon:Mt,screen:"quality-control-vision",permission:{subject:"document",action:"read"}},{title:"Document Intelligence",description:"Extract insights from construction documents and blueprints",icon:$t,screen:"document-intelligence",permission:{subject:"document",action:"read"}},{title:"Risk Assessment AI",description:"Predictive analytics for project risk management",icon:Yt,screen:"risk-assessment-ai",permission:{subject:"task",action:"read"}},{title:"Cost Optimization",description:"AI-driven cost analysis and budget optimization",icon:Qt,screen:"cost-optimization",permission:{subject:"accounting",action:"read"}}],Kt=[{title:"Drawing Sets",description:"View and manage all project drawings.",icon:Ot,screen:"drawings",permission:{subject:"drawing",action:"read"},requiresProjectContext:!0},{title:"Photo Galleries",description:"Browse and upload site photos.",icon:Mt,screen:"photos",permission:{subject:"photo",action:"read"},requiresProjectContext:!0},{title:"Official Documents",description:"Store contracts, permits, and reports.",icon:$t,screen:"documents",permission:{subject:"document",action:"read"},requiresProjectContext:!0}],ea=[{title:"Live Time Entry",description:"Clock in and out for tasks.",icon:Gt,screen:"placeholder-tool",permission:{subject:"timeEntry",action:"create"}},{title:"Timesheet Reports",description:"Generate and review timesheets.",icon:({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h12M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0l-3.75 5.25L9 3m0 0l-3.75 5.25M6 16.5h12M9 16.5v3.75m6-3.75v3.75"})}),screen:"placeholder-tool",permission:{subject:"timeEntry",action:"read"}}],ta=[{title:"Risk Assessments (RAMS)",description:"Create and manage Risk Assessment Method Statements.",icon:Yt,screen:"placeholder-tool",permission:{subject:"document",action:"create"}},{title:"Training Matrix",description:"Track employee qualifications and training.",icon:({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),screen:"placeholder-tool",permission:{subject:"user",action:"read"}}],aa=[{title:"Company Payroll",description:"Process payroll for all employees.",icon:Qt,screen:"placeholder-tool",permission:{subject:"accounting",action:"create"}},{title:"Project Budgets",description:"Track budgets and spending per project.",icon:({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})}),screen:"placeholder-tool",permission:{subject:"accounting",action:"read"}}],sa=[{title:"CRM",description:"Manage client relationships and leads.",icon:vt,screen:"placeholder-tool",permission:{subject:"user",action:"read"}},{title:"Procurement Hub",description:"Manage suppliers and procurement processes.",icon:({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.072a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25v-4.072M20.25 14.15V12a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 12v2.15m16.5 0v-2.15"})}),screen:"placeholder-tool",permission:{subject:"document",action:"read"}}],ra=({title:t,description:a,icon:s,onClick:r})=>e.jsxs("button",{onClick:r,className:"group block text-left bg-white p-6 rounded-lg shadow-md border border-gray-100 hover:shadow-xl hover:-translate-y-1 hover:border-blue-300 transition-all duration-300 ease-in-out",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-100 group-hover:bg-blue-200 transition-colors",children:e.jsx(s,{className:"w-8 h-8 text-blue-600"})}),e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-blue-700",children:t})})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-3",children:a})]}),ia=Object.freeze(Object.defineProperty({__proto__:null,default:({currentUser:t,navigateTo:a,goBack:s,openProjectSelector:r,onDeepLink:i,can:n})=>{const o=Xt.filter(e=>n(e.permission.action,e.permission.subject));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("header",{className:"bg-white p-4 flex items-center border-b mb-8",children:[e.jsx("button",{onClick:s,className:"mr-4 p-2 rounded-full hover:bg-gray-100",children:e.jsx(nt,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Accounting"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage company finances."})]})]}),e.jsxs("main",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.map(t=>e.jsx(ra,{title:t.title,description:t.description,icon:t.icon,onClick:()=>(e=>{e.requiresProjectContext?r(`Select a project for ${e.title}`,t=>{i(t,e.screen,{title:e.title})}):i(null,e.screen,{title:e.title})})(t)},t.title)),0===o.length&&e.jsx("p",{className:"text-gray-500 md:col-span-2 lg:col-span-3",children:"You do not have access to any accounting tools."})]})]})}},Symbol.toStringTag,{value:"Module"})),na=Object.freeze(Object.defineProperty({__proto__:null,default:({currentUser:t,navigateTo:a,goBack:s,openProjectSelector:r,onDeepLink:i,can:n})=>{const o=Zt.filter(e=>n(e.permission.action,e.permission.subject));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("header",{className:"bg-white p-4 flex items-center border-b mb-8",children:[e.jsx("button",{onClick:s,className:"mr-4 p-2 rounded-full hover:bg-gray-100",children:e.jsx(nt,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Tools"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your suite of intelligent agents."})]})]}),e.jsxs("main",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.map(t=>e.jsx(ra,{title:t.title,description:t.description,icon:t.icon,onClick:()=>(e=>{e.requiresProjectContext?r(`Select a project for ${e.title}`,t=>{i(t,e.screen,{title:e.title})}):i(null,e.screen,{title:e.title})})(t)},t.title)),0===o.length&&e.jsx("p",{className:"text-gray-500 md:col-span-2 lg:col-span-3",children:"You do not have access to any AI tools."})]})]})}},Symbol.toStringTag,{value:"Module"})),oa=Object.freeze(Object.defineProperty({__proto__:null,default:({currentUser:t,navigateTo:a,goBack:s,openProjectSelector:r,onDeepLink:i,can:n})=>{const o=Kt.filter(e=>n(e.permission.action,e.permission.subject));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("header",{className:"bg-white p-4 flex items-center border-b mb-8",children:[e.jsx("button",{onClick:s,className:"mr-4 p-2 rounded-full hover:bg-gray-100",children:e.jsx(nt,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Document Management"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Centralized repository for all project files."})]})]}),e.jsxs("main",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.map(t=>e.jsx(ra,{title:t.title,description:t.description,icon:t.icon,onClick:()=>(e=>{e.requiresProjectContext?r(`Select a project for ${e.title}`,t=>{i(t,e.screen,{title:e.title})}):i(null,e.screen,{title:e.title})})(t)},t.title)),0===o.length&&e.jsx("p",{className:"text-gray-500 md:col-span-2 lg:col-span-3",children:"You do not have access to any document tools."})]})]})}},Symbol.toStringTag,{value:"Module"})),ca=Object.freeze(Object.defineProperty({__proto__:null,default:({currentUser:t,navigateTo:a,goBack:s,openProjectSelector:r,onDeepLink:i,can:n})=>{const o=ea.filter(e=>n(e.permission.action,e.permission.subject));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("header",{className:"bg-white p-4 flex items-center border-b mb-8",children:[e.jsx("button",{onClick:s,className:"mr-4 p-2 rounded-full hover:bg-gray-100",children:e.jsx(nt,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Time Tracking"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage timesheets and labor costs."})]})]}),e.jsxs("main",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.map(t=>e.jsx(ra,{title:t.title,description:t.description,icon:t.icon,onClick:()=>(e=>{e.requiresProjectContext?r(`Select a project for ${e.title}`,t=>{i(t,e.screen,{title:e.title})}):i(null,e.screen,{title:e.title})})(t)},t.title)),0===o.length&&e.jsx("p",{className:"text-gray-500 md:col-span-2 lg:col-span-3",children:"You do not have access to any time tracking tools."})]})]})}},Symbol.toStringTag,{value:"Module"})),la=Object.freeze(Object.defineProperty({__proto__:null,default:({currentUser:t,navigateTo:a,goBack:s,openProjectSelector:r,onDeepLink:i,can:n})=>{const o=ta.filter(e=>n(e.permission.action,e.permission.subject));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("header",{className:"bg-white p-4 flex items-center border-b mb-8",children:[e.jsx("button",{onClick:s,className:"mr-4 p-2 rounded-full hover:bg-gray-100",children:e.jsx(nt,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Project Operations"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage compliance, safety, and training."})]})]}),e.jsxs("main",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.map(t=>e.jsx(ra,{title:t.title,description:t.description,icon:t.icon,onClick:()=>(e=>{e.requiresProjectContext?r(`Select a project for ${e.title}`,t=>{i(t,e.screen,{title:e.title})}):i(null,e.screen,{title:e.title})})(t)},t.title)),0===o.length&&e.jsx("p",{className:"text-gray-500 md:col-span-2 lg:col-span-3",children:"You do not have access to any project operations tools."})]})]})}},Symbol.toStringTag,{value:"Module"})),da=Object.freeze(Object.defineProperty({__proto__:null,default:({currentUser:t,navigateTo:a,goBack:s,openProjectSelector:r,onDeepLink:i,can:n})=>{const o=aa.filter(e=>n(e.permission.action,e.permission.subject));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("header",{className:"bg-white p-4 flex items-center border-b mb-8",children:[e.jsx("button",{onClick:s,className:"mr-4 p-2 rounded-full hover:bg-gray-100",children:e.jsx(nt,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Financial Management"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Oversee company-wide financial health."})]})]}),e.jsxs("main",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.map(t=>e.jsx(ra,{title:t.title,description:t.description,icon:t.icon,onClick:()=>(e=>{e.requiresProjectContext?r(`Select a project for ${e.title}`,t=>{i(t,e.screen,{title:e.title})}):i(null,e.screen,{title:e.title})})(t)},t.title)),0===o.length&&e.jsx("p",{className:"text-gray-500 md:col-span-2 lg:col-span-3",children:"You do not have access to any financial management tools."})]})]})}},Symbol.toStringTag,{value:"Module"})),ma=Object.freeze(Object.defineProperty({__proto__:null,default:({currentUser:t,navigateTo:a,goBack:s,openProjectSelector:r,onDeepLink:i,can:n})=>{const o=sa.filter(e=>n(e.permission.action,e.permission.subject));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("header",{className:"bg-white p-4 flex items-center border-b mb-8",children:[e.jsx("button",{onClick:s,className:"mr-4 p-2 rounded-full hover:bg-gray-100",children:e.jsx(nt,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Business Development"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage clients, leads, and procurement."})]})]}),e.jsxs("main",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.map(t=>e.jsx(ra,{title:t.title,description:t.description,icon:t.icon,onClick:()=>(e=>{e.requiresProjectContext?r(`Select a project for ${e.title}`,t=>{i(t,e.screen,{title:e.title})}):i(null,e.screen,{title:e.title})})(t)},t.title)),0===o.length&&e.jsx("p",{className:"text-gray-500 md:col-span-2 lg:col-span-3",children:"You do not have access to any business development tools."})]})]})}},Symbol.toStringTag,{value:"Module"})),pa=Object.freeze(Object.defineProperty({__proto__:null,default:({currentUser:a,navigateTo:s,goBack:r})=>{const{availableAgents:i,companySubscriptions:n,isLoading:o,error:c,subscribeToAgent:l,hasAgentAccess:d,tenantContext:m}=Jt(a),[p,u]=t.useState("all"),[h,g]=t.useState(null),y=[{id:"all",name:"All Agents",icon:"🤖"},{id:"safety",name:"Safety",icon:"🦺"},{id:"quality",name:"Quality",icon:"✅"},{id:"productivity",name:"Productivity",icon:"📈"},{id:"compliance",name:"Compliance",icon:"📋"},{id:"analytics",name:"Analytics",icon:"📊"},{id:"documentation",name:"Documentation",icon:"📄"},{id:"communication",name:"Communication",icon:"💬"},{id:"planning",name:"Planning",icon:"📅"}],w="all"===p?i:i.filter(e=>e.category===p),v=async(e,t)=>{g(e.id);try{await l(e.id,t)}catch(a){}finally{g(null)}},f=({agent:t})=>{const a=d(t.id),r=n.find(e=>e.agentId===t.id);return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-shadow",children:[t.isFeatured&&e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-center py-2 text-sm font-semibold",children:"⭐ Featured Agent"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white text-xl font-bold",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.name}),e.jsxs("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full",children:[y.find(e=>e.id===t.category)?.icon," ",t.category]})]})]}),a&&e.jsxs("div",{className:"flex items-center space-x-1 text-green-600 bg-green-50 px-2 py-1 rounded-full text-sm",children:[e.jsx("span",{children:"✅"}),e.jsx("span",{children:"Active"})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:t.description}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Key Features:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:t.features.slice(0,3).map((t,a)=>e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),e.jsx("span",{children:t})]},a))})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Pricing:"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["$",t.priceMonthly,"/mo"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["$",t.priceYearly,"/year (save ",Math.round(100*(1-t.priceYearly/(12*t.priceMonthly))),"%)"]})]})]}),a?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-green-700 font-medium",children:["Subscribed (",r?.billingCycle,")"]}),e.jsxs("span",{className:"text-green-600",children:["$",r?.pricePaid]})]})}),e.jsx("button",{onClick:()=>s("ai-agent-detail",{agentId:t.id}),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Use Agent"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>v(t,"monthly"),disabled:h===t.id,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium disabled:bg-gray-400",children:h===t.id?"Subscribing...":"Subscribe Monthly"}),e.jsx("button",{onClick:()=>v(t,"yearly"),disabled:h===t.id,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium disabled:bg-gray-400",children:h===t.id?"Subscribing...":"Subscribe Yearly"})]})]})]})]})};return o&&0===i.length?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI Agents Marketplace"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Enhance your construction projects with powerful AI agents"})]}),e.jsx("button",{onClick:r,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors",children:"← Back"})]}),m&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-blue-900",children:[m.company.name," - Active Subscriptions"]}),e.jsxs("p",{className:"text-blue-700 text-sm",children:["You have ",m.subscriptions.length," active AI agent subscriptions"]})]}),e.jsx("div",{className:"text-blue-600 text-2xl",children:"🏢"})]})})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(t=>e.jsxs("button",{onClick:()=>u(t.id),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(p===t.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[t.icon," ",t.name]},t.id))})}),c&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("div",{className:"text-red-800",children:c})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(t=>e.jsx(f,{agent:t},t.id))}),0===w.length&&!o&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"🤖"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No agents found"}),e.jsx("p",{className:"text-gray-600",children:"all"===p?"No AI agents are currently available.":`No agents found in the ${p} category.`})]})]})}},Symbol.toStringTag,{value:"Module"}));export{me as $,ht as A,wt as B,mt as C,Ot as D,Rt as E,nt as F,Ee as G,Ft as H,At as I,se as J,Nt as K,yt as L,ft as M,Gt as N,oe as O,pt as P,Ct as Q,le as R,dt as S,Bt as T,vt as U,de as V,ut as W,Dt as X,ce as Y,We as Z,Ce as _,F as a,pe as a0,ue as a1,ge as a2,he as a3,qe as a4,qt as a5,Ht as a6,Te as a7,Oe as a8,X as a9,Ge as aA,Qe as aB,rt as aC,Ye as aD,Xe as aE,Je as aF,Ze as aG,Ue as aH,et as aI,Ke as aJ,tt as aK,st as aL,De as aM,Re as aN,Pe as aO,it as aP,Z as aQ,ia as aR,na as aS,oa as aT,ca as aU,la as aV,da as aW,ma as aX,pa as aY,Jt as aa,zt as ab,ye as ac,we as ad,fe as ae,xe as af,ve as ag,xt as ah,je as ai,be as aj,It as ak,kt as al,_t as am,bt as an,jt as ao,Ne as ap,Me as aq,ae as ar,Se as as,Ae as at,Tt as au,ke as av,St as aw,Lt as ax,Ie as ay,Ve as az,W as b,q as c,$ as d,B as e,Mt as f,ct as g,$t as h,Ut as i,Et as j,re as k,Vt as l,Fe as m,ot as n,Wt as o,Be as p,ne as q,ze as r,$e as s,lt as t,_e as u,E as v,Le as w,ie as x,gt as y,Pt as z};

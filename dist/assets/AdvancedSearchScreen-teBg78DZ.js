import{r as e,j as t}from"./react-core-FGHlRSau.js";import{o as s,b5 as a,az as r,ad as l,D as n,ac as i,bc as c}from"./icon-pack-tZfEXMDa.js";import"./vendor-BX0gT1qP.js";const d=({onSearch:d,onResultSelect:o,placeholder:u="Search projects, tasks, users...",className:g=""})=>{const[x,m]=e.useState(!1),[p,h]=e.useState(""),[b,y]=e.useState(!1),[j,N]=e.useState([]),[f,v]=e.useState(!1),[w,k]=e.useState({query:"",dateRange:{start:"",end:""},status:[],priority:[],assignee:[],tags:[],location:"",budgetRange:{min:0,max:1e6},projectType:[]}),S=()=>{const e={...w,query:p};d(e),(async e=>{v(!0),await new Promise(e=>setTimeout(e,500));const t=[{id:"1",type:"project",title:"Office Building Construction",description:"New 10-story office building in downtown",status:"active",priority:"high",assignee:"John Smith",tags:["construction","commercial"],location:"Downtown",budget:25e5,created_at:"2024-01-15",updated_at:"2024-01-20",relevance_score:.95},{id:"2",type:"task",title:"Foundation Inspection",description:"Inspect foundation before concrete pour",status:"pending",priority:"urgent",assignee:"Sarah Johnson",tags:["inspection","foundation"],location:"Site A",created_at:"2024-01-18",updated_at:"2024-01-19",relevance_score:.87},{id:"3",type:"user",title:"Mike Wilson",description:"Senior Project Manager",status:"active",priority:"medium",tags:["manager","senior"],location:"Main Office",created_at:"2023-06-01",updated_at:"2024-01-15",relevance_score:.72}].filter(t=>!(e.query&&!t.title.toLowerCase().includes(e.query.toLowerCase())&&!t.description.toLowerCase().includes(e.query.toLowerCase())||e.status.length>0&&!e.status.includes(t.status)||e.priority.length>0&&!e.priority.includes(t.priority)||e.tags.length>0&&!e.tags.some(e=>t.tags.includes(e))));N(t),v(!1)})(e)},R=(e,t)=>{k(s=>({...s,[e]:t}))},C=e=>{switch(e){case"project":return"🏗️";case"task":return"✅";case"user":return"👤";case"document":return"📄";default:return"📁"}},_=e=>{switch(e){case"urgent":return"text-red-600 bg-red-50";case"high":return"text-orange-600 bg-orange-50";case"medium":return"text-yellow-600 bg-yellow-50";case"low":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},D=e=>{switch(e){case"active":return"text-blue-600 bg-blue-50";case"completed":return"text-green-600 bg-green-50";case"pending":return"text-yellow-600 bg-yellow-50";case"cancelled":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}};return t.jsxs("div",{className:`relative ${g}`,children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(s,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{type:"text",value:p,onChange:e=>h(e.target.value),onFocus:()=>m(!0),onKeyDown:e=>{"Enter"===e.key&&S()},className:"block w-full pl-10 pr-20 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:u}),t.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center",children:[t.jsx("button",{onClick:()=>y(!b),className:"p-2 mr-2 rounded-md transition-colors "+(b?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"),title:"Toggle filters",children:t.jsx(a,{className:"h-4 w-4"})}),t.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Search"})]})]}),b&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsx("div",{className:"space-y-2",children:["planning","active","on-hold","completed","cancelled"].map(e=>t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:w.status.includes(e),onChange:t=>{t.target.checked?R("status",[...w.status,e]):R("status",w.status.filter(t=>t!==e))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700 capitalize",children:e})]},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),t.jsx("div",{className:"space-y-2",children:["low","medium","high","urgent"].map(e=>t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:w.priority.includes(e),onChange:t=>{t.target.checked?R("priority",[...w.priority,e]):R("priority",w.priority.filter(t=>t!==e))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700 capitalize",children:e})]},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{type:"date",value:w.dateRange.start,onChange:e=>R("dateRange",{...w.dateRange,start:e.target.value}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"Start date"}),t.jsx("input",{type:"date",value:w.dateRange.end,onChange:e=>R("dateRange",{...w.dateRange,end:e.target.value}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"End date"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Range"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{type:"number",value:w.budgetRange.min,onChange:e=>R("budgetRange",{...w.budgetRange,min:Number(e.target.value)}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"Min budget"}),t.jsx("input",{type:"number",value:w.budgetRange.max,onChange:e=>R("budgetRange",{...w.budgetRange,max:Number(e.target.value)}),className:"block w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"Max budget"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),t.jsx("input",{type:"text",value:w.location,onChange:e=>R("location",e.target.value),className:"block w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"Enter location"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:()=>{k({query:"",dateRange:{start:"",end:""},status:[],priority:[],assignee:[],tags:[],location:"",budgetRange:{min:0,max:1e6},projectType:[]}),h(""),N([])},className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Clear All Filters"})})]})}),x&&(j.length>0||f)&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg z-40 max-h-96 overflow-y-auto",children:f?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),"Searching..."]}):t.jsx("div",{className:"divide-y",children:j.map(e=>t.jsx("div",{onClick:()=>{o(e),m(!1)},className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-lg",children:C(e.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${D(e.status)}`,children:e.status}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${_(e.priority)}`,children:e.priority})]})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.description}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[e.assignee&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(r,{className:"w-3 h-3"}),e.assignee]}),e.location&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(l,{className:"w-3 h-3"}),e.location]}),e.budget&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(n,{className:"w-3 h-3"}),"$",e.budget.toLocaleString()]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(i,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString()]})]}),e.tags.length>0&&t.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[t.jsx(c,{className:"w-3 h-3 text-gray-400"}),t.jsx("div",{className:"flex gap-1",children:e.tags.map(e=>t.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:e},e))})]})]})]})},e.id))})}),x&&t.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>m(!1)})]})},o=({currentUser:s})=>{const[a,r]=e.useState([]),[l,n]=e.useState(null);return t.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Advanced Search"}),t.jsx("p",{className:"text-gray-600",children:"Search across projects, tasks, users, and documents with powerful filters"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx(d,{onSearch:e=>{},onResultSelect:e=>{n(e)},placeholder:"Search projects, tasks, users, documents...",className:"mb-6"}),l&&t.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Selected Result"}),t.jsxs("div",{className:"text-sm text-blue-800",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Type:"})," ",l.type]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Title:"})," ",l.title]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Description:"})," ",l.description]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Status:"})," ",l.status]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Priority:"})," ",l.priority]})]})]})]})]})};export{o as AdvancedSearchScreen};

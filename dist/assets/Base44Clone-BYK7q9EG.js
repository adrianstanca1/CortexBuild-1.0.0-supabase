import{r as e,j as s}from"./react-core-FGHlRSau.js";import{a as t,N as r,C as a}from"./index-DOZ8AkwU.js";import{b4 as l,q as n,b5 as i,t as o,X as c,o as d,f as x,b6 as m,H as u,b7 as p,b8 as h,E as g,_ as b,p as j,al as y,A as f,b3 as v,i as N,V as w,Y as k,b9 as C,$ as S,a0 as D}from"./icon-pack-tZfEXMDa.js";import"./vendor-BX0gT1qP.js";import"./supabase-DKHGIEFa.js";import"./module-screens-Dy02k3Q1.js";import"./google-ai-BrP-uSwO.js";import"./developer-tools-B-VjJpHg.js";import"./axios-ei4kQ0Q2.js";import"./monaco-Bh77eHRb.js";const L=({userId:r,isOpen:a,onClose:u,filters:p})=>{const{notifications:h,loading:g,error:b,summary:j,markAsRead:y,markAllAsRead:f,deleteNotification:v,dismissNotification:N}=t(),[w,k]=e.useState(p||{}),[C,S]=e.useState(""),[D,L]=e.useState(new Set),[_,P]=e.useState("all"),[A,I]=e.useState(!1),z=e.useMemo(()=>{let e=h;if("unread"===_?e=e.filter(e=>!e.read):"priority"===_&&(e=e.filter(e=>"high"===e.priority||"urgent"===e.priority)),C.trim()){const s=C.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(s)||e.message.toLowerCase().includes(s))}return w.type&&w.type.length>0&&(e=e.filter(e=>w.type.includes(e.type))),w.category&&w.category.length>0&&(e=e.filter(e=>w.category.includes(e.category))),w.priority&&w.priority.length>0&&(e=e.filter(e=>w.priority.includes(e.priority))),void 0!==w.read&&(e=e.filter(e=>e.read===w.read)),e},[h,w,C,_]),B=e.useMemo(()=>{const e={};return z.forEach(s=>{const t=new Date(s.created_at),r=new Date,a=new Date(r);let l;a.setDate(a.getDate()-1),l=t.toDateString()===r.toDateString()?"Today":t.toDateString()===a.toDateString()?"Yesterday":t.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),e[l]||(e[l]=[]),e[l].push(s)}),e},[z]),T=async e=>{await y(e)},R=async e=>{await v(e)},O=async e=>{await N(e)},F=async()=>{const e=Array.from(D).map(e=>y(e));await Promise.all(e),L(new Set)},W=async()=>{const e=Array.from(D).map(e=>v(e));await Promise.all(e),L(new Set)};return a?s.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",onClick:u,children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-25"}),s.jsx("div",{className:"absolute right-0 top-0 h-full w-full max-w-2xl bg-white shadow-xl transform transition-transform duration-300 ease-in-out",onClick:e=>e.stopPropagation(),children:s.jsxs("div",{className:"flex h-full flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4 bg-gray-50",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("span",{children:[z.filter(e=>!e.read).length," unread"]}),s.jsxs("span",{children:[z.length," total"]}),j&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"•"}),s.jsxs("span",{children:[j.high_priority," high priority"]})]})]})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[D.size>0&&s.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[s.jsx("button",{onClick:F,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Mark selected as read",children:s.jsx(l,{className:"h-4 w-4"})}),s.jsx("button",{onClick:W,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete selected",children:s.jsx(n,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[{key:"all",label:"All"},{key:"unread",label:"Unread"},{key:"priority",label:"Priority"}].map(({key:e,label:t})=>s.jsx("button",{onClick:()=>P(e),className:"px-3 py-1 text-sm rounded-md transition-colors "+(_===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:t},e))}),s.jsx("button",{onClick:()=>I(!A),className:"p-2 rounded-lg transition-colors "+(A?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"),title:"Toggle filters",children:s.jsx(i,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",title:"Notification settings",children:s.jsx(o,{className:"h-4 w-4"})}),s.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",title:"Close",children:s.jsx(c,{className:"h-4 w-4"})})]})]}),A&&s.jsx("div",{className:"border-b border-gray-200 p-4 bg-gray-50",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search notifications...",value:C,onChange:e=>S(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:w.read||"",onChange:e=>k(s=>({...s,read:e.target.value?"true"===e.target.value:void 0})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Status"}),s.jsx("option",{value:"true",children:"Read"}),s.jsx("option",{value:"false",children:"Unread"})]}),s.jsxs("select",{value:w.priority?.[0]||"",onChange:e=>k(s=>({...s,priority:e.target.value?[e.target.value]:void 0})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Priorities"}),s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:g?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),s.jsx("span",{className:"text-gray-500",children:"Loading notifications..."})]})}):b?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(x,{className:"mb-4 h-12 w-12 text-red-300"}),s.jsx("p",{className:"text-sm font-medium text-red-900",children:"Error loading notifications"}),s.jsx("p",{className:"text-sm text-red-500 mt-1",children:b})]}):0===z.length?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(m,{className:"mb-4 h-12 w-12 text-gray-300"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:C||Object.keys(w).length>0?"No notifications match your filters":"No notifications"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:C||Object.keys(w).length>0?"Try adjusting your search or filters":"Notifications will appear here when you receive them"})]}):s.jsxs("div",{className:"divide-y divide-gray-200",children:[z.length>0&&s.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:D.size===z.length,onChange:()=>{D.size===z.length?L(new Set):L(new Set(z.map(e=>e.id)))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-600",children:D.size>0?`${D.size} selected`:"Select all"})]}),D.size>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:F,className:"px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded",children:"Mark as read"}),s.jsx("button",{onClick:W,className:"px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded",children:"Delete"})]})]})}),Object.entries(B).map(([e,t])=>s.jsxs("div",{children:[s.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e}),s.jsxs("p",{className:"text-xs text-gray-500",children:[t.length," notifications"]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:t.map(e=>s.jsx(M,{notification:e,isSelected:D.has(e.id),onSelect:e=>{const s=new Set(D);s.has(e)?s.delete(e):s.add(e),L(s)},onMarkAsRead:T,onDelete:R,onDismiss:O,onClick:()=>{e.read||T(e.id),e.action_url&&(window.location.href=e.action_url)}},e.id))})]},e))]})}),z.length>0&&s.jsx("div",{className:"border-t border-gray-200 px-6 py-3 bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:f,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Mark all as read"}),s.jsx("div",{className:"text-xs text-gray-500",children:j&&s.jsxs(s.Fragment,{children:[j.by_priority.urgent>0&&s.jsxs("span",{className:"text-red-600 font-medium mr-2",children:[j.by_priority.urgent," urgent"]}),j.by_priority.high>0&&s.jsxs("span",{className:"text-orange-600 font-medium mr-2",children:[j.by_priority.high," high"]})]})})]})})]})})]}):null},M=({notification:t,isSelected:r,onSelect:a,onMarkAsRead:l,onDelete:i,onDismiss:o,onClick:c})=>{const[d,x]=e.useState(!1),m=(e,s)=>{e.stopPropagation(),s()};return s.jsxs("div",{className:`relative px-6 py-4 transition-all duration-200 cursor-pointer group ${t.read?"hover:bg-gray-50":"bg-blue-50 hover:bg-blue-100"} ${r?"ring-2 ring-blue-500 ring-inset":""}`,onClick:e=>{e.stopPropagation(),c()},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[s.jsx("div",{className:"absolute left-3 top-4",children:s.jsx("input",{type:"checkbox",checked:r,onChange:()=>a(t.id),onClick:e=>e.stopPropagation(),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsxs("div",{className:"flex items-start gap-3 ml-6",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("div",{className:"h-2 w-2 rounded-full "+(t.read?"bg-transparent":"bg-blue-600")})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium truncate "+(t.read?"text-gray-700":"text-gray-900"),children:t.title}),s.jsx("p",{className:"mt-1 text-sm line-clamp-2 "+(t.read?"text-gray-500":"text-gray-700"),children:t.message}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${_(t.priority)}`,children:t.priority}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:t.category}),s.jsx("span",{className:"text-xs text-gray-400",children:P(t.created_at)})]})]}),s.jsxs("div",{className:"flex items-center gap-1 transition-opacity "+(d?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[!t.read&&s.jsx("button",{onClick:e=>m(e,()=>l(t.id)),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Mark as read",children:s.jsx(u,{className:"h-4 w-4"})}),s.jsx("button",{onClick:e=>m(e,()=>o(t.id)),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Dismiss",children:s.jsx(p,{className:"h-4 w-4"})}),s.jsx("button",{onClick:e=>m(e,()=>i(t.id)),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete",children:s.jsx(n,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"More options",children:s.jsx(h,{className:"h-4 w-4"})})]})]})})]})]})};function _(e){switch(e){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}}function P(e){const s=new Date(e),t=new Date,r=Math.floor((t.getTime()-s.getTime())/1e3);return r<60?"Just now":r<3600?`${Math.floor(r/60)}m ago`:r<86400?`${Math.floor(r/3600)}h ago`:r<604800?`${Math.floor(r/86400)}d ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}const A=({isOpen:t,onClose:r,onSuccess:a})=>{const[l,n]=e.useState({name:"",description:"",client_id:"",location:"",budget:"",start_date:"",end_date:"",status:"planning",priority:"medium",type:"commercial"}),[i,o]=e.useState([]),[c,d]=e.useState(!1),[x,m]=e.useState(null);e.useEffect(()=>{t&&u()},[t]);const u=async()=>{try{const e=await fetch("/api/clients?limit=100"),s=await e.json();s.success&&o(s.data)}catch(e){}};if(!t)return null;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"New Project"}),s.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),d(!0),m(null);try{const e=localStorage.getItem("user"),s=e?JSON.parse(e):null,t=s?.company_id||"company-1",i=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,company_id:t,client_id:parseInt(l.client_id),budget:parseFloat(l.budget)||0})}),o=await i.json();o.success?(a(),r(),n({name:"",description:"",client_id:"",location:"",budget:"",start_date:"",end_date:"",status:"planning",priority:"medium",type:"commercial"})):m(o.error||"Failed to create project")}catch(s){m(s.message||"Failed to create project")}finally{d(!1)}},className:"p-6 space-y-6",children:[x&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:x}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name *"}),s.jsx("input",{type:"text",required:!0,value:l.name,onChange:e=>n({...l,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:l.description,onChange:e=>n({...l,description:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Project description"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client *"}),s.jsxs("select",{required:!0,value:l.client_id,onChange:e=>n({...l,client_id:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select client"}),i.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),s.jsx("input",{type:"text",value:l.location,onChange:e=>n({...l,location:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Project location"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget"}),s.jsx("input",{type:"number",value:l.budget,onChange:e=>n({...l,budget:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),s.jsxs("select",{value:l.type,onChange:e=>n({...l,type:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"residential",children:"Residential"}),s.jsx("option",{value:"commercial",children:"Commercial"}),s.jsx("option",{value:"industrial",children:"Industrial"}),s.jsx("option",{value:"infrastructure",children:"Infrastructure"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),s.jsx("input",{type:"date",value:l.start_date,onChange:e=>n({...l,start_date:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),s.jsx("input",{type:"date",value:l.end_date,onChange:e=>n({...l,end_date:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:l.status,onChange:e=>n({...l,status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"in progress",children:"In Progress"}),s.jsx("option",{value:"on hold",children:"On Hold"}),s.jsx("option",{value:"completed",children:"Completed"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{value:l.priority,onChange:e=>n({...l,priority:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"critical",children:"Critical"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"inline-block animate-spin",children:"⏳"}),s.jsx("span",{children:"Creating..."})]}):s.jsx("span",{children:"Create Project"})})]})]})]})})},I=()=>{const[e,t]=useState(!1),[a,l]=useState("user-2"),[n,i]=useState(""),[o,c]=useState("all"),[d,x]=useState("all"),[m,u]=useState(null),[p,h]=useState([]),[g,b]=useState(!0),[j,y]=useState(null),[f,v]=useState(1),[N,w]=useState(1),[k,C]=useState(!1);useEffect(()=>{m||S()},[n,o,f,m]);const S=async()=>{try{b(!0),y(null);const e=new URLSearchParams({page:f.toString(),limit:"20"});n&&e.append("search",n),"all"!==o&&e.append("status",o);const s=await fetch(`/api/projects?${e}`),t=await s.json();t.success?(h(t.data),w(t.pagination?.totalPages||1)):y(t.error||"Failed to fetch projects")}catch(e){y(e.message||"Failed to fetch projects"),h(D)}finally{b(!1)}};if(m)return s.jsx(ProjectDetailPage,{projectId:m,onBack:()=>u(null)});const D=[{id:"1",name:"ASasdad",client:"Green Valley Homes",location:"rm82ul",budget:123333,spent:0,progress:0,status:"planning",priority:"medium",startDate:null,endDate:null},{id:"2",name:"Downtown Office Complex",client:"Metro Construction Group",location:"Manhattan, NY",budget:125e5,spent:52e5,progress:45,status:"in progress",priority:"high",startDate:"Jan 15, 2024",endDate:"Jun 30, 2025"},{id:"3",name:"Riverside Luxury Apartments",client:"Green Valley Homes",location:"Los Angeles, CA",budget:89e5,spent:21e5,progress:28,status:"in progress",priority:"medium",startDate:"Mar 1, 2024",endDate:"Aug 31, 2025"},{id:"4",name:"Manufacturing Facility Expansion",client:"Industrial Partners LLC",location:"Chicago, IL",budget:15e6,spent:0,progress:0,status:"planning",priority:"critical",startDate:"Jun 1, 2024",endDate:"Dec 31, 2025"},{id:"5",name:"Riverside Apartments",client:"Green Valley Homes",location:"456 River Rd",budget:32e5,spent:18e5,progress:56,status:"in progress",priority:"medium",startDate:"Mar 1, 2024",endDate:"Dec 15, 2024"},{id:"6",name:"City Bridge Renovation",client:"Metro City Council",location:"Old Town Bridge",budget:18e5,spent:0,progress:0,status:"approved",priority:"critical",startDate:"Jul 1, 2024",endDate:"Mar 31, 2025"},{id:"7",name:"Downtown Office Complex",client:"Sunset Developments",location:"123 Main St, Downtown",budget:55e5,spent:21e5,progress:38,status:"in progress",priority:"high",startDate:"Jan 15, 2024",endDate:"Jun 30, 2025"}],M=e=>null==e?"£0":`£${e.toLocaleString()}`;return s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Projects"}),s.jsx(r,{userId:a,onOpenNotifications:()=>t(!0),showUnreadCount:!0,maxCount:99})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Search projects...",value:n,onChange:e=>i(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),s.jsxs("select",{value:o,onChange:e=>c(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"in progress",children:"In Progress"}),s.jsx("option",{value:"approved",children:"Approved"}),s.jsx("option",{value:"completed",children:"Completed"})]}),s.jsxs("select",{value:d,onChange:e=>x(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"residential",children:"Residential"}),s.jsx("option",{value:"commercial",children:"Commercial"}),s.jsx("option",{value:"industrial",children:"Industrial"})]}),s.jsxs("button",{type:"button",onClick:()=>C(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"New Project"})]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(e=>{return s.jsxs("div",{onClick:()=>u(e.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all cursor-pointer hover:scale-105",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"flex items-start justify-between mb-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${r=e.status,{planning:"bg-yellow-100 text-yellow-800","in progress":"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800"}[r]||"bg-gray-100 text-gray-800"}`,children:e.status}),s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t=e.priority,{low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"}[t]||"bg-gray-100 text-gray-800"}`,children:e.priority})]})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.client})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:e.location}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Budget:"}),s.jsx("span",{className:"font-semibold text-gray-900",children:M(e.budget)})]}),e.spent>0&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Spent:"}),s.jsx("span",{className:"font-semibold text-gray-900",children:M(e.spent)})]}),e.progress>0&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Progress:"}),s.jsxs("span",{className:"font-semibold text-gray-900",children:[e.progress,"%"]})]}),e.startDate&&e.endDate&&s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-2",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{children:e.startDate}),s.jsx("span",{className:"mx-1",children:"→"}),s.jsx("span",{children:e.endDate})]})]}),s.jsxs("button",{type:"button",className:"w-full bg-gray-50 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s.jsx("span",{children:"View Details"})]})]},e.id);var t,r})}),s.jsx(L,{userId:a,isOpen:e,onClose:()=>t(!1)}),s.jsx(A,{isOpen:k,onClose:()=>C(!1),onSuccess:()=>{S(),C(!1)}})]})},z=({isOpen:t,onClose:r,onSuccess:a})=>{const[l,n]=e.useState({name:"",contact_name:"",email:"",phone:"",address:"",city:"",state:"",zip_code:"",type:"commercial",status:"active"}),[i,o]=e.useState(!1),[c,d]=e.useState(null);if(!t)return null;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"New Client"}),s.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o(!0),d(null);try{const e=localStorage.getItem("user"),s=e?JSON.parse(e):null,t=s?.company_id||"company-1",i=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,company_id:t})}),o=await i.json();o.success?(a(),r(),n({name:"",contact_name:"",email:"",phone:"",address:"",city:"",state:"",zip_code:"",type:"commercial",status:"active"})):d(o.error||"Failed to create client")}catch(s){d(s.message||"Failed to create client")}finally{o(!1)}},className:"p-6 space-y-6",children:[c&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),s.jsx("input",{type:"text",required:!0,value:l.name,onChange:e=>n({...l,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter company name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Name"}),s.jsx("input",{type:"text",value:l.contact_name,onChange:e=>n({...l,contact_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter contact name"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:l.email,onChange:e=>n({...l,email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"email@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",value:l.phone,onChange:e=>n({...l,phone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(555) 123-4567"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("input",{type:"text",value:l.address,onChange:e=>n({...l,address:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Street address"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),s.jsx("input",{type:"text",value:l.city,onChange:e=>n({...l,city:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"City"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),s.jsx("input",{type:"text",value:l.state,onChange:e=>n({...l,state:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"State"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zip Code"}),s.jsx("input",{type:"text",value:l.zip_code,onChange:e=>n({...l,zip_code:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"12345"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Type"}),s.jsxs("select",{value:l.type,onChange:e=>n({...l,type:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"residential",children:"Residential"}),s.jsx("option",{value:"commercial",children:"Commercial"}),s.jsx("option",{value:"industrial",children:"Industrial"}),s.jsx("option",{value:"government",children:"Government"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:l.status,onChange:e=>n({...l,status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"pending",children:"Pending"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:i?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"inline-block animate-spin",children:"⏳"}),s.jsx("span",{children:"Creating..."})]}):s.jsx("span",{children:"Create Client"})})]})]})]})})},B=({isOpen:t,onClose:r,onSuccess:a,client:l})=>{const[n,i]=e.useState({name:"",contact_name:"",email:"",phone:"",address:"",city:"",state:"",zip_code:""}),[o,c]=e.useState(!1),[d,x]=e.useState(null);if(e.useEffect(()=>{l&&i({name:l.name||"",contact_name:l.contact_name||"",email:l.email||"",phone:l.phone||"",address:l.address||"",city:l.city||"",state:l.state||"",zip_code:l.zip_code||""})},[l]),!t||!l)return null;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Client"}),s.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c(!0),x(null);try{const e=await fetch(`/api/clients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),s=await e.json();s.success?(a(),r()):x(s.error||"Failed to update client")}catch(s){x(s.message||"Failed to update client")}finally{c(!1)}},className:"p-6 space-y-4",children:[d&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:d}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:n.name,onChange:e=>i({...n,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name"}),s.jsx("input",{type:"text",value:n.contact_name,onChange:e=>i({...n,contact_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:n.email,onChange:e=>i({...n,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:n.phone,onChange:e=>i({...n,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),s.jsx("input",{type:"text",value:n.address,onChange:e=>i({...n,address:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),s.jsx("input",{type:"text",value:n.city,onChange:e=>i({...n,city:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),s.jsx("input",{type:"text",value:n.state,onChange:e=>i({...n,state:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),s.jsx("input",{type:"text",value:n.zip_code,onChange:e=>i({...n,zip_code:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:o?"Saving...":"Save Changes"})]})]})]})})},T=({isOpen:e,onClose:t,onConfirm:r,title:a,message:l,itemName:n,loading:i=!1})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 rounded-full",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:a}),s.jsxs("p",{className:"text-sm text-gray-600 text-center mb-4",children:[l,n&&s.jsxs("span",{className:"block mt-2 font-medium text-gray-900",children:['"',n,'"']})]}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:s.jsx("p",{className:"text-xs text-red-800 text-center",children:"⚠️ This action cannot be undone"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{type:"button",onClick:t,disabled:i,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"button",onClick:r,disabled:i,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:i?"Deleting...":"Delete"})]})]})})}):null,R=()=>{const[t,r]=e.useState(""),[a,l]=e.useState("all"),[n,i]=e.useState("all"),[o,c]=e.useState([]),[d,x]=e.useState(!0),[m,u]=e.useState(null),[p,h]=e.useState(1),[g,b]=e.useState(1),[j,y]=e.useState(!1),[f,v]=e.useState(!1),[N,w]=e.useState(!1),[k,C]=e.useState(null),[S,D]=e.useState(!1);e.useEffect(()=>{L()},[t,a,p]);const L=async()=>{try{x(!0),u(null);const e=new URLSearchParams({page:p.toString(),limit:"20"});t&&e.append("search",t),"all"!==a&&e.append("status",a);const s=localStorage.getItem("token")||localStorage.getItem("constructai_token"),r=await fetch(`/api/clients?${e}`,{headers:s?{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"}}),l=await r.json();l.success?(c(l.data),b(l.pagination?.totalPages||1)):u(l.error||"Failed to fetch clients")}catch(e){u(e.message||"Failed to fetch clients"),c(M)}finally{x(!1)}},M=[{id:1,name:"Green Valley Homes",contact_name:"Sarah Johnson",email:"sarah@greenvalley.com",phone:"(555) 234-5678",address:"",status:"active",type:"residential",projects:2,revenue:42e4},{id:2,name:"Green Valley Homes",contact_name:"Sarah Johnson",email:"sarah@greenvalley.com",phone:"555-0456",address:"456 Oak Ave, Los Angeles, CA",status:"active",type:"residential",projects:5,revenue:18e5},{id:3,name:"Industrial Partners LLC",contact_name:"Michael Chen",email:"mchen@industrialp.com",phone:"555-0789",address:"789 Industrial Blvd, Chicago, IL",status:"active",type:"industrial",projects:2,revenue:32e5},{id:4,name:"Metro City Council",contact_name:"David Chen",email:"d.chen@metrocity.gov",phone:"(555) 345-6789",address:"",status:"active",type:"government",projects:1,revenue:12e5},{id:5,name:"Metro Construction Group",contact_name:"John Anderson",email:"john@metroconstruction.com",phone:"555-0123",address:"123 Main St, New York, NY",status:"active",type:"commercial",projects:3,revenue:25e5},{id:6,name:"Sunset Developments",contact_name:"John Martinez",email:"john@sunsetdev.com",phone:"(555) 123-4567",address:"",status:"active",type:"commercial",projects:3,revenue:85e4}];return s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Clients"}),s.jsx("p",{className:"text-gray-600",children:"Manage your client relationships"}),d&&s.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:[s.jsx("span",{className:"inline-block animate-spin mr-2",children:"⏳"}),"Loading clients..."]}),m&&s.jsxs("p",{className:"text-sm text-red-600 mt-1",children:["⚠️ ",m]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Search clients...",value:t,onChange:e=>r(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),s.jsxs("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filter by status",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"pending",children:"Pending"})]}),s.jsxs("select",{value:n,onChange:e=>i(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filter by type",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"residential",children:"Residential"}),s.jsx("option",{value:"commercial",children:"Commercial"}),s.jsx("option",{value:"industrial",children:"Industrial"}),s.jsx("option",{value:"government",children:"Government"})]}),s.jsxs("button",{type:"button",onClick:()=>y(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"New Client"})]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>{return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"flex items-start justify-between mb-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${a=e.status,{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800"}[a]||"bg-gray-100 text-gray-800"}`,children:e.status}),s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${r=e.type,{residential:"bg-blue-100 text-blue-800",commercial:"bg-purple-100 text-purple-800",industrial:"bg-orange-100 text-orange-800",government:"bg-indigo-100 text-indigo-800"}[r]||"bg-gray-100 text-gray-800"}`,children:e.type})]})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.contact_name})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("a",{href:`mailto:${e.email}`,className:"hover:text-blue-600",children:e.email})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("a",{href:`tel:${e.phone}`,className:"hover:text-blue-600",children:e.phone})]}),e.address&&s.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[s.jsxs("svg",{className:"w-4 h-4 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{children:e.address})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.jsx("span",{children:"Projects:"})]}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.projects})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:"Revenue:"})]}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(t=e.revenue,null==t?"£0":`£${t.toLocaleString()}`)})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("button",{type:"button",onClick:()=>{C(e),v(!0)},className:"flex-1 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors flex items-center justify-center space-x-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsx("span",{className:"text-sm font-medium",children:"Edit"})]}),s.jsxs("button",{type:"button",onClick:()=>{C(e),w(!0)},className:"flex-1 px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors flex items-center justify-center space-x-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s.jsx("span",{className:"text-sm font-medium",children:"Delete"})]})]})]},e.id);var t,r,a})}),s.jsx(z,{isOpen:j,onClose:()=>y(!1),onSuccess:()=>{L(),y(!1)}}),s.jsx(B,{isOpen:f,onClose:()=>{v(!1),C(null)},onSuccess:()=>{L(),v(!1),C(null)},client:k}),s.jsx(T,{isOpen:N,onClose:()=>{w(!1),C(null)},onConfirm:async()=>{if(k){D(!0);try{const e=localStorage.getItem("token")||localStorage.getItem("constructai_token"),s=await fetch(`/api/clients/${k.id}`,{method:"DELETE",headers:e?{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"}}),t=await s.json();t.success?(w(!1),C(null),L()):u(t.error||"Failed to delete client")}catch(e){u(e.message||"Failed to delete client")}finally{D(!1)}}},title:"Delete Client",message:"Are you sure you want to delete this client? This will also remove all associated projects and data.",itemName:k?.name,loading:S})]})},O=({isOpen:t,onClose:r,onSuccess:a})=>{const[l,n]=e.useState({project_id:"",subject:"",description:"",priority:"medium",due_date:""}),[i,o]=e.useState([]),[c,d]=e.useState(!1),[x,m]=e.useState(null);e.useEffect(()=>{t&&u()},[t]);const u=async()=>{try{const e=await fetch("/api/projects?limit=100"),s=await e.json();s.success&&o(s.data)}catch(e){}};if(!t)return null;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New RFI"}),s.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),d(!0),m(null);try{const e=localStorage.getItem("user"),s=e?JSON.parse(e):null,t=s?.company_id||"company-1",i=await fetch("/api/rfis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,company_id:t,project_id:parseInt(l.project_id),rfi_number:`RFI-${Date.now()}`,status:"open"})}),o=await i.json();o.success?(a(),r(),n({project_id:"",subject:"",description:"",priority:"medium",due_date:""})):m(o.error||"Failed to create RFI")}catch(s){m(s.message||"Failed to create RFI")}finally{d(!1)}},className:"p-6 space-y-4",children:[x&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:x}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Project ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{required:!0,value:l.project_id,onChange:e=>n({...l,project_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Select a project"}),i.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:l.subject,onChange:e=>n({...l,subject:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter RFI subject"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{required:!0,value:l.description,onChange:e=>n({...l,description:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Describe the information request..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),s.jsxs("select",{value:l.priority,onChange:e=>n({...l,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"critical",children:"Critical"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),s.jsx("input",{type:"date",value:l.due_date,onChange:e=>n({...l,due_date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Creating...":"Create RFI"})]})]})]})})},F=()=>{const[t,r]=e.useState(""),[a,l]=e.useState("all"),[n,i]=e.useState([]),[o,c]=e.useState(!0),[d,x]=e.useState(null),[m,u]=e.useState(!1);e.useEffect(()=>{p()},[t,a]);const p=async()=>{try{c(!0);const e=new URLSearchParams({page:"1",limit:"50"});t&&e.append("search",t),"all"!==a&&e.append("status",a);const s=await fetch(`/api/rfis?${e}`),r=await s.json();r.success?i(r.data):x(r.error)}catch(e){x(e.message),i(h)}finally{c(!1)}},h=[{id:"RFI-2024-001",title:"Clarification on HVAC Duct Sizing",description:"The mechanical drawings show 14-inch ducts for the main supply, but the specifications call for 16-inch. Which should we follow?",project:"Downtown Office Complex",status:"answered",priority:"high",category:"design",submittedTo:"Engineering Team",dueDate:"Dec 20, 2024",response:"Use 16-inch ducts as specified in the specifications document. The drawings will be updated in the next revision.",respondedBy:"Lead Engineer",responseDate:"Dec 18, 2024",overdue:!1},{id:"RFI-2024-002",title:"Flooring Material Confirmation",description:"Owner requested premium hardwood, but budget shows standard laminate. Need clarification before ordering.",project:"Riverside Luxury Apartments",status:"open",priority:"urgent",category:"materials",submittedTo:"Owner",dueDate:"Dec 25, 2024",response:null,respondedBy:null,responseDate:null,overdue:!0,overdueDays:287},{id:"RFI-2024-003",title:"Fire Rating Requirements",description:"Do interior partition walls on 3rd floor require 1-hour or 2-hour fire rating per local code?",project:"Downtown Office Complex",status:"pending response",priority:"high",category:"code compliance",submittedTo:"Code Inspector",dueDate:"Dec 22, 2024",response:null,respondedBy:null,responseDate:null,overdue:!0,overdueDays:290}],g=3,b=2,j=2,y=1,f=e=>({answered:"✓",open:"○","pending response":"⏳",closed:"✕"}[e]||"○");return s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"RFIs"}),s.jsx("p",{className:"text-gray-600",children:"Manage Requests for Information"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{type:"button",onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"New RFI"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Search RFIs...",value:t,onChange:e=>r(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),s.jsxs("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"open",children:"Open"}),s.jsx("option",{value:"pending response",children:"Pending Response"}),s.jsx("option",{value:"answered",children:"Answered"}),s.jsx("option",{value:"closed",children:"Closed"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total RFIs"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:g})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center text-2xl",children:"📋"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Open"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center text-2xl",children:"○"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Overdue"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:j})]}),s.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-lg flex items-center justify-center text-2xl",children:"⚠️"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Answered"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:y})]}),s.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center text-2xl",children:"✓"})]})})]}),s.jsx("div",{className:"space-y-4",children:n.map(e=>{return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${r=e.status,{answered:"bg-green-100 text-green-800",open:"bg-blue-100 text-blue-800","pending response":"bg-yellow-100 text-yellow-800",closed:"bg-gray-100 text-gray-800"}[r]||"bg-gray-100 text-gray-800"}`,children:[s.jsx("span",{children:f(e.status)}),s.jsx("span",{children:e.status})]}),s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t=e.priority,{low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"}[t]||"bg-gray-100 text-gray-800"}`,children:e.priority}),e.overdue&&s.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 flex items-center space-x-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("span",{children:[e.overdueDays,"d overdue"]})]})]}),s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:["RFI #",e.id]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.project})]})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:e.title}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Category: "}),s.jsx("span",{className:"font-medium text-gray-900",children:e.category})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Submitted to: "}),s.jsx("span",{className:"font-medium text-gray-900",children:e.submittedTo})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Due: "}),s.jsx("span",{className:"font-medium text-gray-900",children:e.dueDate})]})]}),e.response&&s.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Response:"}),s.jsx("p",{className:"text-sm text-gray-700 mb-2",children:e.response}),s.jsxs("p",{className:"text-xs text-gray-500",children:["By ",e.respondedBy," on ",e.responseDate]})]})]}),!e.response&&s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),s.jsx("span",{children:"Respond"})]})})]},e.id);var t,r})}),s.jsx(O,{isOpen:m,onClose:()=>u(!1),onSuccess:()=>{u(!1),p()}})]})},W=({onClose:t,onSave:r})=>{const[a,l]=e.useState("modern"),[n,i]=e.useState({invoiceNumber:`INV-${Date.now()}`,invoiceDate:(new Date).toISOString().split("T")[0],dueDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],companyName:"CortexBuild Ltd",companyAddress:"123 Construction Ave, London, UK",companyEmail:"billing@cortexbuild.com",companyPhone:"+44 20 1234 5678",clientName:"",clientAddress:"",clientEmail:"",clientPhone:"",items:[{description:"",quantity:1,rate:0,amount:0}],notes:"Thank you for your business!",terms:"Payment due within 30 days",subtotal:0,tax:0,total:0}),o=(e,s,t)=>{const r=[...n.items];r[e]={...r[e],[s]:t},"quantity"!==s&&"rate"!==s||(r[e].amount=r[e].quantity*r[e].rate),i({...n,items:r}),c(r)},c=e=>{const s=e.reduce((e,s)=>e+s.amount,0),t=.2*s,r=s+t;i(e=>({...e,subtotal:s,tax:t,total:r}))},d=e=>`£${e.toFixed(2)}`;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto",children:s.jsxs("div",{className:"min-h-screen p-4",children:[s.jsxs("div",{className:"max-w-7xl mx-auto mb-4 bg-white rounded-lg shadow-lg p-4 print:hidden",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invoice Builder"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{window.print()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Print / PDF"}),s.jsx("button",{onClick:()=>{r(n)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save Invoice"}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Template"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"modern",name:"Modern",color:"bg-blue-500"},{id:"classic",name:"Classic",color:"bg-gray-800"},{id:"creative",name:"Creative",color:"bg-teal-500"},{id:"minimalist",name:"Minimalist",color:"bg-gray-400"},{id:"corporate",name:"Corporate",color:"bg-gray-700"},{id:"artistic",name:"Artistic",color:"bg-red-800"},{id:"teal",name:"Teal",color:"bg-teal-600"},{id:"geometric",name:"Geometric",color:"bg-yellow-500"},{id:"handwritten",name:"Handwritten",color:"bg-gray-600"},{id:"vintage",name:"Vintage",color:"bg-amber-700"}].map(e=>s.jsx("button",{onClick:()=>l(e.id),className:"px-4 py-2 rounded-lg transition-all "+(a===e.id?`${e.color} text-white shadow-lg scale-105`:"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e.name},e.id))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Your Company"}),s.jsx("input",{type:"text",placeholder:"Company Name",value:n.companyName,onChange:e=>i({...n,companyName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2"}),s.jsx("input",{type:"text",placeholder:"Address",value:n.companyAddress,onChange:e=>i({...n,companyAddress:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2"}),s.jsx("input",{type:"email",placeholder:"Email",value:n.companyEmail,onChange:e=>i({...n,companyEmail:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2"}),s.jsx("input",{type:"tel",placeholder:"Phone",value:n.companyPhone,onChange:e=>i({...n,companyPhone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Bill To"}),s.jsx("input",{type:"text",placeholder:"Client Name",value:n.clientName,onChange:e=>i({...n,clientName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2"}),s.jsx("input",{type:"text",placeholder:"Address",value:n.clientAddress,onChange:e=>i({...n,clientAddress:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2"}),s.jsx("input",{type:"email",placeholder:"Email",value:n.clientEmail,onChange:e=>i({...n,clientEmail:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2"}),s.jsx("input",{type:"tel",placeholder:"Phone",value:n.clientPhone,onChange:e=>i({...n,clientPhone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice #"}),s.jsx("input",{type:"text",value:n.invoiceNumber,onChange:e=>i({...n,invoiceNumber:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Date"}),s.jsx("input",{type:"date",value:n.invoiceDate,onChange:e=>i({...n,invoiceDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),s.jsx("input",{type:"date",value:n.dueDate,onChange:e=>i({...n,dueDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Line Items"}),s.jsx("button",{onClick:()=>{i({...n,items:[...n.items,{description:"",quantity:1,rate:0,amount:0}]})},className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"+ Add Item"})]}),n.items.map((e,t)=>s.jsxs("div",{className:"grid grid-cols-12 gap-2 mb-2",children:[s.jsx("input",{type:"text",placeholder:"Description",value:e.description,onChange:e=>o(t,"description",e.target.value),className:"col-span-5 px-3 py-2 border border-gray-300 rounded-lg"}),s.jsx("input",{type:"number",placeholder:"Qty",value:e.quantity,onChange:e=>o(t,"quantity",parseFloat(e.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg"}),s.jsx("input",{type:"number",placeholder:"Rate",value:e.rate,onChange:e=>o(t,"rate",parseFloat(e.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg"}),s.jsx("div",{className:"col-span-2 px-3 py-2 bg-gray-100 rounded-lg flex items-center",children:d(e.amount)}),s.jsx("button",{onClick:()=>(e=>{const s=n.items.filter((s,t)=>t!==e);i({...n,items:s}),c(s)})(t),className:"col-span-1 px-2 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"×"})]},t))]})]}),s.jsxs("div",{className:`a4-preview-container ${a} bg-white mx-auto shadow-2xl`,style:{width:"21cm",minHeight:"29.7cm",padding:"1cm",fontFamily:"system-ui, -apple-system, sans-serif"},children:[s.jsx("header",{style:{borderBottom:"2px solid #e5e7eb",paddingBottom:"1rem",marginBottom:"2rem"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[s.jsxs("div",{children:[s.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.5rem"},children:n.companyName}),s.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",lineHeight:"1.5"},children:[n.companyAddress,s.jsx("br",{}),n.companyEmail,s.jsx("br",{}),n.companyPhone]})]}),s.jsxs("div",{style:{textAlign:"right"},children:[s.jsx("h2",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"#2563eb",marginBottom:"0.5rem"},children:"INVOICE"}),s.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["#",n.invoiceNumber]})]})]})}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[s.jsxs("div",{children:[s.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#374151",marginBottom:"0.5rem",textTransform:"uppercase"},children:"Bill To"}),s.jsxs("p",{style:{fontSize:"0.875rem",color:"#1f2937",lineHeight:"1.5"},children:[s.jsx("strong",{children:n.clientName}),s.jsx("br",{}),n.clientAddress,s.jsx("br",{}),n.clientEmail,s.jsx("br",{}),n.clientPhone]})]}),s.jsxs("div",{children:[s.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#374151",marginBottom:"0.5rem",textTransform:"uppercase"},children:"Invoice Details"}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1f2937"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[s.jsx("span",{children:"Invoice Date:"}),s.jsx("span",{children:n.invoiceDate})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Due Date:"}),s.jsx("span",{children:n.dueDate})]})]})]})]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"2rem"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f3f4f6",borderBottom:"2px solid #d1d5db"},children:[s.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Description"}),s.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Qty"}),s.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Rate"}),s.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Amount"})]})}),s.jsx("tbody",{children:n.items.map((e,t)=>s.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[s.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem",color:"#1f2937"},children:e.description}),s.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",color:"#1f2937"},children:e.quantity}),s.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",color:"#1f2937"},children:d(e.rate)}),s.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",color:"#1f2937"},children:d(e.amount)})]},t))})]}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"2rem"},children:s.jsxs("div",{style:{width:"300px",backgroundColor:"#f9fafb",border:"1px solid #f3f4f6",borderRadius:"0.5rem",padding:"1rem"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontSize:"0.875rem"},children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:d(n.subtotal)})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontSize:"0.875rem"},children:[s.jsx("span",{children:"Tax (20%):"}),s.jsx("span",{children:d(n.tax)})]}),s.jsx("div",{style:{borderTop:"2px solid #d1d5db",paddingTop:"0.5rem",marginTop:"0.5rem"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.25rem",fontWeight:"bold"},children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:d(n.total)})]})})]})}),s.jsxs("div",{style:{backgroundColor:"#dcfce7",color:"#166534",padding:"1rem",borderRadius:"0.5rem",marginBottom:"2rem",textAlign:"center"},children:[s.jsx("p",{style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Amount Due"}),s.jsx("p",{style:{fontSize:"2rem",fontWeight:"bold"},children:d(n.total)})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[s.jsxs("div",{children:[s.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#374151",marginBottom:"0.5rem",textTransform:"uppercase"},children:"Notes"}),s.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",lineHeight:"1.5"},children:n.notes})]}),s.jsxs("div",{children:[s.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#374151",marginBottom:"0.5rem",textTransform:"uppercase"},children:"Terms & Conditions"}),s.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",lineHeight:"1.5"},children:n.terms})]})]})]})]})})},E=()=>{const[t,r]=e.useState(""),[a,l]=e.useState("all"),[n,i]=e.useState([]),[o,c]=e.useState(!0),[d,x]=e.useState(null),[m,u]=e.useState(!1);e.useEffect(()=>{p()},[t,a]);const p=async()=>{try{c(!0);const e=new URLSearchParams({page:"1",limit:"50"});t&&e.append("search",t),"all"!==a&&e.append("status",a);const s=await fetch(`/api/invoices?${e}`),r=await s.json();r.success?i(r.data):x(r.error)}catch(e){x(e.message),i(h)}finally{c(!1)}},h=[{id:"INV-2024-001",client:"Metro Construction Group",project:"Downtown Office Complex",description:"Progress billing - Phase 1 completion",amount:486e3,status:"paid",type:"progress",issueDate:"Nov 1, 2024",dueDate:"Nov 30, 2024",paidAmount:486e3,paidDate:"Nov 28, 2024"},{id:"INV-2024-002",client:"Green Valley Homes",project:"Riverside Luxury Apartments",description:"Progress billing - Foundation and framing",amount:302400,status:"sent",type:"progress",issueDate:"Dec 1, 2024",dueDate:"Dec 31, 2024",paidAmount:0,paidDate:null},{id:"INV-2024-003",client:"Metro Construction Group",project:"Downtown Office Complex",description:"Progress billing - Phase 2 structural work",amount:561600,status:"viewed",type:"progress",issueDate:"Dec 15, 2024",dueDate:"Jan 15, 2025",paidAmount:0,paidDate:null},{id:"INV-2024-002",client:"Green Valley Homes",project:"Riverside Apartments",description:"Progress payment - 50% completion",amount:172800,status:"sent",type:"progress",issueDate:"May 15, 2024",dueDate:"Jun 15, 2024",paidAmount:0,paidDate:null},{id:"INV-2024-001",client:"Sunset Developments",project:"Downtown Office Complex",description:"Progress payment - Phase 1 completion",amount:486e3,status:"paid",type:"progress",issueDate:"Feb 1, 2024",dueDate:"Mar 1, 2024",paidAmount:486e3,paidDate:"Feb 28, 2024"}],g=e=>null==e?"£0.00":`£${e.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})}`,b=e=>({paid:"✓",sent:"📤",viewed:"👁",overdue:"⚠️",draft:"📝"}[e]||"📄");return s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Invoices"}),s.jsx("p",{className:"text-gray-600",children:"Manage billing and payments"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Search invoices...",value:t,onChange:e=>r(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),s.jsxs("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"paid",children:"Paid"}),s.jsx("option",{value:"sent",children:"Sent"}),s.jsx("option",{value:"viewed",children:"Viewed"}),s.jsx("option",{value:"overdue",children:"Overdue"}),s.jsx("option",{value:"draft",children:"Draft"})]}),s.jsxs("button",{type:"button",onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"New Invoice"})]})]})]})}),s.jsx("div",{className:"space-y-4",children:n.map((e,t)=>{return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${r=e.status,{paid:"bg-green-100 text-green-800",sent:"bg-blue-100 text-blue-800",viewed:"bg-yellow-100 text-yellow-800",overdue:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800"}[r]||"bg-gray-100 text-gray-800"}`,children:[s.jsx("span",{children:b(e.status)}),s.jsx("span",{children:e.status})]}),s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:g(e.amount)})]}),s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:["Invoice #",e.id]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.client})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Project:"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.project})]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.description}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Issue Date:"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.issueDate})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Due Date:"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.dueDate})]}),e.paidAmount>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Paid:"}),s.jsx("p",{className:"text-sm font-medium text-green-600",children:g(e.paidAmount)})]}),s.jsx("div",{children:s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800",children:e.type})})]})]})]},`${e.id}-${t}`);var r})}),m&&s.jsx(W,{onClose:()=>u(!1),onSave:async e=>{try{const s=localStorage.getItem("user"),t=s?JSON.parse(s):null,r=t?.company_id||"company-1";(await fetch("/api/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_id:r,invoice_number:e.invoiceNumber,client_name:e.clientName,description:e.items.map(e=>e.description).join(", "),total:e.total,status:"draft",issue_date:e.invoiceDate,due_date:e.dueDate})})).ok&&(u(!1),p())}catch(s){}}})]})},H=({isOpen:t,onClose:r,onSuccess:a})=>{const[l,n]=e.useState({project_id:"",date:(new Date).toISOString().split("T")[0],hours:"",description:"",billable:!0,hourly_rate:""}),[i,o]=e.useState([]),[c,d]=e.useState(!1),[x,m]=e.useState(null);e.useEffect(()=>{t&&u()},[t]);const u=async()=>{try{const e=await fetch("/api/projects?limit=100"),s=await e.json();s.success&&o(s.data)}catch(e){}};if(!t)return null;const p=l.hours&&l.hourly_rate?(parseFloat(l.hours)*parseFloat(l.hourly_rate)).toFixed(2):"0.00";return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Log Time Entry"}),s.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),d(!0),m(null);try{const e=localStorage.getItem("user"),s=e?JSON.parse(e):null,t=s?.company_id||"company-1",i=s?.id||"user-1",o=await fetch("/api/time-entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,company_id:t,user_id:i,project_id:parseInt(l.project_id),hours:parseFloat(l.hours),hourly_rate:l.hourly_rate?parseFloat(l.hourly_rate):null})}),c=await o.json();c.success?(a(),r(),n({project_id:"",date:(new Date).toISOString().split("T")[0],hours:"",description:"",billable:!0,hourly_rate:""})):m(c.error||"Failed to create time entry")}catch(s){m(s.message||"Failed to create time entry")}finally{d(!1)}},className:"p-6 space-y-4",children:[x&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:x}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Project ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{required:!0,value:l.project_id,onChange:e=>n({...l,project_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Select project"}),i.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",required:!0,value:l.date,onChange:e=>n({...l,date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Hours ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",required:!0,step:"0.25",min:"0.25",max:"24",value:l.hours,onChange:e=>n({...l,hours:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"8.0"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{required:!0,value:l.description,onChange:e=>n({...l,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"What did you work on?"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:l.billable,onChange:e=>n({...l,billable:e.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Billable"})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hourly Rate ($)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:l.hourly_rate,onChange:e=>n({...l,hourly_rate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"75.00"})]})]}),l.hours&&l.hourly_rate&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Amount:"}),s.jsxs("span",{className:"text-lg font-bold text-blue-900",children:["$",p]})]})}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Logging...":"Log Time"})]})]})]})})},V=()=>{const[t,r]=e.useState(""),[a,l]=e.useState("this-week"),[n,i]=e.useState("all"),[o,c]=e.useState([]),[d,x]=e.useState(!0),[m,u]=e.useState(null),[p,h]=e.useState({totalHours:0,revenue:0,entries:0}),[g,b]=e.useState(!1);e.useEffect(()=>{j()},[t,a,n]);const j=async()=>{try{x(!0);const e=new URLSearchParams({page:"1",limit:"100"});"all"!==n&&e.append("project_id",n);const s=await fetch(`/api/time-entries?${e}`),t=await s.json();if(t.success){c(t.data);const e=t.data.reduce((e,s)=>e+(s.hours||0),0),s=t.data.reduce((e,s)=>e+(s.amount||0),0);h({totalHours:e,revenue:s,entries:t.data.length})}else u(t.error)}catch(e){u(e.message),c(y)}finally{x(!1)}},y=[{id:"1",project:"Manufacturing Facility Expansion",description:"",date:"Oct 7, 2025",hours:16,rate:0,amount:0,billable:!0,category:"labor",employee:"Adrian Stanca"}];return s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Time Tracking"}),s.jsx("p",{className:"text-gray-600",children:"Log and manage your work hours"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{type:"button",onClick:()=>b(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"Log Time"})]}),s.jsxs("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"today",children:"Today"}),s.jsx("option",{value:"this-week",children:"This Week"}),s.jsx("option",{value:"this-month",children:"This Month"}),s.jsx("option",{value:"last-month",children:"Last Month"}),s.jsx("option",{value:"custom",children:"Custom Range"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Hours"}),s.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[p.totalHours,"h"]})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center text-2xl",children:"⏱️"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Revenue"}),s.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["£",p.revenue.toFixed(2)]})]}),s.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center text-2xl",children:"💰"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Entries"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:p.entries})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-lg flex items-center justify-center text-2xl",children:"📝"})]})})]}),s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Search time entries...",value:t,onChange:e=>r(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]}),s.jsxs("select",{value:n,onChange:e=>i(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Projects"}),s.jsx("option",{value:"downtown",children:"Downtown Office Complex"}),s.jsx("option",{value:"riverside",children:"Riverside Luxury Apartments"}),s.jsx("option",{value:"manufacturing",children:"Manufacturing Facility Expansion"})]})]}),s.jsx("div",{className:"space-y-4",children:o.map(e=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:e.project}),e.billable&&s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Billable"})]}),e.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-2",children:[s.jsx("span",{children:e.date}),s.jsx("span",{children:"•"}),s.jsxs("span",{className:"font-semibold",children:[e.hours,"h"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["£",e.amount.toFixed(2)]}),s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800",children:e.category})]})]})},e.id))}),s.jsx(H,{isOpen:g,onClose:()=>b(!1),onSuccess:()=>{b(!1),j()}})]})},$=({isOpen:t,onClose:r,onSuccess:a})=>{const[l,n]=e.useState({name:"",trade:"electrical",contact_name:"",email:"",phone:"",license_number:"",insurance_expiry:"",status:"active"}),[i,o]=e.useState(!1),[c,d]=e.useState(null);if(!t)return null;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"New Subcontractor"}),s.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o(!0),d(null);try{const e=localStorage.getItem("user"),s=e?JSON.parse(e):null,t=s?.company_id||"company-1",i=await fetch("/api/subcontractors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,company_id:t})}),o=await i.json();o.success?(a(),r(),n({name:"",trade:"electrical",contact_name:"",email:"",phone:"",license_number:"",insurance_expiry:"",status:"active"})):d(o.error||"Failed to create subcontractor")}catch(s){d(s.message||"Failed to create subcontractor")}finally{o(!1)}},className:"p-6 space-y-6",children:[c&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),s.jsx("input",{type:"text",required:!0,value:l.name,onChange:e=>n({...l,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter company name"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade *"}),s.jsxs("select",{required:!0,value:l.trade,onChange:e=>n({...l,trade:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"electrical",children:"Electrical"}),s.jsx("option",{value:"plumbing",children:"Plumbing"}),s.jsx("option",{value:"hvac",children:"HVAC"}),s.jsx("option",{value:"carpentry",children:"Carpentry"}),s.jsx("option",{value:"masonry",children:"Masonry"}),s.jsx("option",{value:"roofing",children:"Roofing"}),s.jsx("option",{value:"painting",children:"Painting"}),s.jsx("option",{value:"flooring",children:"Flooring"}),s.jsx("option",{value:"landscaping",children:"Landscaping"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Name"}),s.jsx("input",{type:"text",value:l.contact_name,onChange:e=>n({...l,contact_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contact person"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:l.email,onChange:e=>n({...l,email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"email@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",value:l.phone,onChange:e=>n({...l,phone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(555) 123-4567"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License Number"}),s.jsx("input",{type:"text",value:l.license_number,onChange:e=>n({...l,license_number:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"License #"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance Expiry"}),s.jsx("input",{type:"date",value:l.insurance_expiry,onChange:e=>n({...l,insurance_expiry:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:l.status,onChange:e=>n({...l,status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"pending",children:"Pending"})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:i?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"inline-block animate-spin",children:"⏳"}),s.jsx("span",{children:"Creating..."})]}):s.jsx("span",{children:"Create Subcontractor"})})]})]})]})})},G=()=>{const[t,r]=e.useState(""),[a,l]=e.useState("all"),[n,i]=e.useState("directory"),[o,c]=e.useState([]),[d,x]=e.useState(!0),[m,u]=e.useState(null),[p,h]=e.useState(!1);e.useEffect(()=>{g()},[t,a]);const g=async()=>{try{x(!0);const e=new URLSearchParams({page:"1",limit:"50"});t&&e.append("search",t),"all"!==a&&e.append("trade",a);const s=await fetch(`/api/subcontractors?${e}`),r=await s.json();r.success?c(r.data):u(r.error)}catch(e){u(e.message),c(b)}finally{x(!1)}},b=[{id:"1",name:"Elite Electrical Services",trade:"electrical",contact:"Mike Johnson",email:"mike@eliteelectrical.com",phone:"555-0101",license:"EC-12345",status:"active",rating:5,projects:0,onTimeRate:92,insuranceExpiring:!0},{id:"2",name:"Premier HVAC Inc",trade:"hvac",contact:"David Chen",email:"david@premierhvac.com",phone:"555-0103",license:"HV-24680",status:"active",rating:5,projects:0,onTimeRate:88,insuranceExpiring:!0},{id:"3",name:"ProPlumb Solutions",trade:"plumbing",contact:"Sarah Martinez",email:"sarah@proplumb.com",phone:"555-0102",license:"PL-67890",status:"active",rating:5,projects:0,onTimeRate:95,insuranceExpiring:!0}];return s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Subcontractors"}),s.jsx("p",{className:"text-gray-600",children:"Manage your subcontractor network"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Search subcontractors...",value:t,onChange:e=>r(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),s.jsxs("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Trades"}),s.jsx("option",{value:"electrical",children:"Electrical"}),s.jsx("option",{value:"hvac",children:"HVAC"}),s.jsx("option",{value:"plumbing",children:"Plumbing"}),s.jsx("option",{value:"carpentry",children:"Carpentry"})]}),s.jsxs("button",{type:"button",onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"Add Subcontractor"})]})]})]})}),s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex space-x-8",children:[s.jsx("button",{type:"button",onClick:()=>i("directory"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("directory"===n?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Directory"}),s.jsx("button",{type:"button",onClick:()=>i("assignments"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("assignments"===n?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Assignments"})]})})}),"directory"===n&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>{return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center text-2xl",children:"🔧"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:e.status}),e.insuranceExpiring&&s.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800 flex items-center space-x-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{children:"Insurance Expiring"})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.trade})]})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsx("span",{children:e.contact})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{children:e.email})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{children:e.phone})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("span",{children:["License: ",e.license]})]})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Rating:"}),s.jsx("div",{className:"flex",children:(t=e.rating,Array.from({length:5},(e,r)=>s.jsx("span",{className:r<t?"text-yellow-400":"text-gray-300",children:"★"},r)))})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 mb-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Projects:"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.projects})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500",children:"On-time Rate:"}),s.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.onTimeRate,"%"]})]})]}),s.jsxs("button",{type:"button",className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"Assign to Project"})]})]},e.id);var t})}),"assignments"===n&&s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:s.jsx("p",{className:"text-gray-600",children:"No assignments yet. Assign subcontractors to projects from the Directory tab."})}),s.jsx($,{isOpen:p,onClose:()=>h(!1),onSuccess:()=>{g(),h(!1)}})]})},J=({isOpen:t,onClose:r,onSuccess:a})=>{const[l,n]=e.useState({project_id:"",vendor_name:"",po_number:"",description:"",amount:"",status:"pending",order_date:(new Date).toISOString().split("T")[0],delivery_date:""}),[i,o]=e.useState([]),[c,d]=e.useState(!1),[x,m]=e.useState(null);e.useEffect(()=>{t&&(u(),n(e=>({...e,po_number:`PO-${Date.now()}`})))},[t]);const u=async()=>{try{const e=await fetch("/api/projects?limit=100"),s=await e.json();s.success&&o(s.data)}catch(e){}};if(!t)return null;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create Purchase Order"}),s.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),d(!0),m(null);try{const e=localStorage.getItem("user"),s=e?JSON.parse(e):null,t=s?.company_id||"company-1",i=await fetch("/api/purchase-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,company_id:t,project_id:parseInt(l.project_id),amount:parseFloat(l.amount)})}),o=await i.json();o.success?(a(),r(),n({project_id:"",vendor_name:"",po_number:"",description:"",amount:"",status:"pending",order_date:(new Date).toISOString().split("T")[0],delivery_date:""})):m(o.error||"Failed to create purchase order")}catch(s){m(s.message||"Failed to create purchase order")}finally{d(!1)}},className:"p-6 space-y-4",children:[x&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:x}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Project ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{required:!0,value:l.project_id,onChange:e=>n({...l,project_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Select project"}),i.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["PO Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:l.po_number,onChange:e=>n({...l,po_number:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"PO-12345"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Vendor Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:l.vendor_name,onChange:e=>n({...l,vendor_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter vendor name"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{required:!0,value:l.description,onChange:e=>n({...l,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Describe the purchase..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Amount ($) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",required:!0,step:"0.01",min:"0",value:l.amount,onChange:e=>n({...l,amount:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:l.status,onChange:e=>n({...l,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"approved",children:"Approved"}),s.jsx("option",{value:"ordered",children:"Ordered"}),s.jsx("option",{value:"received",children:"Received"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Order Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",required:!0,value:l.order_date,onChange:e=>n({...l,order_date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Date"}),s.jsx("input",{type:"date",value:l.delivery_date,onChange:e=>n({...l,delivery_date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Creating...":"Create PO"})]})]})]})})},q=()=>{const[t,r]=e.useState(""),[a,l]=e.useState("all"),[n,i]=e.useState([]),[o,c]=e.useState(!0),[d,x]=e.useState(null),[m,u]=e.useState(!1);e.useEffect(()=>{p()},[t,a]);const p=async()=>{try{c(!0);const e=new URLSearchParams({page:"1",limit:"50"});t&&e.append("search",t),"all"!==a&&e.append("status",a);const s=await fetch(`/api/purchase-orders?${e}`),r=await s.json();r.success?i(r.data):x(r.error)}catch(e){x(e.message),i(h)}finally{c(!1)}},h=[{id:"PO-2024-001",vendor:"ABC Supplies Inc",project:"Downtown Office Complex",items:"Steel beams, concrete mix",amount:45e3,status:"approved",orderDate:"Dec 1, 2024",deliveryDate:"Dec 15, 2024",receivedDate:null},{id:"PO-2024-002",vendor:"BuildMart Wholesale",project:"Riverside Luxury Apartments",items:"Lumber, drywall, insulation",amount:32500,status:"pending",orderDate:"Dec 5, 2024",deliveryDate:"Dec 20, 2024",receivedDate:null}];return s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Purchase Orders"}),s.jsx("p",{className:"text-gray-600",children:"Manage procurement and orders"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Search purchase orders...",value:t,onChange:e=>r(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),s.jsxs("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"approved",children:"Approved"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"received",children:"Received"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]}),s.jsxs("button",{type:"button",onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"New Purchase Order"})]})]})]})}),s.jsx("div",{className:"space-y-4",children:n.map(e=>{return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${r=e.status,{approved:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",received:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"}[r]||"bg-gray-100 text-gray-800"}`,children:e.status}),s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:(t=e.amount,null==t?"£0.00":`£${t.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})}`)})]}),s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:["PO #",e.id]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.vendor})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Project:"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.project})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Items:"}),s.jsx("p",{className:"text-sm text-gray-600",children:e.items})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Order Date:"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.orderDate})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Delivery Date:"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.deliveryDate})]}),e.receivedDate&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Received:"}),s.jsx("p",{className:"text-sm font-medium text-green-600",children:e.receivedDate})]})]})]})]},e.id);var t,r})}),s.jsx(J,{isOpen:m,onClose:()=>u(!1),onSuccess:()=>{u(!1),p()}})]})},U=({isOpen:t,onClose:r,onSuccess:a})=>{const[l,n]=e.useState({project_id:"",title:"",description:"",category:"contract",file_url:"",file_size:"",file_type:""}),[i,o]=e.useState([]),[c,d]=e.useState(!1),[x,m]=e.useState(null);e.useEffect(()=>{t&&u()},[t]);const u=async()=>{try{const e=await fetch("/api/projects?limit=100"),s=await e.json();s.success&&o(s.data)}catch(e){}};if(!t)return null;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload Document"}),s.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),d(!0),m(null);try{const e=localStorage.getItem("user"),s=e?JSON.parse(e):null,t=s?.company_id||"company-1",i=await fetch("/api/documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,company_id:t,project_id:parseInt(l.project_id),file_size:l.file_size?parseInt(l.file_size):null})}),o=await i.json();o.success?(a(),r(),n({project_id:"",title:"",description:"",category:"contract",file_url:"",file_size:"",file_type:""})):m(o.error||"Failed to create document")}catch(s){m(s.message||"Failed to create document")}finally{d(!1)}},className:"p-6 space-y-4",children:[x&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:x}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Project ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{required:!0,value:l.project_id,onChange:e=>n({...l,project_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Select project"}),i.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Document Title ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:l.title,onChange:e=>n({...l,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter document title"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{value:l.description,onChange:e=>n({...l,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Describe the document..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),s.jsxs("select",{value:l.category,onChange:e=>n({...l,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"contract",children:"Contract"}),s.jsx("option",{value:"drawing",children:"Drawing"}),s.jsx("option",{value:"specification",children:"Specification"}),s.jsx("option",{value:"permit",children:"Permit"}),s.jsx("option",{value:"invoice",children:"Invoice"}),s.jsx("option",{value:"report",children:"Report"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File Type"}),s.jsx("input",{type:"text",value:l.file_type,onChange:e=>n({...l,file_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"PDF, DOCX, etc."})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["File URL ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"url",required:!0,value:l.file_url,onChange:e=>n({...l,file_url:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"https://..."}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the URL where the document is stored"})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Uploading...":"Upload Document"})]})]})]})})},Z=()=>{const[t,r]=e.useState(""),[a,l]=e.useState("all"),[n,i]=e.useState([]),[o,c]=e.useState(!0),[d,x]=e.useState(null),[m,u]=e.useState(!1);e.useEffect(()=>{p()},[t,a]);const p=async()=>{try{c(!0);const e=new URLSearchParams({page:"1",limit:"50"});t&&e.append("search",t),"all"!==a&&e.append("category",a);const s=await fetch(`/api/documents?${e}`),r=await s.json();r.success?i(r.data):x(r.error)}catch(e){x(e.message),i(h)}finally{c(!1)}},h=[{id:"1",name:"Project Blueprint - Phase 1.pdf",type:"pdf",size:"2.4 MB",project:"Downtown Office Complex",uploadedBy:"Adrian Stanca",uploadDate:"Dec 1, 2024",category:"blueprints"},{id:"2",name:"Safety Inspection Report.docx",type:"docx",size:"156 KB",project:"Riverside Luxury Apartments",uploadedBy:"John Smith",uploadDate:"Dec 5, 2024",category:"reports"},{id:"3",name:"Material Specifications.xlsx",type:"xlsx",size:"89 KB",project:"Manufacturing Facility Expansion",uploadedBy:"Sarah Johnson",uploadDate:"Dec 10, 2024",category:"specifications"}];return s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Documents"}),s.jsx("p",{className:"text-gray-600",children:"Manage project files and documents"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Search documents...",value:t,onChange:e=>r(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),s.jsxs("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"pdf",children:"PDF"}),s.jsx("option",{value:"docx",children:"Word"}),s.jsx("option",{value:"xlsx",children:"Excel"}),s.jsx("option",{value:"images",children:"Images"})]}),s.jsxs("button",{type:"button",onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("span",{children:"Upload Document"})]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(e=>{return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[s.jsx("div",{className:"text-4xl",children:(t=e.type,{pdf:"📄",docx:"📝",xlsx:"📊",jpg:"🖼️",png:"🖼️",zip:"📦"}[t]||"📁")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate mb-1",children:e.name}),s.jsx("p",{className:"text-xs text-gray-500",children:e.size})]})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Project: "}),s.jsx("span",{className:"font-medium text-gray-900",children:e.project})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Category: "}),s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:e.category})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Uploaded by ",e.uploadedBy," on ",e.uploadDate]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{type:"button",className:"flex-1 bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Download"}),s.jsx("button",{type:"button",className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:s.jsxs("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]},e.id);var t})}),s.jsx(U,{isOpen:m,onClose:()=>u(!1),onSuccess:()=>{u(!1),p()}})]})},Y=()=>{const[t,r]=e.useState("this-month");return s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reports"}),s.jsx("p",{className:"text-gray-600",children:"Analytics and insights for your business"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("select",{value:t,onChange:e=>r(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"this-week",children:"This Week"}),s.jsx("option",{value:"this-month",children:"This Month"}),s.jsx("option",{value:"this-quarter",children:"This Quarter"}),s.jsx("option",{value:"this-year",children:"This Year"}),s.jsx("option",{value:"custom",children:"Custom Range"})]}),s.jsxs("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{children:"Export All"})]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:"1",name:"Financial Summary",description:"Overview of revenue, expenses, and profit",icon:"💰",color:"green"},{id:"2",name:"Project Progress",description:"Status and completion rates of all projects",icon:"📊",color:"blue"},{id:"3",name:"Time Tracking",description:"Hours logged by team and project",icon:"⏱️",color:"purple"},{id:"4",name:"Invoice Status",description:"Paid, pending, and overdue invoices",icon:"📄",color:"yellow"},{id:"5",name:"Budget vs Actual",description:"Compare budgeted vs actual costs",icon:"📈",color:"red"},{id:"6",name:"Resource Allocation",description:"Team and equipment utilization",icon:"👥",color:"indigo"}].map(e=>{return s.jsxs("div",{className:`rounded-xl border-2 p-6 hover:shadow-lg transition-all cursor-pointer ${t=e.color,{green:"bg-green-50 text-green-600 border-green-200",blue:"bg-blue-50 text-blue-600 border-blue-200",purple:"bg-purple-50 text-purple-600 border-purple-200",yellow:"bg-yellow-50 text-yellow-600 border-yellow-200",red:"bg-red-50 text-red-600 border-red-200",indigo:"bg-indigo-50 text-indigo-600 border-indigo-200"}[t]||"bg-gray-50 text-gray-600 border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[s.jsx("div",{className:"text-4xl",children:e.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{type:"button",className:"flex-1 bg-white text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium border border-gray-300",children:"View Report"}),s.jsx("button",{type:"button",className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:s.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})]},e.id);var t})}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Revenue"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"£972,000"}),s.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+12% vs last month"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Active Projects"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"4"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"of 7 total"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Outstanding"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"£1,036,800"}),s.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"Awaiting payment"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Team Hours"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"16.0h"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This week"})]})]})]})},K=()=>{const[t,r]=e.useState(""),[a,l]=e.useState("all"),n=e=>null==e?"£0.00":`£${e.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Ledger"}),s.jsx("p",{className:"text-gray-600",children:"Financial transactions and accounting"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Search transactions...",value:t,onChange:e=>r(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),s.jsxs("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Categories"}),s.jsx("option",{value:"revenue",children:"Revenue"}),s.jsx("option",{value:"expenses",children:"Expenses"}),s.jsx("option",{value:"assets",children:"Assets"}),s.jsx("option",{value:"liabilities",children:"Liabilities"})]}),s.jsxs("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"New Entry"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Debits"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:n(486e3)})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Credits"}),s.jsx("p",{className:"text-3xl font-bold text-red-600",children:n(57500)})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Balance"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n(428500)})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Debit"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:[{id:"1",date:"Dec 15, 2024",description:"Invoice Payment - Metro Construction",category:"Revenue",account:"Accounts Receivable",debit:486e3,credit:0,balance:486e3,reference:"INV-2024-001"},{id:"2",date:"Dec 10, 2024",description:"Material Purchase - ABC Supplies",category:"Expenses",account:"Materials",debit:0,credit:45e3,balance:441e3,reference:"PO-2024-001"},{id:"3",date:"Dec 5, 2024",description:"Subcontractor Payment - Elite Electrical",category:"Expenses",account:"Labor",debit:0,credit:12500,balance:428500,reference:"PAY-2024-015"}].map(e=>{return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.date}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.description}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t=e.category,{Revenue:"bg-green-100 text-green-800",Expenses:"bg-red-100 text-red-800",Assets:"bg-blue-100 text-blue-800",Liabilities:"bg-yellow-100 text-yellow-800"}[t]||"bg-gray-100 text-gray-800"}`,children:e.category})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.account}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-green-600",children:e.debit>0?n(e.debit):"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-red-600",children:e.credit>0?n(e.credit):"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:n(e.balance)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.reference})]},e.id);var t})})]})})})]})},Q=()=>{const[t,r]=e.useState("profile");return s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage your account and preferences"})]}),s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex space-x-8",children:[s.jsx("button",{type:"button",onClick:()=>r("profile"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("profile"===t?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Profile"}),s.jsx("button",{type:"button",onClick:()=>r("company"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("company"===t?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Company"}),s.jsx("button",{type:"button",onClick:()=>r("notifications"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("notifications"===t?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Notifications"}),s.jsx("button",{type:"button",onClick:()=>r("security"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("security"===t?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Security"})]})})}),"profile"===t&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Profile Information"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),s.jsx("input",{type:"text",defaultValue:"Adrian",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),s.jsx("input",{type:"text",defaultValue:"Stanca",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",defaultValue:"adrian.stanca1@gmail.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",defaultValue:"+44 123 456 7890",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})})]})]}),"company"===t&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Company Information"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),s.jsx("input",{type:"text",defaultValue:"ConstructAI",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("textarea",{rows:3,defaultValue:"123 Construction Ave, London, UK",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax ID"}),s.jsx("input",{type:"text",defaultValue:"GB123456789",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Number"}),s.jsx("input",{type:"text",defaultValue:"12345678",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})})]})]}),"notifications"===t&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Notification Preferences"}),s.jsx("div",{className:"space-y-4",children:["Email notifications","Project updates","Invoice reminders","Team mentions","Weekly reports"].map(e=>s.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200",children:[s.jsx("span",{className:"text-gray-900",children:e}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},e))})]}),"security"===t&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Security Settings"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),s.jsx("input",{type:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsx("input",{type:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),s.jsx("input",{type:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Update Password"})})]})]})]})},X=()=>{const[t,r]=e.useState([]),[a,l]=e.useState([]),[n,o]=e.useState(new Set),[x,m]=e.useState(!0),[p,h]=e.useState(""),[y,f]=e.useState(""),[v,N]=e.useState("downloads");e.useEffect(()=>{w(),k(),C()},[y,v]);const w=async()=>{try{const e=localStorage.getItem("constructai_token"),s=await fetch("/api/marketplace/categories",{headers:{Authorization:`Bearer ${e}`}}),t=await s.json();t.success&&l(t.data)}catch(e){}},k=async()=>{try{const e=localStorage.getItem("constructai_token"),s=new URLSearchParams;y&&s.append("category",y),v&&s.append("sort",v);const t=await fetch(`/api/marketplace/modules?${s}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();a.success&&r(a.data)}catch(e){}finally{m(!1)}},C=async()=>{try{const e=localStorage.getItem("constructai_token"),s=await fetch("http://localhost:3001/api/marketplace/installed",{headers:{Authorization:`Bearer ${e}`}}),t=await s.json();if(t.success){const e=new Set(t.data.map(e=>e.module_id));o(e)}}catch(e){}},S=t.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())||e.description.toLowerCase().includes(p.toLowerCase()));return s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Module Marketplace"}),s.jsx("p",{className:"text-gray-600",children:"Extend your CortexBuild platform with powerful modules"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative md:col-span-2",children:[s.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search modules...",value:p,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("select",{value:v,onChange:e=>N(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"downloads",children:"Most Popular"}),s.jsx("option",{value:"rating",children:"Highest Rated"}),s.jsx("option",{value:"newest",children:"Newest"}),s.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[s.jsx(i,{className:"w-5 h-5"}),s.jsx("span",{children:"Categories"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>f(""),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+(""===y?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"All Modules"}),s.jsx("span",{className:"text-sm text-gray-500",children:t.length})]})}),a.map(e=>s.jsx("button",{onClick:()=>f(e.slug),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+(y===e.slug?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:e.name}),s.jsx("span",{className:"text-sm text-gray-500",children:e.module_count})]})},e.id))]})]})}),s.jsx("div",{className:"lg:col-span-3",children:x?s.jsx("div",{className:"text-center py-12",children:"Loading modules..."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.map(e=>{const t=n.has(e.id);return s.jsxs("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(g,{className:"w-4 h-4"}),s.jsx("span",{children:e.downloads.toLocaleString()})]}),s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(b,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),s.jsxs("span",{children:[e.rating," (",e.reviews_count,")"]})]})]})]}),t&&s.jsx("div",{className:"ml-4 p-2 bg-green-100 rounded-full",children:s.jsx(u,{className:"w-5 h-5 text-green-600"})})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-sm text-gray-500",children:["v",e.version]}),e.is_free?s.jsx("span",{className:"ml-3 px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded",children:"FREE"}):s.jsxs("span",{className:"ml-3 text-lg font-bold text-gray-900",children:["£",e.price]})]}),t?s.jsxs("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to uninstall this module?"))try{const s=localStorage.getItem("constructai_token"),t=await fetch(`http://localhost:3001/api/marketplace/uninstall/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}});(await t.json()).success&&(o(s=>{const t=new Set(s);return t.delete(e),t}),alert("Module uninstalled successfully!"))}catch(s){alert("Failed to uninstall module")}})(e.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2",children:[s.jsx(c,{className:"w-4 h-4"}),s.jsx("span",{children:"Uninstall"})]}):s.jsxs("button",{onClick:()=>(async e=>{try{const s=localStorage.getItem("constructai_token"),t=await fetch("/api/marketplace/install",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({module_id:e})}),r=await t.json();r.success?(o(s=>new Set([...s,e])),alert("Module installed successfully!")):alert(r.error||"Failed to install module")}catch(s){alert("Failed to install module")}})(e.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx(j,{className:"w-4 h-4"}),s.jsx("span",{children:"Install"})]})]})]},e.id)})})})]})]})})},ee=({stats:e,revenueData:t,projectStatusData:r,timeTrackingData:a})=>{const l=e=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),n=Math.max(...t.map(e=>e.amount)),i=Math.max(...a.map(e=>e.hours)),o=r.reduce((e,s)=>e+s.count,0),c=t.reduce((e,s)=>e+s.amount,0)/t.length,d=((t[t.length-1].amount-t[0].amount)/t[0].amount*100).toFixed(1),x=a.reduce((e,s)=>e+s.hours,0)/a.length,m=((r.find(e=>"Completed"===e.status)?.count||0)/o*100).toFixed(0),u=e.totalRevenue/e.totalHours;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("span",{className:"text-sm font-medium opacity-90",children:"+12.5%"})]}),s.jsx("h3",{className:"text-2xl font-bold mb-1",children:l(e.totalRevenue)}),s.jsx("p",{className:"text-sm opacity-90",children:"Total Revenue"}),s.jsxs("p",{className:"text-xs opacity-75 mt-2",children:["Avg: ",l(c),"/month"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),s.jsx("span",{className:"text-sm font-medium opacity-90",children:"+3 new"})]}),s.jsx("h3",{className:"text-2xl font-bold mb-1",children:e.activeProjects}),s.jsx("p",{className:"text-sm opacity-90",children:"Active Projects"}),s.jsxs("p",{className:"text-xs opacity-75 mt-2",children:[m,"% completion rate"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("span",{className:"text-sm font-medium opacity-90",children:"This month"})]}),s.jsxs("h3",{className:"text-2xl font-bold mb-1",children:[e.totalHours.toLocaleString(),"h"]}),s.jsx("p",{className:"text-sm opacity-90",children:"Total Hours Logged"}),s.jsxs("p",{className:"text-xs opacity-75 mt-2",children:["Avg: ",x.toFixed(0),"h/week"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("span",{className:"text-sm font-medium opacity-90",children:"Awaiting"})]}),s.jsx("h3",{className:"text-2xl font-bold mb-1",children:e.pendingInvoices}),s.jsx("p",{className:"text-sm opacity-90",children:"Pending Invoices"}),s.jsxs("p",{className:"text-xs opacity-75 mt-2",children:[l(u),"/hour rate"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"🤖"}),"AI Business Insights"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(se,{icon:"⚠️",title:"Budget Alert",description:"3 projects trending over budget by £125K total. Review cost controls immediately.",action:"View Projects",color:"red"}),s.jsx(se,{icon:"💷",title:"Cash Flow Optimization",description:"£485K in outstanding invoices. Send reminders to improve cash flow by 18%.",action:"Send Reminders",color:"green"}),s.jsx(se,{icon:"📊",title:"Performance Insight",description:"Team productivity up 12% this month. 2,340 hours logged across 15 active projects.",action:"View Analytics",color:"blue"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"📋"}),"Recent Projects"]}),s.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"View All →"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(te,{name:"Canary Wharf Office Tower",client:"London Development Group",budget:"£8,750,000",status:"in progress",progress:62}),s.jsx(te,{name:"Thames Riverside Apartments",client:"Green Valley Homes UK",budget:"£6,200,000",status:"in progress",progress:38}),s.jsx(te,{name:"Manchester Industrial Park",client:"Northern Construction Ltd",budget:"£12,500,000",status:"planning"}),s.jsx(te,{name:"Birmingham Shopping Centre",client:"Retail Developments PLC",budget:"£9,800,000",status:"in progress",progress:15})]})]})}),s.jsx("div",{children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"🔔"}),"Alerts & Actions"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(re,{icon:"💷",title:"Outstanding Invoices",description:"£485,000 awaiting payment from 12 clients",color:"yellow"}),s.jsx(re,{icon:"⏰",title:"Deadline Alert",description:"3 projects due for completion within 2 weeks",color:"red"}),s.jsx(re,{icon:"🤖",title:"AI Recommendation",description:"Allocate 15% more resources to Canary Wharf project",color:"blue"}),s.jsxs("button",{type:"button",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all flex items-center justify-center space-x-2 shadow-lg",children:[s.jsx("span",{children:"➕"}),s.jsx("span",{children:"New Project"})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Trend (Last 6 Months)"}),s.jsx("div",{className:"space-y-2",children:t.map((e,t)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600 w-16",children:e.month}),s.jsx("div",{className:"flex-1 bg-gray-100 rounded-full h-8 relative overflow-hidden",children:s.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-end pr-3",style:{width:e.amount/n*100+"%"},children:s.jsx("span",{className:"text-xs font-medium text-white",children:l(e.amount)})})})]},t))}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Growth Rate:"}),s.jsxs("span",{className:"font-semibold "+(parseFloat(d)>=0?"text-green-600":"text-red-600"),children:[parseFloat(d)>=0?"+":"",d,"%"]})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Project Status Distribution"}),s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsxs("div",{className:"relative w-48 h-48",children:[s.jsx("div",{className:"w-full h-full rounded-full",style:{background:`conic-gradient(\n                                        ${r.map((e,s)=>{const t=r.slice(0,s).reduce((e,s)=>e+s.count/o*100,0),a=e.count/o*100;return`${e.color} ${t}% ${t+a}%`}).join(", ")}\n                                    )`}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"bg-white rounded-full w-24 h-24 flex items-center justify-center shadow-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:o}),s.jsx("div",{className:"text-xs text-gray-600",children:"Total"})]})})})]})}),s.jsx("div",{className:"space-y-2",children:r.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),s.jsx("span",{className:"text-sm text-gray-700",children:e.status})]}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.count," (",(e.count/o*100).toFixed(0),"%)"]})]},t))})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weekly Time Tracking"}),s.jsx("div",{className:"flex items-end space-x-4 h-64",children:a.map((e,t)=>s.jsxs("div",{className:"flex-1 flex flex-col items-center space-y-2",children:[s.jsx("div",{className:"w-full bg-gray-100 rounded-t-lg relative",style:{height:e.hours/i*100+"%"},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-green-500 to-green-400 rounded-t-lg flex items-start justify-center pt-2",children:s.jsxs("span",{className:"text-xs font-medium text-white",children:[e.hours,"h"]})})}),s.jsx("span",{className:"text-xs font-medium text-gray-600",children:e.week})]},t))}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Weekly Average:"}),s.jsxs("span",{className:"font-semibold text-green-600",children:[x.toFixed(0)," hours"]})]})})]})]})},se=({icon:e,title:t,description:r,action:a,color:l})=>s.jsxs("div",{className:`${{red:"bg-red-50 border-red-200 text-red-800",green:"bg-green-50 border-green-200 text-green-800",blue:"bg-blue-50 border-blue-200 text-blue-800",yellow:"bg-yellow-50 border-yellow-200 text-yellow-800"}[l]} border rounded-lg p-4`,children:[s.jsx("div",{className:"text-3xl mb-2",children:e}),s.jsx("h4",{className:"font-semibold mb-1",children:t}),s.jsx("p",{className:"text-sm mb-3 opacity-90",children:r}),s.jsx("button",{type:"button",className:`${{red:"bg-red-600 hover:bg-red-700",green:"bg-green-600 hover:bg-green-700",blue:"bg-blue-600 hover:bg-blue-700",yellow:"bg-yellow-600 hover:bg-yellow-700"}[l]} text-white px-3 py-1.5 rounded text-sm font-medium transition-colors`,children:a})]}),te=({name:e,client:t,budget:r,status:a,progress:l})=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:e}),s.jsx("p",{className:"text-sm text-gray-600",children:t})]}),s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${{planning:"bg-yellow-100 text-yellow-800","in progress":"bg-blue-100 text-blue-800","on hold":"bg-gray-100 text-gray-800",completed:"bg-green-100 text-green-800"}[a]}`,children:a})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:r}),void 0!==l&&s.jsxs("span",{className:"text-blue-600 font-medium",children:[l,"% complete"]})]}),void 0!==l&&s.jsx("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all",style:{width:`${l}%`}})})]}),re=({icon:e,title:t,description:r,color:a})=>s.jsx("div",{className:`${{yellow:"bg-yellow-50 border-yellow-200",blue:"bg-blue-50 border-blue-200",red:"bg-red-50 border-red-200",green:"bg-green-50 border-green-200"}[a]} border rounded-lg p-4`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("span",{className:"text-2xl",children:e}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:t}),s.jsx("p",{className:"text-sm text-gray-700",children:r})]})]})}),ae=()=>{const[t,r]=e.useState([]),[a,l]=e.useState([]),[n,i]=e.useState([]),[o,x]=e.useState("grid"),[m,u]=e.useState(""),[p,h]=e.useState("all"),[g,b]=e.useState(100),[L,M]=e.useState(!0),[_,P]=e.useState({totalApps:0,installedApps:0,runningApps:0,totalStorage:"10 GB",usedStorage:"2.5 GB"}),A=e.useCallback(async()=>{try{M(!0);const e=localStorage.getItem("token")||localStorage.getItem("constructai_token"),s=await fetch("/api/marketplace/installed",{headers:e?{Authorization:`Bearer ${e}`}:{}});if(s.ok){const e=await s.json();if(e.success&&e.data)return r(e.data),l(e.data),void P(s=>({...s,installedApps:e.data.length}))}}catch(s){}const e=[{id:"1",name:"Project Manager",icon:"🏗️",description:"Manage your construction projects efficiently",installed:!0,category:"productivity",color:"blue",version:"2.1.0",installation_date:"2024-01-15",size:"45 MB",developer:"CortexBuild Team"},{id:"2",name:"Time Tracker",icon:"⏱️",description:"Track time and attendance for your team",installed:!0,category:"productivity",color:"green",version:"1.8.2",installation_date:"2024-01-10",size:"32 MB",developer:"CortexBuild Team"},{id:"3",name:"Invoice Generator",icon:"💰",description:"Create and manage invoices professionally",installed:!0,category:"finance",color:"purple",version:"3.0.1",installation_date:"2024-01-08",size:"28 MB",developer:"CortexBuild Team"},{id:"4",name:"Document Manager",icon:"📄",description:"Organize and manage project documents",installed:!0,category:"productivity",color:"orange",version:"1.5.0",size:"15 MB",developer:"CortexBuild Team"},{id:"5",name:"RFI System",icon:"❓",description:"Request for Information management system",installed:!0,category:"communication",color:"red",version:"2.3.0",size:"38 MB",developer:"CortexBuild Team"},{id:"6",name:"Analytics Dashboard",icon:"📊",description:"View detailed project analytics and insights",installed:!0,category:"analytics",color:"indigo",version:"4.2.0",size:"52 MB",developer:"CortexBuild Team"}];r(e),l(e),P(s=>({...s,installedApps:e.length}))},[]);e.useEffect(()=>{A()},[A]),e.useEffect(()=>{P(e=>({...e,runningApps:n.length}))},[n]),e.useEffect(()=>{let e=t;m&&(e=e.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())||e.description.toLowerCase().includes(m.toLowerCase())||e.category.toLowerCase().includes(m.toLowerCase()))),"all"!==p&&(e=e.filter(e=>e.category===p)),l(e)},[t,m,p]);const I=["all",...Array.from(new Set(t.map(e=>e.category)))],z=e=>{const s=n.find(s=>s.app.id===e.id);if(s)return i(e=>e.map(e=>e.id===s.id?{...e,isMinimized:!1,zIndex:g+1}:e)),void b(e=>e+1);const t={id:`${e.id}-${Date.now()}`,app:e,isMaximized:!1,isMinimized:!1,zIndex:g+1,position:{x:100,y:100},size:{width:800,height:600}};i(e=>[...e,t]),b(e=>e+1)},B=e=>{i(s=>s.map(s=>s.id===e?{...s,isMinimized:!s.isMinimized}:s))},T=e=>{i(s=>s.map(s=>s.id===e?{...s,zIndex:g+1}:s)),b(e=>e+1)},R=e=>{const s={blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",purple:"from-purple-500 to-purple-600",orange:"from-orange-500 to-orange-600",red:"from-red-500 to-red-600",indigo:"from-indigo-500 to-indigo-600"};return s[e]||s.blue};return s.jsxs("div",{className:"h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIvPjwvc3ZnPg==')]"})}),s.jsxs("div",{className:"relative z-10 bg-black bg-opacity-50 backdrop-blur-md border-b border-white border-opacity-20 px-6 py-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(y,{className:"w-6 h-6 text-white"}),s.jsx("h1",{className:"text-xl font-bold text-white",children:"My Applications Desktop"}),s.jsxs("div",{className:"hidden md:flex items-center gap-4 text-sm text-gray-300",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(f,{className:"w-4 h-4"}),s.jsxs("span",{children:[_.runningApps," running"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(v,{className:"w-4 h-4"}),s.jsxs("span",{children:[_.usedStorage," / ",_.totalStorage]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:A,className:"p-2 rounded-lg text-gray-300 hover:bg-white hover:bg-opacity-10 transition-colors",title:"Refresh",children:s.jsx(N,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>x("grid"),className:"p-2 rounded-lg transition-colors "+("grid"===o?"bg-white bg-opacity-20 text-white":"text-gray-300 hover:bg-white hover:bg-opacity-10"),title:"Grid View",children:s.jsx(w,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>x("list"),className:"p-2 rounded-lg transition-colors "+("list"===o?"bg-white bg-opacity-20 text-white":"text-gray-300 hover:bg-white hover:bg-opacity-10"),title:"List View",children:s.jsx(k,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search applications...",value:m,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-white bg-opacity-10 border border-white border-opacity-20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:I.map(e=>s.jsx("button",{onClick:()=>h(e),className:"px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors "+(p===e?"bg-white bg-opacity-20 text-white":"bg-white bg-opacity-10 text-gray-300 hover:bg-opacity-15"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),s.jsx("div",{className:"relative z-10 p-8 h-[calc(100vh-200px)] overflow-y-auto",children:L?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(N,{className:"w-12 h-12 animate-spin text-white"})}):0===a.length?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white text-opacity-60",children:[s.jsx(j,{className:"w-24 h-24 mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Applications Found"}),s.jsx("p",{className:"text-lg",children:m?"Try adjusting your search":"Visit the Marketplace to install applications"})]}):"grid"===o?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6",children:a.map(e=>s.jsxs("button",{onClick:()=>z(e),className:"group flex flex-col items-center gap-3 p-4 rounded-xl hover:bg-white hover:bg-opacity-10 transition-all transform hover:scale-105",children:[s.jsxs("div",{className:`w-20 h-20 rounded-2xl bg-gradient-to-br ${R(e.color)} flex items-center justify-center text-4xl shadow-lg group-hover:shadow-2xl transition-shadow relative`,children:[e.icon,e.version&&s.jsxs("span",{className:"absolute -top-2 -right-2 bg-black bg-opacity-50 text-xs px-2 py-1 rounded-full",children:["v",e.version]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-white text-sm font-medium line-clamp-2",children:e.name}),e.size&&s.jsx("div",{className:"text-gray-400 text-xs mt-1",children:e.size})]})]},e.id))}):s.jsx("div",{className:"space-y-3",children:a.map(e=>s.jsxs("button",{onClick:()=>z(e),className:"w-full flex items-center gap-4 p-4 rounded-xl bg-white bg-opacity-10 hover:bg-opacity-20 transition-all",children:[s.jsx("div",{className:`w-16 h-16 rounded-lg bg-gradient-to-br ${R(e.color)} flex items-center justify-center text-3xl`,children:e.icon}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"text-white font-semibold",children:e.name}),e.version&&s.jsxs("span",{className:"text-gray-400 text-xs",children:["v",e.version]})]}),s.jsx("p",{className:"text-gray-300 text-sm mb-1",children:e.description}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[e.size&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(v,{className:"w-3 h-3"})," ",e.size]}),e.developer&&s.jsxs("span",{children:["by ",e.developer]})]})]}),s.jsx(C,{className:"w-5 h-5 text-gray-400"})]},e.id))})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-50 bg-black bg-opacity-70 backdrop-blur-md border-t border-white border-opacity-20 px-4 py-2",children:s.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto",children:[n.filter(e=>!e.isMinimized).map(e=>s.jsxs("button",{onClick:()=>T(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white bg-opacity-20 hover:bg-opacity-30 transition-colors flex-shrink-0",children:[s.jsx("span",{className:"text-xl",children:e.app.icon}),s.jsx("span",{className:"text-white text-sm font-medium",children:e.app.name})]},e.id)),n.filter(e=>e.isMinimized).map(e=>s.jsxs("button",{onClick:()=>B(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white bg-opacity-10 hover:bg-opacity-20 transition-colors opacity-60 flex-shrink-0",children:[s.jsx("span",{className:"text-xl",children:e.app.icon}),s.jsx("span",{className:"text-white text-sm font-medium",children:e.app.name})]},e.id))]})}),n.map(e=>!e.isMinimized&&s.jsxs("div",{className:"absolute bg-white rounded-lg shadow-2xl overflow-hidden transition-all "+(e.isMaximized?"inset-4":"top-20 left-20 w-[800px] h-[600px]"),style:{zIndex:e.zIndex},onClick:()=>T(e.id),children:[s.jsxs("div",{className:`bg-gradient-to-r ${R(e.app.color)} px-4 py-3 flex items-center justify-between cursor-move`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:e.app.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:e.app.name}),e.app.version&&s.jsxs("p",{className:"text-white text-xs opacity-75",children:["v",e.app.version]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:s=>{s.stopPropagation(),B(e.id)},className:"p-1 hover:bg-white hover:bg-opacity-20 rounded transition-colors",title:"Minimize",children:s.jsx(S,{className:"w-4 h-4 text-white"})}),s.jsx("button",{onClick:s=>{var t;s.stopPropagation(),t=e.id,i(e=>e.map(e=>e.id===t?{...e,isMaximized:!e.isMaximized}:e))},className:"p-1 hover:bg-white hover:bg-opacity-20 rounded transition-colors",title:e.isMaximized?"Restore":"Maximize",children:s.jsx(D,{className:"w-4 h-4 text-white"})}),s.jsx("button",{onClick:s=>{var t;s.stopPropagation(),t=e.id,i(e=>e.filter(e=>e.id!==t))},className:"p-1 hover:bg-red-500 rounded transition-colors",title:"Close",children:s.jsx(c,{className:"w-4 h-4 text-white"})})]})]}),s.jsx("div",{className:"h-[calc(100%-52px)] bg-gray-50",children:e.app.url?s.jsx("iframe",{src:e.app.url,className:"w-full h-full border-0",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-modals",title:e.app.name}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-6xl mb-4 block",children:e.app.icon}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:e.app.name}),s.jsx("p",{className:"text-gray-600 mb-1",children:e.app.description}),e.app.version&&s.jsxs("p",{className:"text-sm text-gray-500",children:["Version ",e.app.version]})]})})})]},e.id))]})},le=({user:t,onLogout:r})=>{const[l,n]=e.useState("dashboard");return s.jsxs("div",{className:"flex h-screen bg-gray-50",children:[s.jsx(ne,{currentPage:l,onNavigate:n,user:t,onLogout:r}),s.jsxs("main",{className:"flex-1 overflow-y-auto",children:["dashboard"===l&&s.jsx(ie,{}),"my-apps"===l&&s.jsx(ae,{}),"projects"===l&&s.jsx(I,{}),"clients"===l&&s.jsx(R,{}),"rfis"===l&&s.jsx(F,{}),"subcontractors"===l&&s.jsx(G,{}),"invoices"===l&&s.jsx(E,{}),"timetracking"===l&&s.jsx(V,{}),"purchaseorders"===l&&s.jsx(q,{}),"documents"===l&&s.jsx(Z,{}),"reports"===l&&s.jsx(Y,{}),"ledger"===l&&s.jsx(K,{}),"marketplace"===l&&s.jsx(X,{}),"settings"===l&&s.jsx(Q,{user:t})]}),s.jsx(a,{})]})},ne=({currentPage:e,onNavigate:t,user:r,onLogout:a})=>s.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-600 via-purple-600 to-cyan-500 flex items-center justify-center shadow-lg transform hover:scale-110 hover:rotate-6 transition-all duration-300 cursor-pointer",children:s.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),s.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-blue-600 via-purple-600 to-cyan-500 animate-ping opacity-10"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h2",{className:"text-xl font-black tracking-tight bg-gradient-to-r from-blue-600 via-purple-600 to-cyan-500 bg-clip-text text-transparent",children:"CortexBuild"}),s.jsx("p",{className:"text-[10px] font-semibold text-gray-500 tracking-wider -mt-0.5",children:"AI PLATFORM"})]})]})}),s.jsxs("nav",{className:"flex-1 overflow-y-auto p-4",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Navigation"}),s.jsx("ul",{className:"space-y-1",children:[{id:"dashboard",label:"Dashboard",icon:"📊"},{id:"projects",label:"Projects",icon:"🏗️"},{id:"clients",label:"Clients",icon:"👥"},{id:"rfis",label:"RFIs",icon:"❓"},{id:"subcontractors",label:"Subcontractors",icon:"🔧"},{id:"invoices",label:"Invoices",icon:"💰"},{id:"timetracking",label:"Time Tracking",icon:"⏱️"},{id:"purchaseorders",label:"Purchase Orders",icon:"📦"},{id:"documents",label:"Documents",icon:"📄"},{id:"reports",label:"Reports",icon:"📈"},{id:"ledger",label:"Ledger",icon:"📒"},{id:"marketplace",label:"Marketplace",icon:"🛒"},{id:"my-apps",label:"My Applications",icon:"🖥️"}].map(r=>s.jsx("li",{children:s.jsxs("button",{type:"button",onClick:()=>t(r.id),className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors "+(e===r.id?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"),children:[s.jsx("span",{className:"text-xl",children:r.icon}),s.jsx("span",{className:"font-medium",children:r.label})]})},r.id))}),s.jsx("ul",{className:"mt-8 space-y-1",children:s.jsx("li",{children:s.jsxs("button",{type:"button",onClick:()=>t("settings"),className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors "+("settings"===e?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"),children:[s.jsx("span",{className:"text-xl",children:"⚙️"}),s.jsx("span",{className:"font-medium",children:"Settings"})]})})})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 via-purple-600 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold shadow-lg",children:r.name.split(" ").map(e=>e[0]).join("")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:r.name}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:r.email})]})]}),s.jsxs("button",{type:"button",onClick:a,className:"w-full flex items-center justify-center space-x-2 px-4 py-2.5 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-300 font-semibold shadow-md hover:shadow-lg transform hover:scale-105",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),s.jsx("span",{children:"Logout"})]})]})]}),ie=()=>s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome back, Adrian"}),s.jsx("p",{className:"text-gray-600",children:"Here's what's happening with your construction projects today"})]}),s.jsx(ee,{stats:{totalRevenue:245e4,activeProjects:15,totalHours:2340,pendingInvoices:12},revenueData:[{month:"Jan",amount:385e3},{month:"Feb",amount:42e4},{month:"Mar",amount:395e3},{month:"Apr",amount:445e3},{month:"May",amount:41e4},{month:"Jun",amount:395e3}],projectStatusData:[{status:"Active",count:15,color:"#3B82F6"},{status:"Planning",count:8,color:"#8B5CF6"},{status:"On Hold",count:3,color:"#F59E0B"},{status:"Completed",count:24,color:"#10B981"}],timeTrackingData:[{week:"Week 1",hours:445},{week:"Week 2",hours:520},{week:"Week 3",hours:485},{week:"Week 4",hours:510},{week:"Week 5",hours:380}]})]});export{le as Base44Clone};

import{r as e,j as t}from"./react-core-FGHlRSau.js";import{u as s,ba as l,D as a,a as i,g as r,bb as c}from"./icon-pack-tZfEXMDa.js";import"./vendor-BX0gT1qP.js";const n=({currentUser:n})=>{const[m,g]=e.useState(null),[u,j]=e.useState(!0),[h,p]=e.useState("30d");e.useEffect(()=>{f()},[h]);const f=async()=>{j(!0);try{const e=await fetch(`/api/analytics?timeRange=${h}`),t=await e.json();t.success&&g(t.metrics)}catch(e){}finally{j(!1)}};if(u)return t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"})});if(!m)return t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx("p",{className:"text-gray-500",children:"Nu există date disponibile"})});const b=m.totalBudget>0?m.spentBudget/m.totalBudget*100:0,v=m.totalTasks>0?m.completedTasks/m.totalTasks*100:0,N=Math.floor(m.totalTimeSpent/60),y=Math.floor(m.averageProjectDuration);return t.jsx("div",{className:"h-full overflow-y-auto bg-gray-50 p-6",children:t.jsxs("div",{className:"mx-auto max-w-7xl",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Analiză completă a performanțelor proiectelor"})]}),t.jsxs("div",{className:"mb-6 flex items-center justify-between rounded-lg bg-white p-4 shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(s,{className:"h-5 w-5 text-gray-600"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Perioadă:"})]}),t.jsx("div",{className:"flex gap-2",children:["7d","30d","90d","all"].map(e=>t.jsx("button",{onClick:()=>p(e),className:"rounded-lg px-4 py-2 text-sm font-medium transition-colors "+(h===e?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"7d"===e?"7 zile":"30d"===e?"30 zile":"90d"===e?"90 zile":"Toate"},e))})]}),t.jsxs("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[t.jsx(o,{title:"Proiecte Active",value:m.activeProjects,total:m.totalProjects,icon:t.jsx(l,{className:"h-8 w-8 text-blue-600"}),color:"blue",percentage:m.totalProjects>0?m.activeProjects/m.totalProjects*100:0}),t.jsx(o,{title:"Buget Utilizat",value:`${m.spentBudget.toLocaleString()}`,total:`${m.totalBudget.toLocaleString()}`,unit:"lei",icon:t.jsx(a,{className:"h-8 w-8 text-green-600"}),color:"green",percentage:b}),t.jsx(o,{title:"Task-uri Finalizate",value:m.completedTasks,total:m.totalTasks,icon:t.jsx(i,{className:"h-8 w-8 text-purple-600"}),color:"purple",percentage:v}),t.jsx(o,{title:"Timp Petrecut",value:`${N}h`,total:`${y} zile (medie)`,icon:t.jsx(r,{className:"h-8 w-8 text-orange-600"}),color:"orange",percentage:0})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[t.jsx(d,{title:"Tracking Buget",icon:t.jsx(c,{}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Cheltuit"}),t.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[m.spentBudget.toLocaleString()," lei"]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Rămas"}),t.jsxs("span",{className:"text-lg font-semibold text-blue-600",children:[m.remainingBudget.toLocaleString()," lei"]})]}),t.jsx("div",{className:"relative h-6 w-full overflow-hidden rounded-full bg-gray-200",children:t.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-500",style:{width:`${Math.min(b,100)}%`}})}),t.jsxs("p",{className:"text-center text-sm text-gray-500",children:[b.toFixed(1),"% utilizat din buget total"]})]})}),t.jsx(d,{title:"Progres Proiecte",icon:t.jsx(s,{}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(x,{label:"Finalizate",value:m.completedProjects,total:m.totalProjects,color:"blue"}),t.jsx(x,{label:"În desfășurare",value:m.activeProjects,total:m.totalProjects,color:"green"}),t.jsx(x,{label:"Planificate",value:m.totalProjects-m.activeProjects-m.completedProjects,total:m.totalProjects,color:"gray"})]})}),t.jsx(d,{title:"Completare Task-uri",icon:t.jsx(l,{}),children:t.jsx("div",{className:"flex h-48 items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-5xl font-bold text-purple-600",children:[v.toFixed(0),"%"]}),t.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[m.completedTasks," din ",m.totalTasks," task-uri finalizate"]})]})})}),t.jsx(d,{title:"Analiză Timp",icon:t.jsx(r,{}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-lg bg-orange-50 p-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Timp total petrecut"}),t.jsxs("div",{className:"mt-1 text-2xl font-bold text-orange-600",children:[N," ore"]})]}),t.jsxs("div",{className:"rounded-lg bg-blue-50 p-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Durată medie proiect"}),t.jsxs("div",{className:"mt-1 text-2xl font-bold text-blue-600",children:[y," zile"]})]})]})})]})]})})},o=({title:e,value:s,total:l,unit:a="",icon:i,color:r,percentage:c})=>t.jsxs("div",{className:`rounded-lg bg-gradient-to-br ${{blue:"from-blue-50 to-blue-100",green:"from-green-50 to-green-100",purple:"from-purple-50 to-purple-100",orange:"from-orange-50 to-orange-100"}[r]} p-6 shadow-sm`,children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:e}),t.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:[s," ",a]}),t.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["din ",l," ",a]})]}),t.jsx("div",{className:"opacity-80",children:i})]}),c>0&&t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"relative h-2 w-full overflow-hidden rounded-full bg-white/50",children:t.jsx("div",{className:`absolute left-0 top-0 h-full bg-${r}-600 transition-all duration-500`,style:{width:`${Math.min(c,100)}%`}})}),t.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:[c.toFixed(0),"% complet"]})]})]}),d=({title:e,icon:s,children:l})=>t.jsxs("div",{className:"rounded-lg bg-white p-6 shadow-sm",children:[t.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[t.jsx("div",{className:"text-gray-600",children:s}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e})]}),l]}),x=({label:e,value:s,total:l,color:a})=>{const i=l>0?s/l*100:0;return t.jsxs("div",{children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:e}),t.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[s," (",i.toFixed(0),"%)"]})]}),t.jsx("div",{className:"relative h-3 w-full overflow-hidden rounded-full bg-gray-200",children:t.jsx("div",{className:`absolute left-0 top-0 h-full ${{blue:"bg-blue-600",green:"bg-green-600",gray:"bg-gray-600"}[a]} transition-all duration-500`,style:{width:`${Math.min(i,100)}%`}})})]})};export{n as AnalyticsDashboardScreen};
